<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog &mdash; KubeInit  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Notice" href="notice.html" />
    <link rel="prev" title="Supporters" href="supporters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


  <a href="http://docs.kubeinit.org/#" class="icon icon-home"> KubeInit



</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="roles.html">Documented roles in KubeInit</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Documented modules in KubeInit</a></li>
<li class="toctree-l1"><a class="reference internal" href="howtos_and_presentations.html">HowTo’s and presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory_diagrams.html">Inventory diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="playbook_diagrams.html">Playbook diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="supporters.html">Supporters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unreleased">(unreleased)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#chore">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ci">CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v2-2-0-release-date-2023-01-19">v2.2.0 - Release date: 2023-01-19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#refactor">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v2-1-0-release-date-2022-04-12">v2.1.0 - Release date: 2022-04-12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v2-0-1-release-date-2021-12-24">v2.0.1 - Release date: 2021-12-24</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v2-0-0-release-date-2021-09-30">v2.0.0 - Release date: 2021-09-30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-2-release-date-2021-03-19">v1.0.2 - Release date: 2021-03-19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-1-release-date-2021-03-10">v1.0.1 - Release date: 2021-03-10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id28">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-0-release-date-2021-02-05">v1.0.0 - Release date: 2021-02-05</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-5-release-date-2020-12-15">v0.6.5 - Release date: 2020-12-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id36">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-4-release-date-2020-12-09">v0.6.4 - Release date: 2020-12-09</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id39">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id40">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-3-release-date-2020-12-08">v0.6.3 - Release date: 2020-12-08</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id43">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-2-release-date-2020-12-04">v0.6.2 - Release date: 2020-12-04</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id46">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-1-release-date-2020-11-23">v0.6.1 - Release date: 2020-11-23</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id50">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-0-release-date-2020-11-20">v0.6.0 - Release date: 2020-11-20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id52">Chore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id54">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">Refactor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-7-release-date-2020-10-21">v0.5.7 - Release date: 2020-10-21</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-6-release-date-2020-10-21">v0.5.6 - Release date: 2020-10-21</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-4-release-date-2020-10-21">v0.5.4 - Release date: 2020-10-21</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="notice.html">Notice</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">KubeInit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Changelog</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/kubeinit/kubeinit/blob/main/docs/src/changelog.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this heading"></a></h1>
<section id="unreleased">
<h2>(unreleased)<a class="headerlink" href="#unreleased" title="Permalink to this heading"></a></h2>
<section id="chore">
<h3>Chore<a class="headerlink" href="#chore" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Remove ci/ansible and kubeinit_setup. [Glenn Marcy]</p></li>
<li><p>Fix lint issues. [Carlos Camacho]</p>
<p>This commit fix a few linter issues.</p>
</li>
</ul>
</section>
<section id="ci">
<h3>CI<a class="headerlink" href="#ci" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Remove extra ansible arguments. [Carlos Camacho]</p>
<p>This commit removes the extra argument passed in pytest
when running the molecule testing suite.</p>
</li>
<li><p>Include docker log after distro_test job. [Carlos Camacho]</p>
<p>This commit gets the logs after running
the distro_test job.</p>
</li>
<li><p>Fix linter issues. [Carlos Camacho]</p>
<p>This commit disables the experimental
new lint checks.</p>
</li>
<li><p>Fix CI Limit rate message. [Carlos Camacho]</p>
<p>This commit adds a better message description
when there is a failure in GH actions because
of a GH limit rate API issue.</p>
</li>
<li><p>Update GH tracker id. [Carlos Camacho]</p>
<p>This commit updates the GH CI results
tracker id.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Sync up containers on push. [Carlos Camacho]</p>
<p>This commit makes the container mirror
script to run in evrey push.</p>
</li>
<li><p>Include flannel containers. [Carlos Camacho]</p>
<p>This commit includes container images
for flannel in the vanilla K8s scenario.</p>
</li>
<li><p>Move badge status instead of copy. [Carlos Camacho]</p>
<p>This commit moves the badge files
instead of copying it.</p>
</li>
<li><p>Allow write all to badge_status. [Carlos Camacho]</p>
<p>This commit allow write access to the
badge status image.</p>
</li>
<li><p>Use rsvg-convert for docs. [Carlos Camacho]</p>
<p>This commit changes the tool
used for rendering the PNG images
from the SVG sources in the documentation.</p>
</li>
<li><p>Linters fix and package dependencies. [Carlos Camacho]</p>
<p>This commit fixes the current lint errors
and includes the missing dependencies for
imagemagick.</p>
</li>
</ul>
</section>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Upgrade CDK version to 1.26/jammy. [Carlos Camacho]</p>
<p>This commit upgrades the CDK version that is deployed to use
jammy and k8s 1.26.</p>
</li>
<li><p>Remove unused roles. [Carlos Camacho]</p>
<p>This commit keeps cleaning
unused roles until further notice.</p>
</li>
<li><p>Remove nextgen integration. [Carlos Camacho]</p>
<p>This commit removes an integration that
will not be used potentially anymore.</p>
</li>
<li><p>Remove submariner integration. [Carlos Camacho]</p>
<p>This commit removes the submariner integration
that is not used anymore.</p>
</li>
<li><p>Upgrade OKD to 4.12. [Carlos Camacho]</p>
<p>This commit upgrades the OKD version
to the latest.</p>
</li>
<li><p>Upgrade Kubernetes and Flannel to latest stable. [Carlos Camacho]</p>
<p>This commit upgrades the Kubernetes and flannel
version deployed in the vanilla scenario
to their corresponding latest stable versions.</p>
</li>
<li><p>Include containerd as runtime in Vanila k8s. [Carlos Camacho]</p>
<p>This commit includes the option of using containerd
in Vanila K8s to support confidential containers.</p>
</li>
<li><p>Add Confidential Containers support. [Carlos Camacho]</p>
<p>This patch includes the initial support for adding
Confidential Containers in the deployments.</p>
</li>
</ul>
</section>
<section id="fixes">
<h3>Fixes<a class="headerlink" href="#fixes" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Fix subnet path for /etc/cni/net.d/87-podman-bridge.conflist. [Carlos
Camacho]</p>
<p>This commit fixes the current path for the subnet in
/etc/cni/net.d/87-podman-bridge.conflist</p>
</li>
<li><p>Fix indentation. [Carlos Camacho]</p>
<p>This commit fixes an indentation
nit in the flannel config template.</p>
</li>
<li><p>Fix cri-o cbr0 interface file path. [Carlos Camacho]</p>
<p>This commit files the patch of the
/etc/cni/net.d/87-crio-bridge.conflist
with the current installed cri-o versions.</p>
</li>
<li><p>Removeduplicated key. [Carlos Camacho]</p>
<p>This commit fixes a duplicated key nit in the
libvirt driver role.</p>
</li>
<li><p>Allow unsecure Kubernetes repos. [Carlos Camacho]</p>
<p>This commit make sure the official K8s repos
are trusted.</p>
</li>
<li><p>Trust kubernetes repositories. [Carlos Camacho]</p>
<p>This commit makes sure the Kubernetes repositories are
trusted.</p>
</li>
<li><p>Make sure pod CIDR is consistent. [Carlos Camacho]</p>
<p>This commit fixes an inconsistency
in the POD CIDR parameter for Vanilla K8s.</p>
</li>
<li><p>Run EKS with the latest revision available. [Carlos Camacho]</p>
<p>This commit makes sure the installer gets
the latest revision available.</p>
</li>
<li><p>Update RKE to latest. [Carlos Camacho]</p>
<p>This commit upgrades the deployed RKE version
to the latest available.</p>
</li>
<li><p>Run EKS with the latest revision available. [Carlos Camacho]</p>
<p>This commit makes sure the installer gets
the latest revision available.</p>
</li>
<li><p>Make consistent the virtio image iso. [Carlos Camacho]</p>
<p>This commit makes sure the virtio image
is defined in a fdefault variable.</p>
</li>
<li><p>Upgrade CentOS stream image. [Carlos Camacho]</p>
<p>This commit updates the version
of the CentOS Stream 9 used in the
deployments.</p>
</li>
<li><p>Make sure default_capabilities is consistent. [Carlos Camacho]</p>
<p>This commit makes sure that the default capabilities map in
containers common is consistent across different versions
and distributions in the Hypervisors
.</p>
</li>
<li><p>Include wallaby for standalone TripleO. [Carlos Camacho]</p>
<p>This commit includes a fix in the version of
TripleO that is deployed. Also, other small
docs addition for future improvement.</p>
</li>
<li><p>Include nginx-unprivileged. [Carlos Camacho]</p>
<p>The sample app runs nginx-unprivileged.</p>
</li>
</ul>
</section>
</section>
<section id="v2-2-0-release-date-2023-01-19">
<h2>v2.2.0 - Release date: 2023-01-19<a class="headerlink" href="#v2-2-0-release-date-2023-01-19" title="Permalink to this heading"></a></h2>
<section id="id1">
<h3>Chore<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update periodic issue log. [Carlos Camacho]</p>
<p>This commit updates the issue to log the periodic CI results.</p>
</li>
<li><p>Include the OBS status check. [Carlos Camacho]</p>
<p>This commit includes a job check status
for the Open Build Service.</p>
</li>
<li><p>Add names for blocks. [Carlos Camacho]</p>
<p>This commit includes the naming for the missing
blocks, so the lint check passes.</p>
</li>
<li><p>Enhance install guidance. [Jeff Bailey]</p></li>
</ul>
</section>
<section id="id2">
<h3>CI<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Move whish to allow in tox. [Carlos Camacho]</p>
<p>This commit allows external commands in tox.</p>
</li>
<li><p>Add user and pasword for OBS. [Carlos Camacho]</p>
<p>This commit includes both the user and password
to check the packages build status.</p>
</li>
<li><p>Fix lint issues. [Carlos Camacho]</p>
<p>This commit fixes some old lint issues.</p>
</li>
<li><p>Allow local install. [Carlos Camacho]</p>
<p>This commit allows to run the GitLab
install script locally without GitLab.</p>
</li>
<li><p>Include a new label for OpenStack. [Carlos Camacho]</p>
<p>This commit includes a new label for testing
the deployments on top of OpenStack.</p>
</li>
<li><p>Do not update job URL if not uploading logs. [Carlos Camacho]</p>
<p>This commit prevents from updating the resulting
CI job URL if the logs are not uploaded to b2.</p>
</li>
<li><p>Allow skipping upload logs to b2. [Carlos Camacho]</p>
<p>This commit allows to use the nolog
label in the e2e jobs so the result is not uploaded
to b2. This is useful to reduce the load on the
CI CDN if there is no need to review the logs results.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Remove unsupported scenarios from CDK. [Carlos Camacho]</p>
<p>This commit removes the unssuported scenarios from CDK.
It does not allow to deploy without compute nodes.</p>
</li>
<li><p>Enable windows workers in the CI. [Carlos Camacho]</p>
<p>This commit enables Windows workers in
the k8s-1-1-1 deployment spec for the CI.</p>
</li>
<li><p>Use nginx unprivileged in the sampleapp. [Carlos Camacho]</p>
<p>This commit pulls from quay (quay.io/packit/nginx-unprivileged)
the Nginx image to run the sample app.</p>
<p>This will run NGINX as a non root, unprivileged user.
Notable differences with respect to the official
NGINX image include:</p>
<ul class="simple">
<li><p>The default NGINX listen port is now 8080 instead of 80.</p></li>
<li><p>The default NGINX user directive in /etc/nginx/nginx.conf</p></li>
</ul>
<p>has been removed.
- The default NGINX PID has been moved from /var/run/nginx.pid
to /tmp/nginx.pid. <a href="#id3"><span class="problematic" id="id4">*</span></a>Change _temp_path variables to /tmp/.</p>
</li>
<li><p>Remove unneeded steps. [Carlos Camacho]</p>
<p>This commit removes some unneeded steps in
the GitLab trigger. No extra install step
is required anymore.</p>
</li>
<li><p>Pull from quay the sampleapp. [Carlos Camacho]</p>
<p>This commit makes pulling from quay
the sampleapp.</p>
</li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Adjust styles for roles docs. [Carlos Camacho]</p>
<p>This commit fixes the style CSS
in the roles documentation.</p>
</li>
<li><p>Include docs from roles tasks files. [Carlos Camacho]</p>
<p>This commit includes the render of the docs
from the tasks files content directly.</p>
</li>
</ul>
</section>
<section id="id5">
<h3>Features<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 2.2.0. [Carlos Camacho]</p>
<p>This commit releases a new Kubeinit 2.2.0
version.</p>
</li>
<li><p>Move tasks files to support the OpenStack role. [Carlos Camacho]</p>
<p>This commit starts moving the libvirt specific tasks
to the specific libvirt role so newer drivers can
be integrated easily.</p>
</li>
<li><p>Include initial tasks for OS resources. [Carlos Camacho]</p>
<p>This commit includes the initial tasks used
for seeding the cluster’s resources deployed
on an OpenStack cloud.</p>
</li>
<li><p>Include OpenStack deployment driver. [Carlos Camacho]</p>
<p>This commit includes the folder to add a new deployment driver,
as for now deployments are only supported on KVM hosts.
The previous openstack role is renamed to be consumed as a user
application.</p>
</li>
<li><p>Move to Stream9. [Carlos Camacho]</p>
<p>This commit moves the pending references of
CentOS Stream 8 to 9.</p>
</li>
<li><p>Include TripleO standalone. [Carlos Camacho]</p>
<p>This commit includes a TripleO
standalone deployment in the
recently added Nova compute nodes.</p>
</li>
<li><p>Include dynamic extra roles. [Carlos Camacho]</p>
<p>This commit includes the ability to
run custom roles at the end of the
deployments. As an example we run a
custom openstack role.</p>
</li>
<li><p>Add extra_nodes_spec and service_nodes_spec. [Glenn Marcy]</p></li>
<li><p>Use flannel instead of NAT. [Carlos Camacho]</p>
<p>This commit moves the containerD network
from NAT to vxlan tunnels.</p>
</li>
<li><p>Run Kubelet in the Windows computes. [Carlos Camacho]</p>
<p>This commit executes kubelet in the Windows compute
nodes to add them to the control plane.</p>
<p>fix: use static nat</p>
<p>feat: use flannel in Windows computes</p>
<p>fix: include original scripts</p>
<p>feat: include flannel scripts</p>
<p>fix: adjust nets</p>
<p>fix: cleanup windows computes code</p>
</li>
<li><p>Join Windows computes to controlplane. [Carlos Camacho]</p>
<p>This commit joins the recently supported
Windows compute nodes to the cluster.</p>
</li>
<li><p>Allow to connect to Windows compute nodes. [Carlos Camacho]</p>
<p>This commit allows to connect to Windows compute nodes in
the deployment of a mixed OS Kubeinit deployment.</p>
</li>
<li><p>New Windows compute nodes. [Carlos Camacho]</p>
<p>This feature adds Windows workloads
to Kubeinit clusters.</p>
</li>
<li><p>Include datacenter DB model. [Carlos Camacho]</p>
<p>This commit includes the initial model
to include datacenter operation in the
web interface.</p>
</li>
</ul>
</section>
<section id="id6">
<h3>Fixes<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Mirror correctly images from docker.io to quay. [Carlos Camacho]</p>
<p>This commit fixes the references to container images hosted in
docker.io that might hit limit-rate issues.</p>
</li>
<li><p>Change docker.io by quay.io. [jlarriba]</p>
<p>This commit reduces the number of references
to docker.io to avoid the limit-rate issue.</p>
</li>
<li><p>Allow using CentOS stream 9 for the services deployments. [Carlos
Camacho]</p>
<p>This commit includes default variable to set up the
services container image.</p>
</li>
<li><p>Include the python tripleo client. [Carlos Camacho]</p>
<p>This commit includes again the python tripleo client
to deploy the standalone node</p>
</li>
<li><p>Remove hash from tripleo-repos install. [Carlos Camacho]</p>
<p>This commit fixes the usage of the date hash
in the tripleo-repos package.</p>
</li>
<li><p>Pin ansible-playbook-grapher. [Carlos Camacho]</p>
<p>This commit adds a pin to
ansible-playbook-grapher for
debugging.</p>
</li>
<li><p>Remove update from customize. [Carlos Camacho]</p>
<p>This commit removes the update shortcut from
the virt-customize command when deploying
Stream 9 images.</p>
</li>
<li><p>Remove ansible-playbook-grapher workaround. [Carlos Camacho]</p>
<p>This commit removes the workaround for
the issue building the docs site.</p>
</li>
<li><p>Remove ansible-playbook-grapher pinned version. [Carlos Camacho]</p>
<p>This commit removes the pin version of
ansible-playbook-grapher</p>
</li>
<li><p>Add disk full path deploying coreos as guest. [Juan Badia Payno]</p>
<p>Currently defining the VM on the deploy_coreos_guest task does
not add the path of the qcow2 disk. This makes the variable
kubeinit_libvirt_target_image_dir useless.</p>
<p>This patch add the path to the disk in the same way as is defined
on the deploy_centos_guest task.</p>
</li>
<li><p>Pin ansible-playbook-grapher. [Carlos Camacho]</p>
<p>This commit adds a pin to
ansible-playbook-grapher for
debugging.</p>
</li>
<li><p>Update tripleo-repos. [Carlos Camacho]</p>
<p>This comit updates the tripleo-repos package.</p>
</li>
<li><p>Check network hiccup when deploying OOO. [Carlos Camacho]</p>
<p>This commit makes sure the network
hiccup when installing TripleO
is checked to avoid failures.</p>
</li>
<li><p>Remove tc from the guest images. [Carlos Camacho]</p>
<p>This commit removes the ‘tc’ command
from the CentOS Stream guest images
as is not available anymore.</p>
</li>
<li><p>Invert quoting. [Carlos Camacho]</p>
<p>This commit fixes the quotes order to have expended correctly the hostname
variable.</p>
</li>
<li><p>Change distro_test to use docker. [Glenn Marcy]</p></li>
<li><p>Added missed okd refs. [Glenn Marcy]</p></li>
<li><p>Debug and clean kubelet. [Carlos Camacho]</p>
<p>This commit fixes the current nssm kubelet
service start.</p>
</li>
<li><p>Update config for centos to work with both 8-stream and 9-stream.
[Glenn Marcy]</p></li>
<li><p>Update containers repositories. [Carlos Camacho]</p>
<p>This commit fixes packages inconsistencies across
the different Linux distributions.</p>
</li>
<li><p>Check connectivity issue. [Carlos Camacho]</p>
<p>This commit fixes the connectivity issue blocking
the connection to the first controller.</p>
</li>
<li><p>Check OKD connectivity. [Carlos Camacho]</p>
<p>This commit fixes the apps demo role after deploying OKD.
It also fixes the debug message describing the pod information
by adding the sampleapp namespace.</p>
</li>
<li><p>Problem rendering CI logs. [Carlos Camacho]</p>
<p>This commit fixes the current CI issues,
when the nodes are initially deployed,
they dont have the aux folder to put the
CI logs but we try to remove them always,
this commit checks if the folder exists
before removing it.</p>
</li>
</ul>
</section>
<section id="refactor">
<h3>Refactor<a class="headerlink" href="#refactor" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Refresh the code paths used by the setup-playbook. [Glenn Marcy]</p></li>
<li><p>Openshift role refactoring. [Glenn Marcy]</p></li>
</ul>
</section>
</section>
<section id="v2-1-0-release-date-2022-04-12">
<h2>v2.1.0 - Release date: 2022-04-12<a class="headerlink" href="#v2-1-0-release-date-2022-04-12" title="Permalink to this heading"></a></h2>
<section id="id7">
<h3>Chore<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 2.1.0. [Carlos Camacho]</p>
<p>This commit releases a new version of KubeInit.</p>
</li>
</ul>
</section>
<section id="id8">
<h3>CI<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Do not run before or. [Carlos Camacho]</p>
<p>This commits includes a comment for
not executing any additional command
after running ansible-playbook.</p>
</li>
<li><p>Add hypervisor_hosts_spec. [Glenn Marcy]</p></li>
<li><p>Updates to submariner jobs. [Glenn Marcy]</p></li>
<li><p>Include cluster_type. [Carlos Camacho]</p>
<p>This commit includes the cluster type info, when returning
the labels to be executed.</p>
</li>
<li><p>Update ssh connectivity checks. [Glenn Marcy]</p></li>
<li><p>Update jobs names. [Carlos Camacho]</p>
<p>This commit makes some updates
in the jobs namings to make them
consistent.</p>
</li>
<li><p>Minor fixes. [Carlos Camacho]</p>
<p>This commit includes some checks for the B2
interaction.</p>
</li>
<li><p>Use folder path instead of filename. [Carlos Camacho]</p>
<p>This commit includes the required
file path when displaying what files
will be deleted from B2.</p>
</li>
<li><p>Print files to be deleted. [Carlos Camacho]</p>
<p>This commit includes the file name
to be deleted when is older than 10 days.</p>
</li>
<li><p>Remove int cast. [Carlos Camacho]</p>
<p>This commit removes a wrong cast
on the PR id, this variable might be int or
string.</p>
</li>
<li><p>Ignore removing periodic job files. [Carlos Camacho]</p>
<p>This commit ignores the removal of
old periodic job files, and the main index.
There should be only removed PR job files
older than 10 days.</p>
</li>
<li><p>Correct string interpolation. [Carlos Camacho]</p>
<p>This commit fixes an error
in the string interpolation.</p>
</li>
<li><p>Move logs upload from deployment time. [Carlos Camacho]</p>
<p>This commit splits the process of uploading the
CI logs file from the deployment time.</p>
</li>
<li><p>Fix pending path access. [Carlos Camacho]</p>
<p>This commit fixes the pending
steps to CI any CI change
in the project.</p>
</li>
<li><p>Include the job type in all PR triggers. [Carlos Camacho]</p>
<p>This commit includes the –job_type=pr
in all the script calls for testing PRs.</p>
</li>
<li><p>Include the new bash script trigger in the CI. [Carlos Camacho]</p>
<p>This commit includes the bridge between the Gitlab
CI trigger and the current CI scripts.</p>
</li>
<li><p>Clean older ci files. [Carlos Camacho]</p>
<p>This commit cleans up CI files older than 10 days.</p>
</li>
<li><p>Include the new url for ara links. [Carlos Camacho]</p>
<p>This commit includes the new CI URL
in the ARA pages.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Include the key type. [Carlos Camacho]</p>
<p>This commit includes the latest key types supported by
default.</p>
</li>
<li><p>Include b2sdk in the Github jobs status. [Carlos Camacho]</p>
<p>This commit includes the b2sdk dependency
for the GitHub status page render job.</p>
</li>
<li><p>Include initial ci trigger. [Carlos Camacho]</p>
<p>This commit adds an initial CI trigger
that allows to test CI changes in the PRs.</p>
</li>
<li><p>Refresh code to match latest prototype. [Glenn Marcy]</p></li>
<li><p>Include libselinux-python3 in selinux based hosts. [Carlos Camacho]</p>
<p>This commit includes the libselinux-python3 package in
the Fedora/CentOS/RHEL hosts.</p>
</li>
<li><p>Fix setup of minimum req hosts. [Glenn Marcy]</p></li>
<li><p>Testing. [Glenn Marcy]</p></li>
<li><p>Update distro_test to use setup playbook. [Glenn Marcy]</p></li>
</ul>
</section>
<section id="id9">
<h3>Documentation<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Include new group vars in the docs. [Carlos Camacho]</p>
<p>This commit includes the new group vars in the
documentation.</p>
</li>
<li><p>Include all vars. [Carlos Camacho]</p>
<p>This commit includes all group variables supported
to the docs automatically.</p>
</li>
<li><p>Include docs placeholder for secrets. [Carlos Camacho]</p>
<p>This commit includes the placeholder
to document the secrets.</p>
</li>
<li><p>Include Backblaze as a supporter. [Carlos Camacho]</p>
<p>This commit includes backblaze as a supporter.</p>
</li>
<li><p>Include comments from code in the docs. [Carlos Camacho]</p>
<p>This commit enables the usage of comments redenred
automatically in the docs.</p>
</li>
<li><p>Update ansible workflow diagram. [Carlos Camacho]</p>
<p>This commit adds anoter iteration to the
sequence diagram to describe how the deployments work.</p>
</li>
<li><p>Add architecture diagrams. [Carlos Camacho]</p>
<p>This commit adds the placeholders for the
architectural diagrams, still there is
needed to finish the diagrams content.</p>
</li>
<li><p>Add architectural design. [Carlos Camacho]</p>
<p>This commit includes the current main architectural
design for a Kubeinit deployment.</p>
</li>
</ul>
</section>
<section id="id10">
<h3>Features<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Include a FCOS version check. [Carlos Camacho]</p>
<p>This commit adds a FCOS version check
when deploying OKD. In this way a user
can know what should be the correct version.</p>
</li>
<li><p>Upgrade OKD to 4.10. [Carlos Camacho]</p>
<p>This commit upgrades the version that is deployed by
default too OKD 4.10</p>
</li>
<li><p>Use yaml instead of ini for inventory. [Carlos Camacho]</p>
<p>This commit moves the ini format of the inventory
to yaml, and includes its content in the documentation.</p>
</li>
<li><p>Include Backblaze b2 file uploads. [Carlos Camacho]</p>
<p>This commit includes the Backblaze b2 backend for the CI
logs results.</p>
</li>
<li><p>Include openwhisk and nodered placeholders. [Carlos Camacho]</p>
<p>This commit adds the initial code to include openwhisk and nodered.</p>
</li>
<li><p>Use setup playbook. [Glenn Marcy]</p></li>
</ul>
</section>
<section id="id11">
<h3>Fixes<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add missing group entry names. [Glenn Marcy]</p></li>
<li><p>Ci trigger issues. [Glenn Marcy]</p></li>
<li><p>Incorrect link to CI results. [Glenn Marcy]</p></li>
<li><p>Use Ubuntu LTS for all Ubuntu based distros. [Carlos Camacho]</p>
<p>This commit adds the latest LTS version to be used in all distros.</p>
</li>
</ul>
</section>
<section id="id12">
<h3>Refactor<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Cleanup and playbook refactoring. [Glenn Marcy]</p></li>
<li><p>More group_vars updates. [Glenn Marcy]</p></li>
<li><p>Variable name updates. [Glenn Marcy]</p></li>
<li><p>Merge setup into kubeinit. [Glenn Marcy]</p></li>
</ul>
</section>
</section>
<section id="v2-0-1-release-date-2021-12-24">
<h2>v2.0.1 - Release date: 2021-12-24<a class="headerlink" href="#v2-0-1-release-date-2021-12-24" title="Permalink to this heading"></a></h2>
<section id="id13">
<h3>Chore<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update okd to 4.9. [Carlos Camacho]</p>
<p>This commit upgrades OKD to the latest
version.</p>
</li>
<li><p>Include a sample application. [Carlos Camacho]</p>
<p>This commit includes a simple application so
we can test workloads are actually allocated
correctly across the deployments.</p>
</li>
<li><p>Adjust file sizing. [Carlos Camacho]</p>
<p>This commit adjusts the images based in the
docs styling proportions.</p>
</li>
<li><p>Include supporters test data. [Carlos Camacho]</p>
<p>This commit includes some mock data for potential
future supporters.</p>
</li>
</ul>
</section>
<section id="id14">
<h3>CI<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Initial support for gitlab merge requests. [Glenn Marcy]</p></li>
<li><p>Update to Ansible 5. [Carlos Camacho]</p>
<p>This commit tests Ansible 5 in the release
script.</p>
</li>
<li><p>Fix release scripts. [Carlos Camacho]</p>
<p>This commit force fail the CI scripts if an error is found.</p>
</li>
<li><p>Sort and filter jobs. [Carlos Camacho]</p>
<p>This commit sort and filter jobs in the CI
dashboard depending on the job type.</p>
</li>
<li><p>Use full URL in the job id. [Carlos Camacho]</p>
<p>This commit includes the whole URL when opening the
internal job.</p>
</li>
<li><p>Add internal job link in the CI dashboard. [Carlos Camacho]</p>
<p>This commit includes the internal job link
in the CI dashboard.</p>
</li>
<li><p>Include a waitfordebug label. [Carlos Camacho]</p>
<p>This commit includes a feature to stop the CI job
after the cluster is deployed for debugging purposes.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Remove extra CI cases. [Carlos Camacho]</p>
<p>This commit simplifies the CI scripts
by removing the case that triggers the
deployment from a container as this is already
tested in the GitHb workflows.</p>
</li>
<li><p>Cleanup install script. [Carlos Camacho]</p>
<p>This commit removes some unneeded packages
in the install script as they will
be installed from the deployment command.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Upgrade pip and protobuf. [Carlos Camacho]</p>
<p>There is an issue with protobuf and pip
upgrading the packages fixes it.</p>
</li>
<li><p>Upgrade pip and protobuf. [Carlos Camacho]</p>
<p>There is an issue with protobuf and pip
upgrading the packages fixes it.</p>
</li>
<li><p>Adjust CI scripts to support Debian hosts. [Carlos Camacho]</p>
<p>This commit allows to use Debian (11) in the CI.</p>
</li>
<li><p>Add information about the host OS. [Carlos Camacho]</p>
<p>This commit adds the distro information
in the CI jobs.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Fix periodic job page. [Carlos Camacho]</p>
<p>This commit fixes the template of the
periodic jobs.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Fix the periodic job page. [Carlos Camacho]</p>
<p>This commit includes the latest changes to
support more multicluster scenarios in the
periodic jobs page.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Change docs push condition. [Carlos Camacho]</p>
<p>After every push commit the docs build to the gh-pages branch.</p>
</li>
<li><p>Remove duplicated docs code. [Carlos Camacho]</p>
<p>This commit cleans some duplicatino code
for rendering the documentation.</p>
</li>
<li><p>Adjust latest CI scripts. [Carlos Camacho]</p>
<p>This commit runs the e2e CI to
make sure it works after the latest
major refactor.</p>
</li>
<li><p>Print deployment command. [Carlos Camacho]</p>
<p>This commit prints the
command that will deploy the CI Job.</p>
</li>
<li><p>Remove cluster after each deployment. [Carlos Camacho]</p>
<p>This commit makes sure there are
no leftovers after deploying each
cluster.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Remove virtual services definition. [Carlos Camacho]</p>
<p>This commit removes from the CI all the
references to the virtual machine
hosting the deployment services as they are
now containerized in the bastion host.</p>
</li>
</ul>
</section>
<section id="id15">
<h3>Documentation<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Forward <cite>README.md</cite> changes to <cite>usage.rst</cite> [R. Mathieu Landvreugd]</p>
<p>Brings the changes from #568 to the rest of the documentation</p>
</li>
<li><p>Fix instructions. [R. Mathieu Landvreugd]</p>
<p>Fix the instructions, so copy-paste is possible.
write out the command options</p>
</li>
<li><p>Refator docs. [Carlos Camacho]</p>
<p>This commit refactors the docs
to have a more streamlined view
of the content we will like to describe.</p>
</li>
<li><p>Include extra symbols. [Carlos Camacho]</p>
<p>This commit includes the extra symbols available in
the rst pages.</p>
</li>
<li><p>Include GitHub docs in the code. [Carlos Camacho]</p>
<p>This commit includes the GH link in the
docs pages.</p>
</li>
<li><p>Include unicode assets. [Carlos Camacho]</p>
<p>This commit includes some unicode helpers
to add symbols to the docs when they are needed.</p>
</li>
<li><p>Sorting titles. [Carlos Camacho]</p>
<p>This commit sorts the titles consistently.</p>
</li>
<li><p>Organize better the usage documentation. [Carlos Camacho]</p>
<p>This commit sorts better the current usage documentation.</p>
</li>
<li><p>Include steps to reach the services pod. [Carlos Camacho]</p>
<p>This commit includes the documentation
for reaching both internal and external
resources of the cluster.</p>
</li>
<li><p>Include docs for the services pod and spec. [Carlos Camacho]</p>
<p>This commit adds documentation about the services pod
and the Kubeinit spec.</p>
</li>
<li><p>Add clarification note about mixed OS. [Carlos Camacho]</p>
<p>This commit adds a note about the support
of having mixed OS in the cluster hosts.</p>
</li>
<li><p>Add gcp as a supporter. [Carlos Camacho]</p>
<p>This commit adds GCP as a supporter.</p>
</li>
<li><p>Include link to github. [Carlos Camacho]</p>
<p>This commit adds the link to the
main project’s repo.</p>
</li>
<li><p>Update correct domain. [Carlos Camacho]</p>
<p>All the domains were wrong, this commit
fixes all the referencies.</p>
</li>
<li><p>Include notice. [Carlos Camacho]</p>
<p>This commit includes a disclaimer notice about
the potential damage the automation can cause
to production environments if not taking percautions.</p>
</li>
<li><p>Reduce image size. [Carlos Camacho]</p>
<p>This commit fixes the logos height
in the sphinx theme.</p>
</li>
<li><p>Fix styles and rst for supporters. [Carlos Camacho]</p>
<p>This commit makes the style changes to
show properly additional supporters.</p>
</li>
<li><p>Include Docker Hub info. [Carlos Camacho]</p>
<p>This commit updated Docker’s decription.</p>
</li>
<li><p>Fix supporters styles. [Carlos Camacho]</p>
<p>This commit fixes some styling issues
after having all the required images
and content.</p>
</li>
<li><p>Fix images path. [Carlos Camacho]</p>
<p>This commit fixes the paths for the
supporters images.</p>
</li>
<li><p>Add supporters page. [Carlos Camacho]</p>
<p>This commit includes a docs page
to thank the supporters of this
project.</p>
</li>
</ul>
</section>
<section id="id16">
<h3>Features<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 2.0.1. [Carlos Camacho]</p>
<p>This commit releases the latest changes
from the main development branch.</p>
</li>
<li><p>Add ansible setup for kubeinit. [Glenn Marcy]</p>
<p>This commit adds a new setup folder that contains an inventory
and playbook that can be used to initialize a new ansible env
where kubeinit has been setup and is ready for immediate use
for deployments, testing, development, etc.</p>
</li>
<li><p>Include submariner deployments. [Carlos Camacho]</p>
<p>This commit enables the submariner
deployment in a multicluster environment.</p>
</li>
<li><p>Added variable for selecting the ssh keytype. [Glenn Marcy]</p></li>
<li><p>Update OKD version. [Carlos Camacho]</p>
<p>This commit updates the OKD version
that is deployed by default.</p>
</li>
</ul>
</section>
<section id="id17">
<h3>Fixes<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<ul>
<li><p>External ingress fedora support. [Glenn Marcy]</p></li>
<li><p>Fixes to Dockerfile and centos prereqs. [Glenn Marcy]</p>
<p>This commit updates the Dockerfile to
- Set the permission of the /root/.ssh folder to 0700
- Align the .ssh/config contents with the ansible ssh common args
Also add jq to the package prereqs for Centos family hosts</p>
</li>
<li><p>Handle when firewalld is not active. [Glenn Marcy]</p></li>
<li><p>Add a blocking timeout to get results. [Carlos Camacho]</p>
<p>This commit includes a timeout to fetch the
CI results page.</p>
</li>
<li><p>Move to OVNKubernetes. [Carlos Camacho]</p>
<p>This commit moves the default CNI
cluster network provider to
OVNKubernetes as it will be the
eventual default.</p>
</li>
<li><p>Adjust date and job id. [Carlos Camacho]</p>
<p>This commit fixes the CI job index with the
correct date and job ID per PR job.</p>
</li>
<li><p>Allow having kubectl in cdk service pod and enable sampleapp. [Carlos
Camacho]</p>
<p>This commit makes sure kubectl is enabled in the services pod, and
the sample app is deployed correctly in CDK.</p>
</li>
<li><p>Remove virt-top from Debian 11 and add testing repos. [Carlos Camacho]</p>
<p>In Debian 11 is not yet published the list of OVN
packages to deploy the cluster.
This commit removes virt-top as is not available anymore,
and enables the testing repos.</p>
</li>
<li><p>Include the correct protobuf version. [Carlos Camacho]</p>
<p>This commit makes sure we have protobuf&gt;=3.12.0
installed before pushing the CI files.</p>
</li>
<li><p>Better messages when not asked to stop. [Glenn Marcy]</p></li>
<li><p>Reorder commands under multi-cluster deployment. [Glenn Marcy]</p></li>
<li><p>Update data center definition. [Glenn Marcy]</p>
<p>This commit updates the inventory file to
support multicluster deployments.</p>
</li>
<li><p>Include the multicluster deployment. [Carlos Camacho]</p>
<p>This commit includes the multicluster deployment,
before we had to run the deployment command
multiple times.</p>
</li>
<li><p>Use full path when calling OVN/OVN commands. [Carlos Camacho]</p>
<p>The first time we deploy in new baremetal hosts
after installing the required packages to install
the SDN the path is not updated in runtime, this
makes the deployment to fail the first time.</p>
</li>
<li><p>Update services role reference to create_network location. [Glenn
Marcy]</p></li>
</ul>
</section>
<section id="id18">
<h3>Refactor<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Cleanup several areas before gitlab-ci changes. [Glenn Marcy]</p>
<p>This commit includes the following changes:
- Change parameter vars passed to the create_managed_service</p>
<blockquote>
<div><p>and gather_host_facts tasks to begin with _param_ prefix.</p>
</div></blockquote>
<ul class="simple">
<li><p>Distribute the juju client key to all cluster nodes for
cdk deployments.</p></li>
<li><p>Separate kubeinit cluster facts from the facts used for
controlling the kubeinit playbook flow.</p></li>
<li><p>Check for existing firewalld rules so that we only make
changes when necessary. If we do reload firewalld then
also reload podman networks to rebuild iptable rules.</p></li>
<li><p>Store public key for each host in hostvars.</p></li>
<li><p>Update setup tasks to follow these same conventions.</p></li>
</ul>
</li>
<li><p>Support multiple clusters per inventory. [Glenn Marcy]</p>
<p>This commit adds support for multiple clusters deployed from the
same inventory.  Most changes are to names of resources that need
to be distinct so that clusters can co-exist.</p>
</li>
<li><p>Documentation graph improvements. [Glenn Marcy]</p></li>
<li><p>Consolidate all distro inventories. [Glenn Marcy]</p>
<ul>
<li><p>Remove distro-specific inventory files and playbooks.  All
inventory is now generated dynamically from a much smaller
common static inventory, ./kubeinit/inventory, and the new
kubeinit_spec variable that is passed on the command line.
The syntax for that value is:</p>
<blockquote>
<div><p>&lt;distro&gt;-&lt;driver&gt;-&lt;controllers&gt;-&lt;computes&gt;-&lt;hypervisors&gt;</p>
</div></blockquote>
</li>
<li><p>Remove instructions for adding hypervisor host entries to the
/etc/hosts file of machine where the ansible playbook is run.
It is sufficient to just add aliases for any hypervisor hosts
in the inventory to ~/.ssh/config entries.</p></li>
<li><p>Update examples in documentation to match new CLI syntax.</p></li>
<li><p>Test paths for okd.rke/submariner deployments have been removed
temporarily as we work on the new support for multiple deployed
clusters on the same hypervisor hosts.</p></li>
<li><p>Simplify inventory network configuration to generate any needed
network addresses from the cluster network dynamically.  Only
the CIDR for the cluster network is required, which still has
the same 10.0.0.0/24 default.</p></li>
<li><p>Change EKS to lookup current stable kubernetes release from the
distribution website.</p></li>
<li><p>Update OKD release to 4.8 and FCOS/RHCOS releases from 33/4.7 to
34/4.8 respectively.</p></li>
</ul>
</li>
<li><p>Move tasks from post-deployment to deploy-cluster. [Glenn Marcy]</p></li>
<li><p>Replace with_items with loop and other updates. [Glenn Marcy]</p></li>
</ul>
</section>
</section>
<section id="v2-0-0-release-date-2021-09-30">
<h2>v2.0.0 - Release date: 2021-09-30<a class="headerlink" href="#v2-0-0-release-date-2021-09-30" title="Permalink to this heading"></a></h2>
<section id="id19">
<h3>Chore<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update OKD to latest 4.7. [Carlos Camacho]</p>
<p>This commit updates the OKD version
to the current latest.</p>
</li>
<li><p>Use –no-cache-dir flag to pip in dockerfiles, to save space. [Pratik
Raj]</p>
<p>Using “–no-cache-dir” flag in pip install ,make sure dowloaded packages
by pip don’t cached on system . This is a best practise which make sure
to fetch ftom repo instead of using local cached one . Further , in case
of Docker Containers , by restricing caching , we can reduce image size.
In term of stats , it depends upon the number of python packages
multiplied by their respective size . e.g for heavy packages with a lot
of dependencies it reduce a lot by don’t caching pip packages.</p>
<p>Further , more detail information can be found at</p>
<p><a class="reference external" href="https://medium.com/sciforce/strategies-of-docker-images-optimization-2ca9cc5719b6">https://medium.com/sciforce/strategies-of-docker-images-optimization-2ca9cc5719b6</a></p>
</li>
<li><p>Update copyright message. [Carlos Camacho]</p>
<p>This commit makes consistent the copy
message.</p>
</li>
<li><p>Remove extra code. [Carlos Camacho]</p>
<p>This commit removes extra code that is already
applied in the CentOS guest images automatically.</p>
</li>
<li><p>Organize files. [Carlos Camacho]</p>
<p>This commit moves the configure common tasks files
to be consistent with all the distros.</p>
</li>
<li><p>Add verbose to the CI logs. [Carlos Camacho]</p>
<p>This commit adds more verbosing to the CI outputs.</p>
</li>
<li><p>Fix internal strings. [Carlos Camacho]</p>
<p>This commit fixes some internal CI links and content.</p>
</li>
<li><p>Include disable disruptive. [Carlos Camacho]</p>
<p>This commit enables the disruptive mode
in the subctl verify on demand.</p>
</li>
<li><p>Reduce timeouts. [Carlos Camacho]</p>
<p>This commit reduces the timeouts when testing submariner.</p>
</li>
</ul>
</section>
<section id="id20">
<h3>CI<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Call the get issue method. [Carlos Camacho]</p>
<p>This commit calls correctly
the get issue method when
recording the job result.</p>
</li>
<li><p>Include repo name in periodic jobs. [Carlos Camacho]</p>
<p>This commit includes the repo name in the periodic jobs
build.</p>
</li>
<li><p>Add comment per job execution. [Carlos Camacho]</p>
<p>On every force-push we lose the CI
information from previous executions
this commit includes a comment once each
job finish.</p>
</li>
<li><p>Add var to ignore validation checks. [Glenn Marcy]</p></li>
<li><p>Make jobs run periodically. [Carlos Camacho]</p>
<p>This commit allows to run the GitHub
jobs periodically to have a better
visibility if something gets updated.</p>
</li>
<li><p>Remove periodic job check. [Carlos Camacho]</p>
<p>This commit removes the job check in the
periodic pipeline so we test all the
jobs at once.</p>
</li>
<li><p>Move branch check inside PR. [Carlos Camacho]</p>
<p>This commit moves the PR branch check in the PR
conditional.</p>
</li>
<li><p>Make sure ansible is 3.4.0. [Carlos Camacho]</p>
<p>This is the latest version we support
before moving forward to Ansible 4.</p>
</li>
<li><p>Minor improvements. [Carlos Camacho]</p>
<p>This commit includes some minor improvements in
the CI workflow.</p>
</li>
<li><p>Fail when the playbooks fails. [Carlos Camacho]</p>
<p>This commit makes the CI job to fail
when the Ansible playbook fails.</p>
</li>
<li><p>Reduce scripts duplication. [Carlos Camacho]</p>
<p>This commit simplifies the
scripts checking the ansible
semantics that is enforced.</p>
</li>
<li><p>Enforce the executable usage in shell. [Carlos Camacho]</p>
<p>This commit enforces the usage of the
bash interpreter when calling the
shell module.</p>
</li>
<li><p>Fix job id index. [Carlos Camacho]</p>
<p>This commit fixes a nit in the job id rendering,</p>
</li>
<li><p>Do not update the .md job page. [Carlos Camacho]</p>
<p>This commit revert adding the job dates in the
GItHub job page, this is because then after
every job execution the page will be re-rendered
creating continous pull requests.</p>
</li>
<li><p>Include date in jobs. [Carlos Camacho]</p>
<p>This commit includes the date
information in the job status pages.</p>
</li>
<li><p>Run 4 jobs instead of 3. [Carlos Camacho]</p>
<p>This commit increases the numbers
of running job from 3 to 4.</p>
</li>
<li><p>Add extra information to the CI job page. [Carlos Camacho]</p>
<p>This commit adds additional
information to the deployment
job page.</p>
</li>
<li><p>Record relevant files. [Carlos Camacho]</p>
<p>This commit allows to record relevant
files in the CI job execution.</p>
</li>
<li><p>Upload raw logs. [Carlos Camacho]</p>
<p>This commit uploads the raw logs
for the jobs.</p>
</li>
<li><p>Allow replace empty url. [Carlos Camacho]</p>
<p>This commit allow replacing empty urls
for the main CI jobs page.</p>
</li>
<li><p>Allow empty ref in main link. [Carlos Camacho]</p>
<p>This commit enables an empty href
replacement with the main jobs URL.</p>
</li>
<li><p>Fix text replacements. [Carlos Camacho]</p>
<p>This commit updates an agressive
regex replacement.</p>
</li>
<li><p>Move to KUBEINIT_ANSIBLE_VERBOSITY. [Carlos Camacho]</p>
<p>This commit uses KUBEINIT_ANSIBLE_VERBOSITY as
the variable to determine the verbose level in
kubeinit when running the CI scripts.</p>
</li>
<li><p>Log to server IP. [Carlos Camacho]</p>
<p>This commit makes ara to log in
the server IP instead of localhost.</p>
</li>
<li><p>Fix regex. [Carlos Camacho]</p>
<p>This commit fixes a regex error in the job
result about page.</p>
</li>
<li><p>Reorg CI files. [Carlos Camacho]</p>
<p>This commit organizes better
the CI scripts and adds an
option to test a set of random
distros from the allowed scenarios.</p>
</li>
<li><p>Run ARA from a podman container. [Carlos Camacho]</p>
<p>Currently ARA runs in a sqlite DB,
due to the size of the playbooks
we are starting to have locks blocking
rendering the results.</p>
</li>
<li><p>Minor fixes. [Carlos Camacho]</p>
<p>This commit adds some minor
improvements to the CI.</p>
</li>
<li><p>Balance CI cluster load. [Carlos Camacho]</p>
<p>This commit balances the nodes
in the 3 nodes cluster so it
have enough resources.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Allow 0 computes deployment. [Carlos Camacho]</p>
<p>This commit adjusts the regex to allow
0 compute deployments.</p>
</li>
<li><p>Allow run specific labels in periodic jobs. [Carlos Camacho]</p>
<p>This commit allows to pass jobs labels to the periodic jobs.</p>
</li>
<li><p>Centralize CI files. [Carlos Camacho]</p>
<p>This commit centralices the
CI files into the ci folder.</p>
</li>
<li><p>Print the inventory to be deployed. [Carlos Camacho]</p>
<p>This commit prints the inventory file before deploying in CI.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Reduce the amount of jobs. [Carlos Camacho]</p>
<p>This commit reduces the amount of
jobs available in the periodic table.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Allow splitting the period job per distro. [Carlos Camacho]</p>
<p>This commit allows to split the periodic job per distro.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Add label info to periodic jobs. [Carlos Camacho]</p>
<p>This commit adds some context information
for the labels used in the CI for checking
PRs.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Make consistent the CI jobs list. [Carlos Camacho]</p>
<p>This commit aligns the periodic CI
jobs with the jobs supported for testing
the PRs.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Minor changes. [Carlos Camacho]</p>
<p>This commit includes some minor cosmetic
changes to the periodic jobs status page.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Fix lines spaces. [Carlos Camacho]</p>
<p>This commit fixes the periodic job status page newlines.</p>
</li>
<li><p>Remove extra lines and update commit message. [Carlos Camacho]</p>
<p>This commit updates the commit title
and removes some unneeded extra lines
in the jinja template.</p>
</li>
<li><p>Re-build periodic_jobs.md. [kubeinit-bot]</p></li>
<li><p>Include container services in CI. [Carlos Camacho]</p>
<p>This commit enables the containerized services
deployment in the CI.</p>
</li>
<li><p>Do not stop if tag does not match. [Carlos Camacho]</p>
<p>This commit enables to keep executing
the periodic job when a label does not
match the validation regexp.</p>
</li>
<li><p>Fix nit. [Carlos Camacho]</p>
<p>This commit fixes a nit in the periodic job
page.</p>
</li>
<li><p>Build table from dictionary. [Carlos Camacho]</p>
<p>This commit builds the CI periodic jobs
table from a dictionary.</p>
</li>
<li><p>Adjust CI jobs names. [Carlos Camacho]</p>
<p>This commit adjust the result
periodic job name to match the
CDN content.</p>
</li>
<li><p>Adjust the periodic jobs output data. [Carlos Camacho]</p>
<p>This commit makes consistent the naming for both
the PR and Periodic jobs.</p>
</li>
<li><p>Refactor the CI code. [Carlos Camacho]</p>
<p>This PR removes duplicated code
and improves the CI use cases
allowing to integrate multiple
workers to the CI nodes pool.</p>
</li>
<li><p>Adjust periodic page results. [Carlos Camacho]</p>
<p>This commit adjusts the periodic
job page results, also updates
the worker ci script.</p>
</li>
<li><p>Adjust packages for CentOS. [Carlos Camacho]</p>
<p>The CI worker was using Fedora,
now we also have CentOS 8.</p>
<p>Also firewalld is enabled where is
installed Fedora/CentOS/RHEL.</p>
</li>
<li><p>Move GA check to run as root. [Carlos Camacho]</p>
<p>This commit changes the GitHub actions
deployment to run as root. This allows
to remove the added become tags in the
collection.</p>
</li>
<li><p>Run from a container as root. [Carlos Camacho]</p>
<p>This commit makes explicit
running the automation as root
from a container.</p>
</li>
<li><p>Include the distro deploy badge in the readme. [Carlos Camacho]</p>
<p>This commit includes the distro_test job result
after every push in the main project’s readme.</p>
</li>
<li><p>Use hostname IP instead of localhost. [Carlos Camacho]</p>
<p>This commit updates the CI install script
to use the host IP instead of localhost
to reference nyctea.</p>
</li>
<li><p>Run deployment from container. [Carlos Camacho]</p>
<p>This commit adds running the playbook from
a container so we test the build and reqs.
install.</p>
</li>
</ul>
</section>
<section id="id21">
<h3>Documentation<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update clean tasks. [Carlos Camacho]</p>
<p>This commit updates the way to clean up the hypervisors.</p>
</li>
<li><p>Include building and installing the collection. [Carlos Camacho]</p>
<p>This commit includes information about how to build and
install the collection.</p>
</li>
<li><p>Make sure width is complete. [Carlos Camacho]</p>
<p>This commit makes the width of the
page used completely.</p>
</li>
<li><p>Use always png on plantuml. [Carlos Camacho]</p>
<p>PNG files always look better on
web, so let’s use that extension by
default.</p>
</li>
<li><p>Include end-to-end workflow. [Carlos Camacho]</p>
<p>This commit adds information about
how the CI runs, and includes a
mechanism to autorender plantuml
diagrams directly.</p>
</li>
<li><p>Include a brief usage information. [Carlos Camacho]</p>
<p>This commit includes a brief usage information once the
deployment is finished.</p>
</li>
<li><p>Include all_nodes and fix the task path for cleaning. [Carlos Camacho]</p>
<p>This commit fixes the documentation about how to clean the
environment.</p>
</li>
</ul>
</section>
<section id="id22">
<h3>Features<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 2.0.0. [Carlos Camacho]</p>
<p>This commit releases a new version of
Kubeinit including a major refactor and
architectural changes.</p>
<p>Thanks to all Kubeinit’s contributors!!!</p>
</li>
<li><p>Convert to FQCN. [Carlos Camacho]</p>
<p>This commit convert all the roles calls
to their corresponding fully qualified collection name.</p>
</li>
<li><p>Cleanup before new function for bastion and ovn-central hosts. [Glenn
Marcy]</p>
<p>This commit cleans up a number of areas to provide consistency and uniformity
across all the roles where some roles used different conventions than others
for the same patterns.</p>
</li>
<li><p>Execute GA tests until validations complete. [Carlos Camacho]</p>
<p>This commit allows the GA test job to be executed
until the validations playbook is executed.</p>
</li>
<li><p>Reuse ovn job as multinode. [Carlos Camacho]</p>
<p>This commit uses the old OVN job to be
multinode.</p>
</li>
<li><p>Additional cleanup and minor changes. [Glenn Marcy]</p>
<p>This commit delivers incremental updates toward the next release.
Changes include:
- Improve the support for –start-at-task and added kubeinit_stop_after_task var.
- Rename playbook tasks for easier use with start from and stop after tasks.
- Use include_role and include_tasks consistently within and between roles.
- Update centos tasks to work with firewalld enabled.
- Move configure common into deploy guests.
- Change create cloud user to be optional.
- Use platform defaults for ipv6 instead of disabling it.</p>
</li>
<li><p>Rename files for consistency. [Glenn Marcy]</p></li>
<li><p>Include a distro deployment in GA. [Carlos Camacho]</p>
<p>This commit try to run a partial distro eployment
in github actions.</p>
</li>
<li><p>Cleanup use of convenience facts. [Glenn Marcy]</p>
<p>This commit defines some new convenience facts for performing
some of the more common tests in when expressions.  Other changes
include simplifying the collection of hostvars and facts to be
within the same (main) play in the playbook to eventually enable
the ability to run –start-from-task to skip work in the main
play that does not need to be repeated.</p>
</li>
<li><p>Move ovn tasks from prepare to libvirt. [Glenn Marcy]</p></li>
<li><p>Rename OVN 10_cleanup.yml to 10_ovn_cleanup.yml. [Glenn Marcy]</p></li>
<li><p>Add minimal runtime.yml for the Ansible collection. [Carlos Camacho]</p>
<p>This commit adds a new requirement to publish in Ansible Galaxy.</p>
<p>This commit also fixes the resolv files for the failing distros.</p>
</li>
<li><p>Include KID peridoc jobs. [Carlos Camacho]</p>
<p>This commit includes the KID periodic
jobs.</p>
</li>
<li><p>Include initial KID automation. [Carlos Camacho]</p>
<p>This commit includes the first milestone
to create a truly FOSS k8s distribution.</p>
</li>
<li><p>Reorganize the prepare_services tasks of each distro into
kubeinit_services role. [Glenn Marcy]</p>
<p>This commit (and the previous two containing simple deletes and renames) combines all of
the prepare_services tasks across all the distros into a common path located in the
kubeinit_services role.  Other changes include moving the OCP release level from 4.7.1
to 4.7.18 and updating the RHCOS release from 4.6.1 to 4.7.13 to match.</p>
</li>
<li><p>Combine all prepare_services.yml into kubeinit_services role. [Glenn
Marcy]</p></li>
<li><p>Unify name of configure_service_nodes.yml for all distros. [Glenn
Marcy]</p></li>
<li><p>Add dnsmasq role to provide dhcp service. [Glenn Marcy]</p>
<p>This commit adds support for a new kubeinit_dnsmasq role which will
provide dhcp service for the cluster provisioning network.  Other
changes include:
- Added environment vars to set OCP params
- Moved services containers startup to common path
- Updated flow of coreos downloads into okd paths
- Updated OKD version to the latest 4.7 release</p>
</li>
<li><p>Cleanup templates. [Carlos Camacho]</p>
<p>This commit adds some missing spaces
in variables that breaks lint and
splits the CDK bootstrap command
for better debugging. It also
adds the hostname DHCP option to the
guests logical port.</p>
</li>
<li><p>Bump collections versions. [Carlos Camacho]</p>
<p>This commit updates the collections
versions used in the project.</p>
</li>
<li><p>Add support for service node in container to okd. [Glenn Marcy]</p>
<p>This commit allows for the service node in the inventory to be
assigned type=container and a podman pod and containers will
replace the guest vm for the service node.  Numerous other
fixes and reorgs as well, including the creation of new tasks
to consolidate the creation of credentials used to secure
services.</p>
</li>
<li><p>Include node names validation and docker login from variable and file.
[Carlos Camacho]</p>
<p>This commit enables a validation to verify nodes have the correct name,
also we allow to login to the docker registry using the password in a
file or a variable.</p>
</li>
<li><p>Improve the naming convention for the cluster nodes. [Carlos Camacho]</p>
<p>Based in this discussion[1] the default naming convention
for the nodes is changed to allow a more inclusive language.</p>
<p>[1]: <a class="reference external" href="https://github.com/kubernetes/community/tree/master/wg-naming/recommendations">https://github.com/kubernetes/community/tree/master/wg-naming/recommendations</a></p>
</li>
<li><p>Move OVN setup to the prepare role. [Carlos Camacho]</p>
<p>This commit moves the OVN tasks to the
prepare role, this is because the OVN
setup is not dependant on libvirt.</p>
</li>
<li><p>Cleanup apache and registry roles. [Glenn Marcy]</p>
<p>This commit separates the apache service from the html data
the service provides access to.  This will be stored in a new
html data podman volume.  All of the distro specific registry
tasks have be moved into their respective distro roles and the
remaining tasks have been collapsed back into a single main.yml
file.  Several of the files included but not used for future
function have been removed to avoid upkeep and confusion.</p>
</li>
<li><p>Separate services deployment from cluster deployment. [Glenn Marcy]</p>
<p>This commit moves the services deployment of each distro from
the distro main into a new prepare_services file.  Some minor
cleanup items as well.</p>
</li>
<li><p>New CI job based on containers. [Carlos Camacho]</p>
<p>This commit pushes a new job based on launching
the deployment command from a container.</p>
</li>
<li><p>Push CI logs to CDN. [Carlos Camacho]</p>
<p>This commit improves the CI
logging by uploading the results
to a CDN.</p>
</li>
<li><p>Include upload logs to CDN. [Carlos Camacho]</p>
<p>This commit adds the hability to
upload the CI logs to GC instead
of pushing them to GH.</p>
</li>
<li><p>Normalize inventory groups and cleanup. [Glenn Marcy]</p>
<p>This commit remove the distro prefix from the group names in
the inventory files so that the names are consistent and are
common across distros.  Additional cleanup to refactor tasks
like systemd user services to be shared across service roles,
moving certificate info to common config and moving tasks to
check that nodes are up into the tasks which create them.</p>
</li>
<li><p>Allow two machines per OVN deployment. [Carlos Camacho]</p>
<p>This commit changes the default nyctea host by
nyteaa (note the extra a) which allows to deploy
the OVN scenario in a different set of nodes.</p>
</li>
<li><p>Include a multi HV deployment. [Carlos Camacho]</p>
<p>This commits adds a multi HV deployment
in the CI jobs.</p>
</li>
<li><p>Improve the task flow on multi-hypervisor clusters. [Glenn Marcy]</p>
<p>This commit reorganizes many of the hypervisor tasks so that
they can be run in parallel on multiple hypervisors.  Other
minor cleanup preparing for future deliverables.</p>
</li>
<li><p>Continue with minor cleanup. [Glenn Marcy]</p>
<p>This commit includes mostly minor cleanup for consistency, highlights
are splitting up some of the prepare to be called from different plays
in the playbook and improvements to the nexus role to get it closer to
and operational state.</p>
</li>
<li><p>Add new services role, cleanup several areas of the code. [Glenn
Marcy]</p>
<p>This commit adds a new kubeinit_services role which will eventually be used
to replace the current services virtual machine with podman services pods.
Other changes include:
- removal of all ansible tags left over from early prototyping
- removal of all external interface code, which has been replaced by a new</p>
<blockquote>
<div><p>create-external-ingress script</p>
</div></blockquote>
<ul class="simple">
<li><p>consolidation of all podman login checks into a new prepare_podman step</p></li>
<li><p>other smaller miscellaneous changes</p></li>
</ul>
</li>
<li><p>Move more common facts to prepare and use them in roles. [Glenn Marcy]</p>
<p>This commit add more consolidation of facts into the prepare role
so that the other roles can depend on that information being available
to them later.</p>
</li>
<li><p>Sleep for x seconds before the subctl verify. [Carlos Camacho]</p>
<p>The CI triggers the subctl verify command
just after the cluster is deployed. Let’s give
some time to the cluster to converge prior the test.</p>
</li>
<li><p>Initial prepare role reorg and cleanup. [Glenn Marcy]</p>
<p>This commit starts to pull the initial prepare phase tasks
together to provide more consistency in how facts are defined
and made available for the roles that depend on those facts.</p>
</li>
<li><p>Change all distros to share the same playbook. [Glenn Marcy]</p>
<p>This commit replaces all current distro specific playbooks
with symbolic links to a new common playbook.  Further
refactoring is expected as we pivot to a common flow that
they all would share, with minor changes as needed per
distro, rather than the current case where each distro
has it’s only copy of the entire deployment which is for
the most part the same for all distros.  Also fixed a
broken symlink for the eks host group vars.</p>
</li>
<li><p>Reorganize and cleanup service nodes. [Glenn Marcy]</p>
<p>This commit makes some initial changes in preparation for future
changes to how services are handled.  Now that services are all in
containers the process of moving those containers from a service
virtual machine into container pods can begin.</p>
</li>
<li><p>Allow deploying released versions. [Carlos Camacho]</p>
<p>This commit allows to deploy submariner released versions.</p>
</li>
<li><p>Make dynamic the docker version in rke. [Carlos Camacho]</p>
<p>This commit allows to pin an specific docker version
in the RKE cluster.</p>
</li>
<li><p>Bump k8s version to 1.20. [Carlos Camacho]</p>
<p>This commit updates k8s from 1.18 to 1.20
and configures extra variables for choosing
the distro and the k8s version to be deployed.</p>
</li>
<li><p>Update OKD to latest 4.6. [Carlos Camacho]</p>
<p>This commit updates OKD to the latest version prior 4.7</p>
</li>
<li><p>Include  submariner in the periodic jobs. [Carlos Camacho]</p>
<p>This commit includes submariner in the periodic jobs.</p>
</li>
<li><p>Include a prepare role. [Carlos Camacho]</p>
<p>This commit includes a prepare role
agnostic from the distribution or the
infrastructure provider to be deployed.</p>
</li>
<li><p>Configure nexus. [Carlos Camacho]</p>
<p>This commit configures nexus to replace the container registry.</p>
</li>
<li><p>Include nexus container registry. [Carlos Camacho]</p>
<p>This commit adds the skeleton templates
to deploy nexus.</p>
</li>
<li><p>Run haproxy service from a container. [Glenn Marcy]</p>
<p>This commit runs the haproxy server from a container instead of installing
it into the service node virtual machine.</p>
</li>
<li><p>Run local registry container with podman instead of docker. [Glenn
Marcy]</p>
<p>This commit changes the local registry service from running in a
container with docker to using podman to run the container.</p>
</li>
<li><p>Run bind9 DNS service from a container. [Glenn Marcy]</p>
<p>This commit runs the bind9 server from a container instead of installing
it into the service node virtual machine.</p>
</li>
<li><p>Run apache http service from a container. [Glenn Marcy]</p>
<p>This commit runs the http server from a container instead of installing
it into the service node virtual machine.</p>
</li>
<li><p>Update service node from centos 8.3.2011 to 8-stream. [Glenn Marcy]</p>
<p>This commit will switch the VM we create for the service node from
CentOS 8.3.2011 to CentOS Stream.</p>
</li>
</ul>
</section>
<section id="id23">
<h3>Fixes<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add new line waiting for converge. [Carlos Camacho]</p>
<p>This commit adds a new line so we wait
correctly for the cluster to converge.</p>
</li>
<li><p>Expand guest vm os name in task filename. [Glenn Marcy]</p></li>
<li><p>Make tox linters happy. [Glenn Marcy]</p></li>
<li><p>Move Ubuntu image to latest. [Carlos Camacho]</p>
<p>This commit moves forward the Ubuntu
image used to deploy RKE.</p>
</li>
<li><p>Set the ansible shell to bash to support pipefail. [naden]</p></li>
<li><p>Increase timeout for CDK deployments. [Carlos Camacho]</p>
<p>This commit increases the timeout when waiting
for the cluster to converge, this is useful when
deploying in old HW so the cluster will take
more time to be healthy.</p>
</li>
<li><p>Make cluster changes based on firewalld status. [Carlos Camacho]</p>
<p>We should not install or force firewalld status
to configure the cluster, this commit check the
firewalld status before executing the tasks.</p>
</li>
<li><p>Move tasks to gather hypervisor facts out of hypervisor_hosts play.
[Glenn Marcy]</p></li>
<li><p>Firewalld not on Fedora. [Glenn Marcy]</p></li>
<li><p>Run the e2e test as the runner user. [Carlos Camacho]</p>
<p>This commit makes the playbook to run as
the runner user.</p>
</li>
<li><p>Adjust KID packages. [Carlos Camacho]</p>
<p>This commit removes some packages not available anymore
in Debian.</p>
</li>
<li><p>Cast kubeinit_controller_count to int. [Glenn Marcy]</p></li>
<li><p>Use k8s 1.2 in OKD 4.7. [Carlos Camacho]</p>
<p>This commit adds the 1.20 repos for cri-o
in OKD 4.7</p>
</li>
<li><p>Cleanup duplicated code. [Carlos Camacho]</p>
<p>This commit removes the duplicated
code added to the guest OS steps.</p>
</li>
<li><p>Merge duplicate code. [Carlos Camacho]</p>
<p>This commit merges code that is specific to the
guest OS and not to the distro.</p>
</li>
<li><p>Move distro check to guest os check. [Carlos Camacho]</p>
<p>This commit moves the distro check to the
guest OS check when installing services.</p>
</li>
<li><p>Update readme. [Carlos Camacho]</p>
<p>This commit updates the readme file in the project.</p>
</li>
<li><p>Remove duplcicated call to 40_remove_bootstrap_node.yml. [Carlos
Camacho]</p>
<p>Now we need to fix the etcd cluster before finishing
the bootstrap to complete. This commit removes the extra code.</p>
</li>
<li><p>Apply scale spec changes before converge. [Carlos Camacho]</p>
<p>This commit makes the scale down adjustments before the cluster
to converge.</p>
</li>
<li><p>Kubeinit registry should be enabled for rke distro. [Glenn Marcy]</p></li>
<li><p>Remove all podman remote connections from localhost. [Glenn Marcy]</p></li>
<li><p>Cleanup podman connections in the CI. [Carlos Camacho]</p>
<p>This commit makes sure the podman
connections are cleaned in every run.</p>
</li>
<li><p>Do not regenerate keys if they exist. [Carlos Camacho]</p>
<p>This commit disables regenerating the
hosts keys if they exist.</p>
</li>
<li><p>Force reinstall packages. [Carlos Camacho]</p>
<p>This commit makes sure the packages
are reinstalled when configuring
OVS/OVN.</p>
</li>
<li><p>Make sure all OVS files are removed. [Carlos Camacho]</p>
<p>This commit prunes all the OVS/OVN files.</p>
</li>
<li><p>Remove extra quotes from eks docker config.json. [Glenn Marcy]</p></li>
<li><p>Add Fedora disto check to CentOS and RedHat. [Glenn Marcy]</p></li>
<li><p>Wait for connection in credentials podman connection. [Glenn Marcy]</p></li>
<li><p>Simplified issue template. [Naden]</p></li>
<li><p>Standardised case name. [Naden]</p></li>
<li><p>Organize submariner playbooks. [Carlos Camacho]</p>
<p>This commit aligns the submariner deployment playbook
with the distros deployment playbooks.</p>
</li>
<li><p>Set ansible shell to bash as needed for pipefail. [Naden]</p></li>
<li><p>Start OVS/OVN services in Ubuntu HV. [Carlos Camacho]</p>
<p>This commit starts the OVS/OVN services when using
Ubuntu/Debian hosts.</p>
</li>
<li><p>Make sure PK has the correct perms. [Carlos Camacho]</p>
<p>This commit makes sure the EKS distro has the correct perms in
the OK before referencing it.</p>
</li>
<li><p>Make sure PK has the correct perms. [Carlos Camacho]</p>
<p>This commit makes sure the EKS distro has the correct perms in
the OK before referencing it.</p>
</li>
<li><p>Remove s from etcd cluster check. [Carlos Camacho]</p>
<p>This commit fixes the check to verify the etcd cluster is
up in CDK.</p>
</li>
<li><p>Remove rm command. [Carlos Camacho]</p>
<p>The first time we install the node the sqlite DB
does not exists.</p>
</li>
<li><p>Install ansible from dnf. [Carlos Camacho]</p>
<p>This commit installs ansible from
dnf in the dockerfile and
makes sure we test the collections
versions in each PR.</p>
</li>
<li><p>Remove ansible install from PIP. [Carlos Camacho]</p>
<p>This commit uses the Ansible version
from the package repository instead of
PIP.</p>
</li>
<li><p>Check whether the cluster is healthy. [Carlos Camacho]</p>
<p>This commit unblocks the CI and only check that the
cluster is healthy.</p>
</li>
<li><p>Re-enabled cdk deployment. [Glenn Marcy]</p>
<p>This commit restores the cdk support to an operational
state.  There are some configurations that still have
some issues, but the cluster deployments show function
again and the cluster issues can be investigated further.</p>
</li>
<li><p>Add fixes for rke distro issues. [Glenn Marcy]</p>
<p>This commit addresses the issues with rke (and eks) created
when the prepare_credentials changes went in.</p>
</li>
<li><p>Allow use distro in veth interface. [Carlos Camacho]</p>
<p>We need to be able to deploy multiple
clusters in the same OVN network.
This commit allows to deploy two different
clusters (different distros) in the same
net.</p>
</li>
<li><p>Make sure the apache folder exists before deploying the container.
[Carlos Camacho]</p>
<p>This commit makes sure the apache folder exists
before creating the apache containter.</p>
</li>
<li><p>Fix docs linter. [Carlos Camacho]</p>
<p>This commit fixes the docs linter.</p>
</li>
<li><p>Retry when pods/containers fail to be created. [Carlos Camacho]</p>
<p>When pulling from external sources, the pods/containers
creation might fail.</p>
<p>This commit adds a retry for such scenarios.</p>
</li>
<li><p>Cleanup prepare_podman tasks. [Glenn Marcy]</p>
<p>This commit removes the need for creating new files and simplifies
the flow through the prepare podman tasks.  Additional minor cleanup
changes to reduce complexity of future deliveries.</p>
</li>
<li><p>Add nolog. [Carlos Camacho]</p>
<p>This commit add no_log to the registry password management tasks.</p>
</li>
<li><p>Making tox linters happy again. [Glenn Marcy]</p></li>
<li><p>Rework changes so that ovn network installs consistently. [Glenn
Marcy]</p>
<p>This commit addresses the following issues:
- Move all hypervisor preparation to prepare_hypervisor.yml
- Move installation of package dependencies from libvirt role</p>
<blockquote>
<div><p>to the prepare role.</p>
</div></blockquote>
<ul class="simple">
<li><p>Undefine VMs and remove storage for all VMs that were found.</p></li>
<li><p>Use first 3 characters from node names instead of 2 since both
controller and compute start with co.</p></li>
<li><p>Change docker password environment and ansible variable value
from the actual password to the path of a file containing the
password.</p></li>
</ul>
</li>
<li><p>Adjust workflows to point to main. [Carlos Camacho]</p>
<p>This commit fixes the job default branch
for the GH actions pointing to master.</p>
</li>
<li><p>Do not depend on the language output of df. [Carlos Camacho]</p>
<p>This commit removes the dependency with the localization
of the ‘df’ command, in English it returns ‘Avail’ and in
Spanish ‘Disp’.</p>
</li>
<li><p>Do not use hardwire service IP. [Carlos Camacho]</p>
<p>This commit removes a hardwired IP
in the nexus service.</p>
</li>
<li><p>Remove the regex dependency for inventory names. [Carlos Camacho]</p>
<p>Historically we searched for the guests names based in
a regex, currently we have them all grouped correctly without any
distribution limitation.</p>
<p>This commit enables users to use any name they want per
guest group (worker, master, service, and bootstrap nodes).</p>
</li>
<li><p>Make sure VMs are destroyed before undefining. [Carlos Camacho]</p>
<p>This commit makes sure all the inventory guests are destroyed
before undefining them.</p>
</li>
<li><p>Make the ubuntu distro as a variable. [Carlos Camacho]</p>
<p>This commit enables the Ubuntu release as
a variable.</p>
</li>
<li><p>Adjust names to have consistent case. [Naden]</p></li>
<li><p>Updated minimum version of libvirt. [Naden]</p></li>
<li><p>Remove Python 2 dependencies. [Naden]</p></li>
<li><p>Use /bin/bash when using set -o pipefail. [Naden]</p></li>
<li><p>Hardcoding of cluster name. [Naden]</p></li>
<li><p>Update community.libvirt. [R. Mathieu Landvreugd]</p>
<p>This resolves #313</p>
</li>
<li><p>Update readme. [Carlos Camacho]</p>
<p>This commit simplifies a little the readme content.</p>
</li>
<li><p>Update README.md. [iqre8]</p>
<p>Added some of the requirements to the Readme.</p>
</li>
<li><p>Update README.md. [iqre8]</p>
<p>Added a check to verify that the
requirements are okay.</p>
</li>
<li><p>Comment bastions tasks. [Carlos Camacho]</p>
<p>This commit comments some tasks
related to using services in
the bastion host, this feature is
not fully implemented yet.</p>
</li>
<li><p>Changes to make linters happy. [Glenn Marcy]</p></li>
<li><p>Fix new lint issues. [Carlos Camacho]</p>
<p>With lint updated there are some lint
checks to fix.</p>
</li>
<li><p>Update links order. [Carlos Camacho]</p>
<p>This commit sort the
replace in the CI report
build script.</p>
</li>
<li><p>Update CI links. [Carlos Camacho]</p>
<p>This commit fixes the CI “about” description.</p>
</li>
<li><p>Add iproute2 install to Dockerfile. [Glenn Marcy]</p>
<p>This commit adds iproute2 to the packages being installed
in the container image.  This provides the ‘ip’ command that
ansible depends on to gather network facts.</p>
</li>
<li><p>Update periodic job to the correct folder. [Carlos Camacho]</p>
<p>This commit fixes a path for reaching the periodic
jobs.</p>
</li>
<li><p>Update README. [Carlos Camacho]</p>
<p>This commit updates the
content of the readme file to point to the new
CI results location.</p>
</li>
<li><p>Pull from docker. [Carlos Camacho]</p>
<p>By default we use python:slim
to deploy the kubeinit container.
This commit makes explicit where to
pull from.</p>
</li>
<li><p>Allow fetch EKS images from distro.eks directly. [Carlos Camacho]</p>
<p>This commit fixes the step that fetch the images,
before the images were in a single text file and
now we fetch them directly from the EKS registry.</p>
</li>
<li><p>Add pin to ansible &lt;4. [Carlos Camacho]</p>
<p>This commit excludes ansible 4 from the CI.</p>
</li>
<li><p>Move OVN scenario from OKD to vanilla K8s. [Carlos Camacho]</p>
<p>The OKD deployment takes too much resources, this commit
moves the OVN job to a lighter scenario.</p>
</li>
<li><p>Pull directly from CDN. [Carlos Camacho]</p>
<p>This commit makes the job to pull directly the images from the CDN.</p>
</li>
<li><p>Enable 4 hypervisors. [Carlos Camacho]</p>
<p>The OVN job fails because there is not enough capacity
this commit, enables 4 machines for the OVN jobs.</p>
</li>
<li><p>Change the ovn periodic job tag. [Carlos Camacho]</p>
<p>This commit fixes the tag in the OVN job
for the periodic run.</p>
</li>
<li><p>Make jobs to force use latest ubuntu and python 3.8. [Carlos Camacho]</p>
<p>This commit adjust the GitHub jobs to use the
same status check (build 3.8).</p>
</li>
<li><p>Delete other blank line. [Glenn Marcy]</p></li>
<li><p>Remove extra blank line. [Glenn Marcy]</p></li>
<li><p>Change state from stopped to created for service pod. [Glenn Marcy]</p></li>
<li><p>Remove extra spaces. [Carlos Camacho]</p>
<p>This commit removes an extra expace when executing subctl verify.</p>
</li>
<li><p>Adjust CI scripts. [Carlos Camacho]</p>
<p>This commit adjusts the CI scripts
as there are two worker nodes by default
in the inventory file.</p>
</li>
<li><p>Increase the timeout for checking the connection. [Carlos Camacho]</p>
<p>This commit increases the retry number for
checking that the submariner connection is up
and running.</p>
</li>
<li><p>Pass distro to ansible-playbook-grapher. [Glenn Marcy]</p>
<p>This commit addresses the new kubeinit_inventory_cluster_distro
reference in the playbook by defining it for each distro on the
command line.</p>
</li>
<li><p>Add a second worker to each distro inventory. [Glenn Marcy]</p>
<p>This commit adds a second worker node so that we can run
a cluster version update when a newer release is available.</p>
</li>
<li><p>Change haprocy stats port from 9090 to 9000. [Glenn Marcy]</p>
<p>This commit moves the stats port so that it does not conflict
with the cockpit port.</p>
</li>
<li><p>Change subctl–linux-amd64 with subctl. [Carlos Camacho]</p>
<p>This commit changes subctl–linux-amd64 with
subctl–linux-amd64 because is the new name
for this binary.</p>
</li>
<li><p>Remove the ignore errors in submariner. [Carlos Camacho]</p>
<p>This commit removes some workarounds
for creating the submariner operator
images.</p>
</li>
<li><p>Adjust submariner labels based on the workers number. [Carlos Camacho]</p>
<p>This commit adds the correct nodes labels for
the submariner operator to work in HA when its
possible.</p>
</li>
<li><p>Nit removal. [Carlos Camacho]</p>
<p>This commit fixes the YAML lint check.</p>
</li>
<li><p>Do not upgrade Docker. [Carlos Camacho]</p>
<p>This commit removes the docker upgrade command,
we need to pin a specific version.</p>
</li>
<li><p>Nit fix in the ci script. [Carlos Camacho]</p>
<p>This commit fixes a nit in the ci scripts.</p>
</li>
<li><p>Include registry auth in .docker. [Carlos Camacho]</p>
<p>It is still required to have the authentication
details in the .docker folder defore pushing
to the local registry.</p>
</li>
<li><p>Adjust podman login in secondary cluster. [Carlos Camacho]</p>
<p>This commit fixes the podman login to configure
the secondary submariner cluster.</p>
</li>
<li><p>Addsubmariner periodic to readme. [Carlos Camacho]</p>
<p>This commit adds the periodic jobs results to the project’s readme.</p>
</li>
<li><p>Adjust submariner make steps. [Carlos Camacho]</p>
<p>Currently there is a bug when using
the make module as the submariner make
file has some errors captured by Ansible.</p>
</li>
<li><p>Include pending submariner config. [Carlos Camacho]</p>
<p>This commit adds the pending config details for
submariner.</p>
</li>
<li><p>Make submariner playbooks aligned with the other roles. [Carlos
Camacho]</p>
<p>This commit aligns submariner role to the pattern used in
all the other roles.</p>
</li>
<li><p>Build subctl in the docker cluster. [Carlos Camacho]</p>
<p>This commit fixes the build of submariner,
now this is executed in the RKE cluster
and syncronized to the OKD cluster (docker -&gt; podman).</p>
</li>
<li><p>Replace wrong ci strings. [Carlos Camacho]</p>
<p>This commit fixes a nit in the ci scripts
that causes k8s periodic job to run cdk.</p>
</li>
<li><p>Remove docker from submariner. [Carlos Camacho]</p>
<p>This commit removes docker commands from
the submariner role.</p>
</li>
<li><p>Move to shell and sort parameters. [Carlos Camacho]</p>
<p>This commit moves to shell the podman login
commands as the dont work correctly with
different OS distros.</p>
</li>
<li><p>Move docker pass to each role. [Carlos Camacho]</p>
<p>This commit moves the docker auth file to each
role using it.</p>
</li>
<li><p>Login to docker.io from text file auth. [Carlos Camacho]</p>
<p>This commit changes the docker.io auth from CLI to
use a text file.</p>
</li>
<li><p>Move shell to command. [Carlos Camacho]</p>
<p>This commit moves shell to command.</p>
</li>
<li><p>Securize podman login. [Carlos Camacho]</p>
<p>This patch fixes showing the podman login
password in the Ansible logs.</p>
</li>
<li><p>Allow requests to wait 1600s. [Carlos Camacho]</p>
<p>This commit increases the timeout
for the NFS resources.</p>
</li>
<li><p>Add a timeout to the imageregistry provider commands. [Carlos Camacho]</p>
<p>This adds a higher timeout when pathing the imageregistry
operator.</p>
</li>
<li><p>Remove docker and create haproxy files. [Carlos Camacho]</p>
<p>This commit removes the docker bits in the registry role
and some missing requisites for haproxy to be configured in
Ubuntu.</p>
</li>
<li><p>Lint errors. [Glenn Marcy]</p>
<p>Commit to fix lint errors.</p>
</li>
<li><p>Add missing cluster name to several places generating cluster FQDNs.
[Glenn Marcy]</p>
<p>This commit fixes several locations where the FQDN for a cluster node was
missing the cluster name.</p>
</li>
<li><p>Enforce detach parameters. [Carlos Camacho]</p>
<p>This commit enfoces the parameters
when calling the detach script.</p>
</li>
<li><p>Enable or disable master schedulable depending on worker nodes.
[Carlos Camacho]</p>
<p>This commit disables or enables the master nodes as schedulable
depending only if there are or not worker nodes.</p>
</li>
<li><p>Wait for 60 retries. [Carlos Camacho]</p>
<p>This commit increases the retries waiting
for the NFS resources to start.</p>
</li>
<li><p>Add ignore_errors when waiting for nfs resources to start. [Carlos
Camacho]</p>
<p>This commit adds an ignore_errors when waiting for the NFS resources
to start.</p>
</li>
<li><p>Enable mastersSchedulable if no workers. [Carlos Camacho]</p>
<p>This commit enables mastersSchedulable when there
are no worker nodes in the cluster.</p>
</li>
</ul>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Optimize dockerfile. [Raghavendra Talur]</p>
<p>By moving the the COPY directive to a lower position, we can save
rebuilds of the container when we are actively working on the code.</p>
<p>As the packages are installed before the copy directive, the base
container needs to be built only once.</p>
</li>
</ul>
</section>
<section id="id24">
<h3>Refactor<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Remove unused, rename consistency. [Glenn Marcy]</p></li>
<li><p>Use cluster name in all named cluster resources. [Glenn Marcy]</p>
<p>This commit adds updates to the overall naming scene for cluster nodes so
that we could support two clusters, either of the same or different distros,
on the same hypervisor(s) without them conflicting with one another.  This
is still a work in progress and other changes will be needed before that
goal can be achieved.  The main change at this time is to remove the cluster
distro prefix from inventories so that we can generate guest names with the
cluster name as a prefix.</p>
<p>Other changes include:
- Added a section to the inventory describing the behavior of the bastion_host</p>
<blockquote>
<div><p>and delivered initial support for creating a bastion external to the cluster.</p>
</div></blockquote>
<ul class="simple">
<li><p>Replaced [bootstrap_node] with [extra_nodes] to generalize the idea of distro
specific nodes, and added juju-controller to the CDK distro as an extra node.</p></li>
<li><p>Changed playbook sequence to separate out the network creation and cloud image
download tasks and folded the distro specific service configuration into the
prepare_cluster task.</p></li>
<li><p>All services now build local container images for their service configuration.</p></li>
<li><p>Cluster services now share configuration in services data volume mounted on
/var/kubeinit in each container.</p></li>
<li><p>Updated distros to consolidate tasks into single prepare and deploy cluster flow.</p></li>
<li><p>Updated CDK distro to latest in charmstore, download standalone command from
launchpad eliminating dependency on snap in the provision container, moved the
juju-controller into an extra guest node that only performs that function.</p></li>
<li><p>Removed validation that cluster nodes need to match a specic pattern, more work
in CI needed so that cluster node names can be arbitrary.</p></li>
<li><p>Changed veth0 names for guest vms to use ip4_hex representation.</p></li>
<li><p>Streamlined the flow through the kubeinit_services role tasks.</p></li>
</ul>
</li>
<li><p>Move cleanup tasks before run validations. [Glenn Marcy]</p>
<p>This commit moves the cleanup tasks to a new spot after preparing
the environment and before running validations.  Those cleanup tasks
have also been optimized to run in parallel when the cluster is being
deployed to multiple hypervisors.  OVN cleanup has also been adjusted
to be more of a surgical operation, touching as little as necessary,
rather than the scorched earth approach used previously.</p>
<p>Other changes include adding kubeinit_cluster_fqdn as a shorter
substitute for the cluster_name.cluster_domain, replacing append to
authorized_keys shell commands with the authorized_key ansible task,
streamlining the cloud image downloads and applying package updates
to those images once for each copy rather than for each guest vm
created from those images, collecting more information during initial
fact gathering rather than spreading it out across many different roles,
and many other minor improvements.</p>
</li>
<li><p>Move post-deployment tasks to a new play task after deployment. [Glenn
Marcy]</p>
<p>This commit creates a new task-post-deployment task to the end of the
cluster install play.  Other changes include updating the EKS kubernetes
version to 1.21.4 and removing nfs from the pre-deployment services since
it done in the post-deployment phase.</p>
</li>
<li><p>Rename or remove post deployment task files. [Glenn Marcy]</p></li>
</ul>
</section>
</section>
<section id="v1-0-2-release-date-2021-03-19">
<h2>v1.0.2 - Release date: 2021-03-19<a class="headerlink" href="#v1-0-2-release-date-2021-03-19" title="Permalink to this heading"></a></h2>
<section id="id25">
<h3>Chore<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 1.0.2. [Carlos Camacho]</p>
<p>This commit releases KubeInit 1.0.2.</p>
</li>
</ul>
</section>
<section id="id26">
<h3>Features<a class="headerlink" href="#id26" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Allow to deploy OpenShift. [Carlos Camacho]</p>
<p>This commit allows to deploy OpenShift from the
automation used to deploy OKD.</p>
</li>
</ul>
</section>
<section id="id27">
<h3>Fixes<a class="headerlink" href="#id27" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Wait for image registry resource exists. [Carlos Camacho]</p>
<p>This commit fixes a race condition in the CI,
we try to patch resources that might not exists.</p>
</li>
<li><p>Adjust removing the bootstrap node in single master configs. [Carlos
Camacho]</p>
<p>This commit adjust the step of removing the bootstrap
node in single master configurations.</p>
</li>
<li><p>Disable NFS if not OKD. [Carlos Camacho]</p>
<p>This commit disables NFS until the commands
changes from oc to kubectl.</p>
</li>
<li><p>Move ansible-lint to args. [Carlos Camacho]</p>
<p>This commit fixes the way we call ansible-lint.</p>
</li>
<li><p>Update tox.ini. [Glenn Marcy]</p>
<p>This commit replaces the -name with -wholename for the roles yaml files</p>
</li>
<li><p>Update nfs role to latest k8s sig practice. [Glenn Marcy]</p>
<p>This commit refreshes the way we generate the yaml artifacts for
managed-nfs-storage and also now uses that storage class to allocate
the volume for the image registry.</p>
</li>
<li><p>Include dns server in static ip config. [Carlos Camacho]</p>
<p>This commit includes the DNS servers when
configuring the external interface bridge.</p>
</li>
<li><p>Enable kiextbr0 interface after configuring the static IP. [Carlos
Camacho]</p>
<p>This commit enables the interface just afet the manual IP is
configured.</p>
</li>
<li><p>Include error for non supported distros. [Carlos Camacho]</p>
<p>This commit checks that the detach script
fails if they hypervisors are Ubuntu or
Debian as they are not yet supported.</p>
</li>
<li><p>Include NetworkManager OVS package. [Carlos Camacho]</p>
<p>This commit adds the NetworkManager-ovs
in CentOS.</p>
</li>
<li><p>Adjust treeinfo for RHCOS. [Carlos Camacho]</p>
<p>This commit adds a correct treeinfo file to deploy rhcos
images.</p>
</li>
<li><p>Check if the distro is Centos or Fedora in the detach script. [Carlos
Camacho]</p>
<p>This commit validates that the detach script install the
correct packages when creating the OVS bridge.</p>
</li>
<li><p>Organize pending libvirt files. [Carlos Camacho]</p>
<p>This commit finishes to organize the
pending files fomr the libvirt role.</p>
</li>
<li><p>Backup install manifests. [Carlos Camacho]</p>
<p>This commit store the install manifests
before rendering the ignition files for
having a better debugging.</p>
</li>
<li><p>Adjust tasks files names. [Carlos Camacho]</p>
<p>This commit adjust the k8s distros roles file names to be consistent
about how they run.</p>
</li>
</ul>
</section>
</section>
<section id="v1-0-1-release-date-2021-03-10">
<h2>v1.0.1 - Release date: 2021-03-10<a class="headerlink" href="#v1-0-1-release-date-2021-03-10" title="Permalink to this heading"></a></h2>
<section id="id28">
<h3>Chore<a class="headerlink" href="#id28" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 1.0.1. [Carlos Camacho]</p>
<p>This commit releases Kubeinit 1.0.1
with full OVN support for multinode cluster deployments.</p>
</li>
<li><p>Mirror to GitLab. [Carlos Camacho]</p>
<p>This commit after every merge, will push the latest version to GitLab.</p>
</li>
<li><p>Update version of fcos. [sean-m-sullivan]</p></li>
</ul>
</section>
<section id="id29">
<h3>Documentation<a class="headerlink" href="#id29" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add the cleanup section. [Carlos Camacho]</p>
<p>This commit adds a playbook to clean the environment
in the documentation.</p>
</li>
</ul>
</section>
<section id="id30">
<h3>Features<a class="headerlink" href="#id30" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Render detach script in the external interface host. [Carlos Camacho]</p>
<p>This commit renders the detach script in the host that needs
to have external access to the service guest.</p>
</li>
<li><p>Allow deploying the service node in any chassis. [Carlos Camacho]</p>
<p>This commit allows to deploy the service machine
with the exterenal interface in any of the chassis.</p>
</li>
<li><p>Replace ssh config.kubeinit file with ssh -o ProxyCommand. [Glenn
Marcy]</p>
<p>This commit removes the creation (and cleanup) of an ssh config file
and replaces it with an ssh ProxyCommand option when accessing the
cluster nodes.</p>
</li>
<li><p>Collect all of the non-hypervisor nodes into all_nodes group. [Glenn
Marcy]</p>
<p>This commit adds a new all_nodes group to make it easier to iterate
over that list and to prevent confusion when additional items are
added to the all group after reading the inventory.</p>
</li>
<li><p>Add view to bind for public bridge network. [Glenn Marcy]</p>
<p>This commit allows for hosts on the public bridge network to make
dns requests that will resolve on the service node to internal
addresses accessible to those hosts.</p>
</li>
<li><p>Add the external interface to OVN deployment. [Carlos Camacho]</p>
<p>This commit connects the service external interface
to the OVN network.</p>
</li>
<li><p>Split OVN nat rules. [Carlos Camacho]</p>
<p>This commit splits the OVN iptables rules
to allow adding the external interface details.</p>
</li>
<li><p>Validate physical cores per guest. [Carlos Camacho]</p>
<p>This commit checks that per each physical
core there can be up to 4 virtual cores.</p>
</li>
<li><p>Use source based routing in the service node. [Carlos Camacho]</p>
<p>Now the service node has two interfaces if we require
to have external access to the cluster resources.
This commit implements the usage of
Policy-Based-Routing Rules to ensure
the traffic from one interface comes out using the
same interface.</p>
</li>
<li><p>Include ci scripts. [Carlos Camacho]</p>
<p>This commit includes the worker node prepare script
for the GitLab runner and fixes the script to enslave
the external access interface.</p>
</li>
<li><p>Include OVN clean tasks in the cleanup file. [Carlos Camacho]</p>
<p>This PR includes the OVN cleaning tasks and
install Python3 in the CentOS guests.</p>
</li>
<li><p>Split the cleanup tasks in a separate file. [Carlos Camacho]</p>
<p>This PR makes easier to execute only the cleanup tasks.</p>
</li>
<li><p>Centralize health check in libvirt. [Carlos Camacho]</p>
<p>This PR centralize all the checks that
verify that the cluster nodes are up and
running.</p>
</li>
<li><p>Add more timeout parameters. [Carlos Camacho]</p>
<p>This PR adds some additional timeout parameters.</p>
</li>
</ul>
</section>
<section id="id31">
<h3>Fixes<a class="headerlink" href="#id31" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update when conditions for external bridge checks. [Glenn Marcy]</p>
<p>This commit changes the conditions so that we only check for the
correct status return from nmcli con show after we have checked
the conditions which were used to run those commands.</p>
</li>
<li><p>Update how we iterate over validation maps. [Glenn Marcy]</p>
<p>This commit changes the way we iterate over resources when we are
checking them.  Check that for each resource that we need that the
hypervisor providing those has sufficient capacity.</p>
</li>
<li><p>Replace stricthostkeychecking with StrictHostKeyChecking. [Glenn
Marcy]</p>
<p>This commit updates all the hosts inventory files to use the same
case convention as the rest of the project for ssh options.</p>
</li>
<li><p>Patch the external interface to the OVS bridge. [Carlos Camacho]</p>
<p>This commit is the last step to have
access to the external cluster interface.
This patches both OVS bridges from the
cluster network and the host physical interface.</p>
</li>
<li><p>Add enslaver helpers. [Carlos Camacho]</p>
<p>This commir helps to enslave the
physical interface.</p>
</li>
<li><p>Update ansible in the docs release job. [Carlos Camacho]</p>
<p>This commit updates ansible in the job that
publishes the docs.</p>
</li>
<li><p>Make sure we use latest ansible in CI. [Carlos Camacho]</p>
<p>Because of <a class="reference external" href="https://github.com/ansible/ansible/pull/71824">https://github.com/ansible/ansible/pull/71824</a>
we need to make sure we use the latest version of
Ansible in the CI.</p>
</li>
<li><p>Move haproxy port to 9090 and disable ipv6. [Carlos Camacho]</p>
<p>This commit shifts the default 9000 port to
9090 because it might conflict with the default
cockpit port and disables ipv6 by default in
the guests.</p>
</li>
<li><p>Parse correctly args. [Carlos Camacho]</p>
<p>This commit parses correctly the
arguments.</p>
</li>
<li><p>Split periodic job in multiple smaller jobs. [Carlos Camacho]</p>
<p>This commit splits the periodic job into multiple
jobs because it takes too much time to execute all the
posible scenarios in a single run.</p>
</li>
<li><p>Wait for bootstrap to complete. [Carlos Camacho]</p>
<p>This commit force the deployment
to wait until the bootstrap step completes.</p>
</li>
<li><p>Detect the external interface. [Carlos Camacho]</p>
<p>This commit replaces eno1 with the
correct interface nem of the router gateway in
the OVN deployment.</p>
</li>
<li><p>Run bridge check only in the external host. [Carlos Camacho]</p>
<p>This PR checks that the external bridge is only
created in the node with the service node.</p>
</li>
<li><p>Fetching all branches returns 1 if they already exists. [Carlos
Camacho]</p>
<p>This commit makes sure fetching the branches never returns 1.</p>
</li>
<li><p>Move GitLab mirror to sw release. [Carlos Camacho]</p>
<p>This commit moves the repo sync to the correct place.</p>
</li>
<li><p>Fix ansible lint issues. [Carlos Camacho]</p>
<p>This commit fixes some ansible-lint issues in the code.</p>
</li>
<li><p>Include ansible-lint checks again. [Carlos Camacho]</p>
<p>This PR enables back the ansible-lint check
that was failing in the past.</p>
</li>
<li><p>Cleanup and configure ssh proxy once and wait for guest. [Carlos
Camacho]</p>
<p>This PR makes sure we ssh proxy is configured once, also, cleaned
once in the first hypervisor.</p>
<p>Also makes sure each guest boots before continue, if we
create multiple guests at the same time libvirt may crash.</p>
</li>
<li><p>Use local ssh config instead of proxy settings. [Carlos Camacho]</p>
<p>This patch configures the SSH config file instead
of the Ansible proxy settings, Ansible for some
reason is not honoring them anymore.</p>
</li>
<li><p>Adjust inventory to honor the ssh proxy. [Carlos Camacho]</p>
<p>This PR fixes a breakage in the way the collection
connects to the guests. The previous approach is not
honored by Ansible anymore so we can not connect to the
guests. We now use ansible_ssh_extra_args instead of
ansible_ssh_common_args.</p>
</li>
<li><p>Align OVN network parameters with inventory variables. [Carlos
Camacho]</p>
<p>This PR aligns the OVN network parameters
with the values from the inventory files, currently
they are hardwired.</p>
</li>
<li><p>Name check nodes correctly. [Carlos Camacho]</p>
<p>This PR renames correctly a task that checks that nodes are ready.</p>
</li>
<li><p>Replace wait_for by wait_for_connection. [Carlos Camacho]</p>
<p>Listening to port 22 do not guarantee that ansible is able to login
so we can hit race conditions.</p>
</li>
</ul>
</section>
</section>
<section id="v1-0-0-release-date-2021-02-05">
<h2>v1.0.0 - Release date: 2021-02-05<a class="headerlink" href="#v1-0-0-release-date-2021-02-05" title="Permalink to this heading"></a></h2>
<section id="id32">
<h3>Chore<a class="headerlink" href="#id32" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 1.0.0. [Carlos Camacho]</p>
<p>This PR releases kubeinit 1.0.0
with mutiple features amongs them
support for 5 kubernetes distributions,
multicluster and multinode deployments.</p>
</li>
<li><p>Template updates and logo img. [Carlos Camacho]</p>
<p>This patch updates some templates and logos.</p>
</li>
</ul>
</section>
<section id="id33">
<h3>Documentation<a class="headerlink" href="#id33" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Update link. [Carlos Camacho]</p>
<p>Change links to GH repo</p>
</li>
</ul>
</section>
<section id="id34">
<h3>Features<a class="headerlink" href="#id34" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Make OVN available for multinode deployments. [Carlos Camacho]</p>
<p>This PR makes available to deploy kubeinit in a multinode
environment.</p>
</li>
<li><p>Add more OVN steps. [Carlos Camacho]</p>
<p>This PR adds more steps for the OVN
configuration NAT+DHCP</p>
</li>
<li><p>Add post OVN deployment steps. [Carlos Camacho]</p>
<p>This patch adds a post deployment step for OVN.</p>
</li>
<li><p>Allow deployments using OVN. [Carlos Camacho]</p>
<p>This patch allows to deploy
Kubeinit using OVN.</p>
</li>
<li><p>Lint the fqcn playbooks. [Carlos Camacho]</p>
<p>This patch checks that all tasks use fqcn</p>
<blockquote>
<div><p>Please enter the commit message for your changes. Lines starting</p>
</div></blockquote>
</li>
<li><p>Convert to fqcn. [Carlos Camacho]</p>
<p>This patch converts the roles content to fqcn</p>
</li>
<li><p>Use fqcn in skeleton and playbooks. [Carlos Camacho]</p>
<p>This is the first iteration to use the fqcn in the project.</p>
</li>
<li><p>Make OVN parameters available from the role defaults. [Carlos Camacho]</p>
<p>This patch adds the OVN configuration parameters
available from the role defaults.</p>
</li>
<li><p>Include OVN configuration steps. [Carlos Camacho]</p>
<p>This PR includes the steps for configuring OVN
in a multi-HV environment.</p>
</li>
<li><p>Add more changes to support multiple hypervisors. [Carlos Camacho]</p>
<p>This is anoter patch to support multiple HVs in any
distro deployment.</p>
</li>
<li><p>Include initial support for multiple hypervisors. [Carlos Camacho]</p>
<p>This is the first series of patches to add support for
multiple hypervisors.</p>
<p>This updates the inventory files and updates the
disk space validation.</p>
</li>
<li><p>Include initial ui PoC. [Carlos Camacho]</p>
<p>This patch reuse a PoC I had from the
past.</p>
</li>
</ul>
</section>
<section id="id35">
<h3>Fixes<a class="headerlink" href="#id35" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Allow not waiting for okd to converge. [Carlos Camacho]</p>
<p>This includes a variable to wait or not until
the cluster converges, mostly the autoupdate
can take more than 1 hour to finish.</p>
</li>
<li><p>Allow bind to forward requests. [Carlos Camacho]</p>
<p>This patch allows to forward requests
between multiple clusters.</p>
</li>
<li><p>Include internal dns in CI deployments. [Carlos Camacho]</p>
<p>This PR includes a missing parameter to update
an internal DNS.</p>
</li>
<li><p>Do not enable OVN yet. [Carlos Camacho]</p>
<p>OVN is no ready yet, so dont enable it.</p>
</li>
<li><p>Adjust OVN config deployment. [Carlos Camacho]</p>
<p>Added some minor fixes for the OVN deployment.</p>
</li>
<li><p>Register correctly eks worker nodes. [Carlos Camacho]</p>
<p>There is a wrong conditional breaking eks
deployments with a single master node.</p>
</li>
<li><p>Make sure libvirtd is enabled. [Carlos Camacho]</p>
<p>By default libvirtd is not enabled
so the deployments might fail.</p>
<p>Also add a failsafe path for libvirt default
folder.</p>
<p>And label the eks nodes at the end of the
deployment.</p>
</li>
<li><p>Install docker everywhere in cdk. [Carlos Camacho]</p>
<p>Execute the common steps in all the cdk nodes.</p>
</li>
<li><p>Remove unneeded tasks and tags. [Carlos Camacho]</p>
<p>This patch removes a few unneeded tags and tasks.</p>
</li>
<li><p>Adjust playbook files to avoid duplicated steps. [Carlos Camacho]</p>
<p>This PR fixes a duplication step when configuring the
services nodes.</p>
</li>
<li><p>Adjust missing inventory files. [Carlos Camacho]</p>
<p>We missed to comment the hypervisors in
some distros, breaking the disk space validation.</p>
</li>
<li><p>Update variables. [Carlos Camacho]</p>
<p>This patch updates some misc variables</p>
</li>
<li><p>Openshift sdk is not required. [Carlos Camacho]</p>
<p>This patch removes the openshift requirement which is
not necesary.</p>
</li>
</ul>
</section>
</section>
<section id="v0-6-5-release-date-2020-12-15">
<h2>v0.6.5 - Release date: 2020-12-15<a class="headerlink" href="#v0-6-5-release-date-2020-12-15" title="Permalink to this heading"></a></h2>
<section id="id36">
<h3>Chore<a class="headerlink" href="#id36" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Keep ara version. [Carlos Camacho]</p>
<p>Latest ara is faulty.</p>
</li>
<li><p>Update readme content. [Carlos Camacho]</p>
<p>This patch simplifies the project’s
readme file.</p>
</li>
</ul>
</section>
<section id="id37">
<h3>Features<a class="headerlink" href="#id37" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add simple agent skeleton. [Carlos Camacho]</p>
<p>This patch adds a simple skeleton code for the agent</p>
</li>
<li><p>Trigger submariner jobs. [Carlos Camacho]</p>
<p>This patch triggers submariner jobs
and update its labels and status
accordingly.</p>
</li>
<li><p>Deploy OKD 4.6. [Carlos Camacho]</p>
<p>This patch bumps the default deployed version
of OKD to 4.6</p>
</li>
</ul>
</section>
<section id="id38">
<h3>Fixes<a class="headerlink" href="#id38" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Do not update logs link if cant upload to GitHub. [Carlos Camacho]</p>
<p>This patch makes the jobs in GH to keep
the original link if the file upload
failed pushing the logs to GitHub.</p>
</li>
<li><p>Add workarounds for 1 master OKD cluster. [Carlos Camacho]</p>
<p>There are some missing parameters that
needs to be adjusted in OKD 4.6 to deploy
single node clusters.</p>
</li>
</ul>
</section>
</section>
<section id="v0-6-4-release-date-2020-12-09">
<h2>v0.6.4 - Release date: 2020-12-09<a class="headerlink" href="#v0-6-4-release-date-2020-12-09" title="Permalink to this heading"></a></h2>
<section id="id39">
<h3>Chore<a class="headerlink" href="#id39" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 0.6.4. [Carlos Camacho]</p>
<p>This patch releases v0.6.4</p>
</li>
</ul>
</section>
<section id="id40">
<h3>Documentation<a class="headerlink" href="#id40" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Fix link. [Carlos Camacho]</p>
<p>Fix broken link</p>
</li>
<li><p>Remove unneeded notes. [Carlos Camacho]</p>
<p>This patch removes some unneeded notes</p>
</li>
</ul>
</section>
<section id="id41">
<h3>Fixes<a class="headerlink" href="#id41" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Fix template indentation. [Carlos Camacho]</p>
<p>This patch fixes somw wrong identation
in the NFS templates.</p>
</li>
<li><p>Replace okd by service regex. [Carlos Camacho]</p>
<p>This patch changes a hardwired okd
in the NFS templates for a regex.</p>
<p>Do not merge this.</p>
</li>
</ul>
</section>
<section id="id42">
<h3>Refactor<a class="headerlink" href="#id42" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Refines task clause naming and removes obsolete code. [Brendan Boyd]</p></li>
<li><p>Adds changed_when and when clauses to nfs provisioner. [Brendan Boyd]</p></li>
<li><p>Adds nfs storage class and moves nfs config to post deployment.
[Brendan Boyd]</p></li>
</ul>
</section>
</section>
<section id="v0-6-3-release-date-2020-12-08">
<h2>v0.6.3 - Release date: 2020-12-08<a class="headerlink" href="#v0-6-3-release-date-2020-12-08" title="Permalink to this heading"></a></h2>
<section id="id43">
<h3>Chore<a class="headerlink" href="#id43" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release and update docs. [Carlos Camacho]</p>
<p>This patch builds a new release
and amends the documentation.</p>
</li>
</ul>
</section>
<section id="id44">
<h3>Features<a class="headerlink" href="#id44" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Include eks as a new distro. [Carlos Camacho]</p>
<p>The following patch allows the deployment of EKS-d</p>
</li>
</ul>
</section>
<section id="id45">
<h3>Fixes<a class="headerlink" href="#id45" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Remove common.yml from the inventory grapher. [Carlos Camacho]</p>
<p>This patch excludes common.yml from the
docs graphing tooling.</p>
</li>
<li><p>Include pending variables. [Carlos Camacho]</p>
<p>This patch adds some pending variables to configure
EKS correctly.</p>
</li>
<li><p>Allow insecure registry with docker in OKD. [Carlos Camacho]</p>
<p>This patch enables insecure registries in OKD when using with
docker.</p>
</li>
<li><p>Allow insecure registry with docker in OKD. [Carlos Camacho]</p>
<p>This patch enables insecure registries in OKD when using with
docker.</p>
</li>
</ul>
</section>
</section>
<section id="v0-6-2-release-date-2020-12-04">
<h2>v0.6.2 - Release date: 2020-12-04<a class="headerlink" href="#v0-6-2-release-date-2020-12-04" title="Permalink to this heading"></a></h2>
<section id="id46">
<h3>Chore<a class="headerlink" href="#id46" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Release 0.6.2. [Carlos Camacho]</p>
<p>This patch releases 0.6.2 fix a major fix
for the new podman version breaking all distros
deployments.</p>
</li>
<li><p>Pre-deploy OKD 4.6. [Carlos Camacho]</p>
<p>This patch configures the
requirements to deploy OKD 4.6.</p>
</li>
<li><p>Include date in job name. [Carlos Camacho]</p>
<p>This patch includes the date
in the patch names.</p>
</li>
<li><p>Clean unneeded titles. [Carlos Camacho]</p>
<p>This patch cleans up some unneeded titles
in the roles.</p>
</li>
<li><p>Sync all ci scripts. [Carlos Camacho]</p>
<p>This patch syncs both CI scripts</p>
</li>
<li><p>Docs fix. [Carlos Camacho]</p>
<p>2 simple empty lines</p>
</li>
<li><p>Update readme. [Carlos Camacho]</p>
<p>This patch updates the readme
with the way to run kubeinit
from a quay container and a
docs update.</p>
</li>
</ul>
</section>
<section id="id47">
<h3>Documentation<a class="headerlink" href="#id47" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add readme as part of docs. [Carlos Camacho]</p>
<p>This patch adds the readme file as part of the documentation.</p>
</li>
</ul>
</section>
<section id="id48">
<h3>Features<a class="headerlink" href="#id48" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Include subctl verify as a new playbook. [Carlos Camacho]</p>
<p>This patch adds an new playbook for running
subctl verify so the CI logs are in a different
section.</p>
</li>
<li><p>Include ara in the ci results. [Carlos Camacho]</p>
<p>This path includes ara as part of the CI jobs
execution</p>
</li>
</ul>
</section>
<section id="id49">
<h3>Fixes<a class="headerlink" href="#id49" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Allow docker and podman in the local registry container. [Carlos
Camacho]</p>
<p>This patch allows choosing between docker or podman in the
service machine when installing the local registry.</p>
</li>
<li><p>Merge CI logs in a single commit. [Carlos Camacho]</p>
<p>WE had issues to push the CI logs with binary
files, this patch fix that issue and commits only
one change.</p>
</li>
<li><p>Pull from local registry explicitly. [Carlos Camacho]</p>
<p>When deploying submariner the newly created
container images need to be tagged and pointed
to the local registry.</p>
</li>
</ul>
</section>
</section>
<section id="v0-6-1-release-date-2020-11-23">
<h2>v0.6.1 - Release date: 2020-11-23<a class="headerlink" href="#v0-6-1-release-date-2020-11-23" title="Permalink to this heading"></a></h2>
<section id="id50">
<h3>Chore<a class="headerlink" href="#id50" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add container image in quay. [Carlos Camacho]</p>
<p>After each release we push a new tag to quay</p>
</li>
<li><p>Split code for better readability. [Carlos Camacho]</p>
<p>This patch splits a few tasks for better readability.</p>
</li>
<li><p>Print PR inf in the submariner playbook. [Carlos Camacho]</p>
<p>This patch adds some debung information
when getting the submariner operator code</p>
</li>
</ul>
</section>
<section id="id51">
<h3>Fixes<a class="headerlink" href="#id51" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Adjust operator image overrides. [Carlos Camacho]</p>
<p>This patch fix the parameter to override the submariner operator</p>
</li>
<li><p>Remove quotes from eof. [Carlos Camacho]</p>
<p>Quotes in OEF blocks variable expansion which is the
default behavior inside of here-docs.
This was disabled by quoting the label (with single or double quotes).</p>
</li>
</ul>
</section>
</section>
<section id="v0-6-0-release-date-2020-11-20">
<h2>v0.6.0 - Release date: 2020-11-20<a class="headerlink" href="#v0-6-0-release-date-2020-11-20" title="Permalink to this heading"></a></h2>
<section id="id52">
<h3>Chore<a class="headerlink" href="#id52" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Cut 0.6.0. [Carlos Camacho]</p>
<p>This releases KubeInit’s 0.6.0</p>
</li>
</ul>
</section>
<section id="id53">
<h3>Documentation<a class="headerlink" href="#id53" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add inventory and playbook diagrams. [Carlos Camacho]</p>
<p>This patch renders automatically the
inventory and supported playbooks
for the supported scenarios.</p>
</li>
<li><p>Add syntax check docs for commits. [Carlos Camacho]</p>
<p>This patch updates the docs for adding a
<a class="reference external" href="https://www.conventionalcommits.org">https://www.conventionalcommits.org</a> reference</p>
</li>
</ul>
</section>
<section id="id54">
<h3>Features<a class="headerlink" href="#id54" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Add fixed mac address to the external interface. [BK, Carlos Camacho]</p>
<p>This patch adds support for adding a fixed mac
address to the external interface in the service node.</p>
</li>
<li><p>Include submariner container image build deployments. [Carlos Camacho]</p>
<p>This patch adds a PoC for building the container
images for the submariner-operator repo based on a PR.</p>
</li>
<li><p>Enable the container registry by default. [Carlos Camacho]</p>
<p>This patch synchronize the remote registry with the local
registry instance for the current supported Kubernetes
distributions.</p>
</li>
<li><p>Include a local disconnected registry. [Carlos Camacho]</p>
<p>This patch enables the ability to use
a disconnected local container image
registry to speed up the deployments.</p>
</li>
<li><p>Add vcpus configurable for okd bootstrap. [cgoguyer]</p></li>
<li><p>Make vcpus configurable. [cgoguyer]</p></li>
<li><p>Make globalnet configurable. [Carlos Camacho]</p>
<p>This patch adds a new role variable to make
globalnet optinal.</p>
</li>
<li><p>Use fqdn in cluster definition. [Carlos Camacho]</p>
<p>This patch introduces the FQDN usage in the Ubuntu based
clusters, also, triggers cloud-init in every node after the
initial package update.</p>
</li>
<li><p>Include submariner job. [Carlos Camacho]</p>
<p>This patch adds the submariner job.</p>
</li>
<li><p>Include submariner playbook. [Carlos Camacho]</p>
<p>This patch includes the Ansible
automation to connect two KubeInit
clusters with OKD and RKE.</p>
</li>
<li><p>Include a commitlint check. [Carlos Camacho]</p>
<p>This patch adds a commitlint check for
every pull request.</p>
</li>
<li><p>Include submariner and registry roles. [Carlos Camacho]</p>
<p>This patch adds the skeleton of the new roles to be integrated</p>
</li>
</ul>
</section>
<section id="id55">
<h3>Fixes<a class="headerlink" href="#id55" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Include –image-override in the submariner playbook. [Carlos Camacho]</p>
<p>This patch makes fully usable the submariner job and the
CI deployment.</p>
</li>
<li><p>Adjust ci job variables and insecure registries. [Carlos Camacho]</p>
<p>This patch fixes some CI job variables not validated
properly and the RKE insecure registry deployment.</p>
</li>
<li><p>Appends okd pullsecret to disconnected install. [Carlos Camacho]</p>
<p>This patch appends the disconnected install auth token
to the pullsecrets variable so its added to the pullSecret
install-config variable when deploying the OKD cluster.</p>
</li>
<li><p>Stop install on CentOS7. [Juan Badia Payno]</p></li>
<li><p>Solve masquerade issues. [Carlos Camacho]</p>
<p>This patch solves some masquerading issues in the hypervisor.</p>
</li>
<li><p>Adjust subctl commands. [Carlos Camacho]</p>
<p>This patch adjust both broker and secondary
cluster deployment.</p>
</li>
<li><p>Include no-label and remove comment from script. [Carlos Camacho]</p>
<p>This patch makes the join cluster command non interactive.
Also removes some comments in the scrips first line.</p>
</li>
<li><p>Adjust subctl commands. [Carlos Camacho]</p>
<p>This patch adjust both broker and secondary
cluster deployment.</p>
</li>
<li><p>Swapped variable names within kubeinit_okd_dependencies. [Bilal
Khoukhi]</p>
<p>Swaps the variables within kubeinit_okd_dependencies.
Client was given the Installer’s URL, and vice versa.</p>
</li>
<li><p>Move from virt-resize to qemu-img resize. [Carlos Camacho]</p>
<p>Current libguestfs 1.40.2 fails with
virt-resize: error: libguestfs error: f2fs: unknown group</p>
</li>
<li><p>Fix permalinks in theme. [Carlos Camacho]</p></li>
</ul>
</section>
<section id="id56">
<h3>Refactor<a class="headerlink" href="#id56" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Move auth pullsecret as a role variable. [Carlos Camacho]</p>
<p>This change moves the pullsecret JSON data in
the OKD role as a variable.</p>
</li>
<li><p>Code split. [Carlos Camacho]</p>
<p>This patch organizes better the
template configs for deploying okd and rke.</p>
</li>
<li><p>Add regexp for changelog. [Carlos Camacho]</p>
<p>This adds the correct regular expressions for the
changelog.</p>
</li>
</ul>
</section>
</section>
<section id="v0-5-7-release-date-2020-10-21">
<h2>v0.5.7 - Release date: 2020-10-21<a class="headerlink" href="#v0-5-7-release-date-2020-10-21" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Prune changelog, add job dependency, and release. [Carlos Camacho]</p></li>
</ul>
</section>
<section id="v0-5-6-release-date-2020-10-21">
<h2>v0.5.6 - Release date: 2020-10-21<a class="headerlink" href="#v0-5-6-release-date-2020-10-21" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fetch all history. [Carlos Camacho]</p></li>
</ul>
</section>
<section id="v0-5-4-release-date-2020-10-21">
<h2>v0.5.4 - Release date: 2020-10-21<a class="headerlink" href="#v0-5-4-release-date-2020-10-21" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Build with changelog. [Carlos Camacho]</p>
<p>This patch renders the buildlog and
creates automatically the project’s first release</p>
</li>
<li><p>Update jobs and render first GH release. [Carlos Camacho]</p></li>
<li><p>Pass env var. [Carlos Camacho]</p></li>
<li><p>Update script. [Carlos Camacho]</p></li>
<li><p>Auto release. [Carlos Camacho]</p></li>
<li><p>Release to galaxy. [Carlos Camacho]</p></li>
<li><p>Bad. [Carlos Camacho]</p></li>
<li><p>Test. [Carlos Camacho]</p></li>
<li><p>Test. [Carlos Camacho]</p></li>
<li><p>Test job. [Carlos Camacho]</p></li>
<li><p>Fix bundle. [Carlos Camacho]</p></li>
<li><p>Deploy cdk 3 master nodes. [Carlos Camacho]</p></li>
<li><p>Fix report path. [Carlos Camacho]</p></li>
<li><p>Podman to docker. [Carlos Camacho]</p></li>
<li><p>Fix molecule. [Carlos Camacho]</p></li>
<li><p>Clean. [Carlos Camacho]</p></li>
<li><p>Cdk content. [Carlos Camacho]</p></li>
<li><p>New roles. [Carlos Camacho]</p></li>
<li><p>Ubuntu. [Carlos Camacho]</p></li>
<li><p>Upgrade. [Carlos Camacho]</p></li>
<li><p>Add haproxy role. [Carlos Camacho]</p></li>
<li><p>Split bind. [Carlos Camacho]</p></li>
<li><p>Split nfs. [Carlos Camacho]</p></li>
<li><p>Include apache role. [Carlos Camacho]</p></li>
<li><p>Ha k8s. [Carlos Camacho]</p></li>
<li><p>Include raw k8s. [Carlos Camacho]</p></li>
<li><p>Include stale job. [Carlos Camacho]</p></li>
<li><p>Include ci envs. [Carlos Camacho]</p></li>
<li><p>Allow multiple clusters per host. [Carlos Camacho]</p></li>
<li><p>Rem bootstrap node. [Carlos Camacho]</p></li>
<li><p>Match PV-PVC. [Carlos Camacho]</p></li>
<li><p>Slides. [Carlos Camacho]</p></li>
<li><p>Add firewalld rules. [Carlos Camacho]</p></li>
<li><p>From container. [Carlos Camacho]</p></li>
<li><p>Add dockerfile. [Carlos Camacho]</p></li>
<li><p>Cleanup. [Carlos Camacho]</p></li>
<li><p>Roles refactor. [Carlos Camacho]</p></li>
<li><p>Partial organization. [Carlos Camacho]</p></li>
<li><p>Include readme in docs. [Carlos Camacho]</p></li>
<li><p>Update README. [Carlos Camacho]</p></li>
<li><p>Add manifests for day 1 autoapprover. [Yolanda Robla]</p></li>
<li><p>Add modifications for rhcos download. [Yolanda Robla]</p></li>
<li><p>Add changes to move to 4.6 and full iso. [Yolanda Robla]</p></li>
<li><p>Changes for using new full ISO image. [Yolanda Robla]</p></li>
<li><p>Changes needed for 4.6 and customizing iso. [Yolanda Robla]</p></li>
<li><p>Add new script to prepare iso for offline install. [Yolanda Robla]</p></li>
<li><p>Add pipeline to deploy a cluster. [Yolanda Robla]</p></li>
<li><p>Add fixes for ignition configuration. [Yolanda Robla]</p></li>
<li><p>Add login command to produce image. [Yolanda Robla]</p></li>
<li><p>Add fixes for libvirt dns. [Yolanda Robla]</p></li>
<li><p>Add ci for building image. [Yolanda Robla]</p></li>
<li><p>Add modifications for local dns. [Yolanda Robla]</p></li>
<li><p>Add README.md file. [Yolanda Robla]</p></li>
<li><p>Remove inventory/hosts file. [Yolanda Robla]</p></li>
<li><p>Upload sample inventory.hosts with all settings. [Yolanda Robla]</p></li>
<li><p>Add fixes for worker vms. [Yolanda Robla]</p></li>
<li><p>Add new changes for bootstrap. [Yolanda Robla]</p></li>
<li><p>Add fixes to create addresses for hosts. [Yolanda Robla]</p></li>
<li><p>Add changes for iso install. [Yolanda Robla]</p></li>
<li><p>Add changes in coreos installer service. [Yolanda Robla]</p></li>
<li><p>Add management of bootstrap vm. [Yolanda Robla]</p></li>
<li><p>Add new task to prepare the isos to be installed. [Yolanda Robla]</p></li>
<li><p>Add tasks for generating ignition files. [Yolanda Robla]</p></li>
<li><p>Add new changes for pulling live cd. [Yolanda Robla]</p></li>
<li><p>Add steps for configuring installer. [Yolanda Robla]</p></li>
<li><p>New changes for preparing install. [Yolanda Robla]</p></li>
<li><p>Add initial preparation tasks. [Yolanda Robla]</p></li>
<li><p>Initial commit. [Yolanda Robla]</p></li>
<li><p>Add collection. [Carlos Camacho]</p></li>
<li><p>Fix lints. [Carlos Camacho]</p></li>
<li><p>Include CI scripts. [Carlos Camacho]</p></li>
<li><p>Fix logo link. [Carlos Camacho]</p></li>
<li><p>Add sanity galaxy check. [Carlos Camacho]</p></li>
<li><p>Tetst Galaxy automation. [Carlos Camacho]</p></li>
<li><p>Update galaxy file. [Carlos Camacho]</p></li>
<li><p>Reduce RAM reqs and add RAM validation. [Carlos Camacho]</p></li>
<li><p>Add tool to publish to Galaxy. [Carlos Camacho]</p></li>
<li><p>Fix vars prefix. [Carlos Camacho]</p></li>
<li><p>Include validations role. [Carlos Camacho]</p></li>
<li><p>Replace pending old ref. [Carlos Camacho]</p></li>
<li><p>Replace ccamacho with Kubeinit where applicable. [Glenn Marcy]</p></li>
<li><p>Add HowTo’s to readme. [Carlos Camacho]</p></li>
<li><p>Adjust external variable. [Carlos Camacho]</p></li>
<li><p>Allow DNS queries for external view. [Carlos Camacho]</p></li>
<li><p>WIP external interface, multizone bind, and remove template in
conditionals. [Carlos Camacho]</p></li>
<li><p>Allow Debian/Ubuntu hosts + Kubevirt. [Carlos Camacho]</p></li>
<li><p>Cleanup KubeVirt role. [Carlos Camacho]</p></li>
<li><p>Add Kubevirt support. [Carlos Camacho]</p></li>
<li><p>Fix lint. [Carlos Camacho]</p></li>
<li><p>Add kubevirt steps. [Carlos Camacho]</p></li>
<li><p>Replace hyphens by underscore. [Carlos Camacho]</p></li>
<li><p>Kubevirt changes. [Carlos Camacho]</p></li>
<li><p>Add kubevirt WIP. [Carlos Camacho]</p></li>
<li><p>Update logo. [Carlos Camacho]</p></li>
<li><p>Minor fixes. [Carlos Camacho]</p></li>
<li><p>Fix lint nits. [Carlos Camacho]</p></li>
<li><p>Testing basic molecule coverage. [Carlos Camacho]</p></li>
<li><p>REadme fix. [Carlos Camacho]</p></li>
<li><p>Include html badges. [Carlos Camacho]</p></li>
<li><p>Include badges in readme. [Carlos Camacho]</p></li>
<li><p>Install ansible in docs build. [Carlos Camacho]</p></li>
<li><p>Include render autodoc. [Carlos Camacho]</p></li>
<li><p>Force push pages. [Carlos Camacho]</p></li>
<li><p>Link docs. [Carlos Camacho]</p></li>
<li><p>Add symlink. [Carlos Camacho]</p></li>
<li><p>Create docs. [Carlos Camacho]</p></li>
<li><p>Print final debug information. [Carlos Camacho]</p></li>
<li><p>Get some final details. [Carlos Camacho]</p></li>
<li><p>Adjust ignition files. [Carlos Camacho]</p></li>
<li><p>Fix nits. [Carlos Camacho]</p></li>
<li><p>Nits. [Carlos Camacho]</p></li>
<li><p>REsize disk. [Carlos Camacho]</p></li>
<li><p>Cleanup. [Carlos Camacho]</p></li>
<li><p>Deploy correctly okd4.5. [Carlos Camacho]</p></li>
<li><p>Clean. [Carlos Camacho]</p></li>
<li><p>Cleanup. [Carlos Camacho]</p></li>
<li><p>Cleanup. [Carlos Camacho]</p></li>
<li><p>Okd4.5. [Carlos Camacho]</p></li>
<li><p>Fixed ip and workaround. [Carlos Camacho]</p></li>
<li><p>Include ifc renaming. [Carlos Camacho]</p></li>
<li><p>Include OKD draft. [Carlos Camacho]</p></li>
<li><p>Fix deplot crio 1.18 and kubeadm 1.18 in centos 8. [Carlos Camacho]</p></li>
<li><p>Update tasks. [Carlos Camacho]</p></li>
<li><p>Passing lint. [Carlos Camacho]</p></li>
<li><p>Update deps. [Carlos Camacho]</p></li>
<li><p>Lint cleanup. [Carlos Camacho]</p></li>
<li><p>Readme. [Carlos Camacho]</p></li>
<li><p>New readme. [Carlos Camacho]</p></li>
<li><p>Group linters. [Carlos Camacho]</p></li>
<li><p>Yamllint. [Carlos Camacho]</p></li>
<li><p>Rename job. [Carlos Camacho]</p></li>
<li><p>Move to cri-o and centos 8. [Carlos Camacho]</p></li>
<li><p>Push howto and minor templates fixes. [Carlos Camacho]</p></li>
<li><p>Adjust VM templates. [Carlos Camacho]</p></li>
<li><p>Adjust ram and hypervisor IP. [Carlos Camacho]</p></li>
<li><p>Forgot minor fixes push. [Carlos Camacho]</p></li>
<li><p>Fix templates, first verison done. [Carlos Camacho]</p></li>
<li><p>Clean lint. [Carlos Camacho]</p></li>
<li><p>Comment socond reboot. [Carlos Camacho]</p></li>
<li><p>Fix req file. [Carlos Camacho]</p></li>
<li><p>Ansible execution fixes. [Carlos Camacho]</p></li>
<li><p>Add more fixes. [Carlos Camacho]</p></li>
<li><p>Fix zombi guests. [Carlos Camacho]</p></li>
<li><p>Fix/finish provisioning templates. [Carlos Camacho]</p></li>
<li><p>Introduce Ansible automation. [Carlos Camacho]</p></li>
<li><p>Initial commit. [Carlos Camacho]</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="supporters.html" class="btn btn-neutral float-left" title="Supporters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="notice.html" class="btn btn-neutral float-right" title="Notice" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright kubeinit contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>