digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_ccdac70e [label="Play: Initial setup (1)" color="#428a70" fontcolor="#ffffff" id=play_ccdac70e shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_ccdac70e [label="1 " color="#428a70" fontcolor="#428a70" id=edge_5f9ef66a labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_5b084bc9 [label="[role] Read podman secrets if running from the container" color="#428a70" id=role_5b084bc9 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_774c6b91 [label="[role] task-gather-facts" color="#428a70" id=role_774c6b91 tooltip="task-gather-facts"]
		role_774c6b91 -> role_5b084bc9 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#428a70" fontcolor="#428a70" id=edge_6d11916b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_bf497637 [label="[role] Read podman secrets if running from the container" color="#428a70" id=role_bf497637 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_8b970a85 [label="[role] task-prepare-hypervisors" color="#428a70" id=role_8b970a85 tooltip="task-prepare-hypervisors"]
		role_8b970a85 -> role_bf497637 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#428a70" fontcolor="#428a70" id=edge_df23e101 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_ccdac70e -> block_8cf153e4 [label=1 color="#428a70" fontcolor="#428a70" id=edge_3c7016a6 labeltooltip=1 tooltip=1]
		subgraph cluster_block_8cf153e4 {
			block_8cf153e4 [label="[block] Gather facts about the deployment environment" color="#428a70" id=block_8cf153e4 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_8cf153e4 -> role_774c6b91 [label="1 " color="#428a70" fontcolor="#428a70" id=edge_c8ca9dd4 labeltooltip="1 " tooltip="1 "]
		}
		play_ccdac70e -> block_c50955de [label=2 color="#428a70" fontcolor="#428a70" id=edge_c799434d labeltooltip=2 tooltip=2]
		subgraph cluster_block_c50955de {
			block_c50955de [label="[block] Prepare the hypervisors" color="#428a70" id=block_c50955de labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_c50955de -> role_8b970a85 [label="1 " color="#428a70" fontcolor="#428a70" id=edge_cde85db4 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_4d7fdc31 [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#c69e06" fontcolor="#ffffff" id=play_4d7fdc31 shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_4d7fdc31 [label="2 " color="#c69e06" fontcolor="#c69e06" id=edge_0027b3a8 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_8ccca226 [label="[role] Provision the libvirt services on the hypervisor" color="#c69e06" id=role_8ccca226 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_8715d4d7 [label="[role] Prepare each hypervisor in the deployment" color="#c69e06" id=role_8715d4d7 tooltip="Prepare each hypervisor in the deployment"]
		role_8715d4d7 -> role_8ccca226 [label="1 " color="#c69e06" fontcolor="#c69e06" id=edge_ba359448 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_4d7fdc31 -> block_18ecdc31 [label=1 color="#c69e06" fontcolor="#c69e06" id=edge_4949d15d labeltooltip=1 tooltip=1]
		subgraph cluster_block_18ecdc31 {
			block_18ecdc31 [label="[block] Prepare individual hypervisors" color="#c69e06" id=block_18ecdc31 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_18ecdc31 -> role_8715d4d7 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#c69e06" fontcolor="#c69e06" id=edge_9d06fac8 labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_2c8d9dd9 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#7516b6" fontcolor="#ffffff" id=play_2c8d9dd9 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_2c8d9dd9 [label="3 " color="#7516b6" fontcolor="#7516b6" id=edge_3374265d labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_839e2fdd [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_839e2fdd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_0470ea0d [label="[role] task-prepare-environment" color="#7516b6" id=role_0470ea0d tooltip="task-prepare-environment"]
		role_0470ea0d -> role_839e2fdd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_1dbf0162 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
		task_658e4a2a [label="kubeinit.kubeinit.kubeinit_prepare : Define kubeinit_facts_hostvars" color="#7516b6" id=task_658e4a2a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Define kubeinit_facts_hostvars"]
		role_0470ea0d -> task_658e4a2a [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_a2a51970 labeltooltip="2 " tooltip="2 "]
		task_94a77a22 [label="kubeinit.kubeinit.kubeinit_prepare : Define cluster fact names needed to prepare groups" color="#7516b6" id=task_94a77a22 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Define cluster fact names needed to prepare groups"]
		role_0470ea0d -> task_94a77a22 [label="3 " color="#7516b6" fontcolor="#7516b6" id=edge_15b29cb2 labeltooltip="3 " tooltip="3 "]
		task_833c90ea [label="kubeinit.kubeinit.kubeinit_prepare : Add all controller nodes to the all_controller_nodes group" color="#7516b6" id=task_833c90ea shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all controller nodes to the all_controller_nodes group"]
		role_0470ea0d -> task_833c90ea [label="4 " color="#7516b6" fontcolor="#7516b6" id=edge_596be2fd labeltooltip="4 " tooltip="4 "]
		task_ad087285 [label="kubeinit.kubeinit.kubeinit_prepare : Add all compute nodes to the all_compute_nodes group" color="#7516b6" id=task_ad087285 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all compute nodes to the all_compute_nodes group"]
		role_0470ea0d -> task_ad087285 [label="5 " color="#7516b6" fontcolor="#7516b6" id=edge_d2f8b372 labeltooltip="5 " tooltip="5 "]
		task_ebadb9e3 [label="kubeinit.kubeinit.kubeinit_prepare : Add all controller and compute nodes to the all_cluster_nodes group" color="#7516b6" id=task_ebadb9e3 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all controller and compute nodes to the all_cluster_nodes group"]
		role_0470ea0d -> task_ebadb9e3 [label="6 " color="#7516b6" fontcolor="#7516b6" id=edge_5e70f54c labeltooltip="6 " tooltip="6 "]
		task_29f7f96f [label="kubeinit.kubeinit.kubeinit_prepare : Add any extra cluster vm guest nodes to the all_extra_nodes group" color="#7516b6" id=task_29f7f96f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add any extra cluster vm guest nodes to the all_extra_nodes group"]
		role_0470ea0d -> task_29f7f96f [label="7 [when: kubeinit_cluster_distro in hostvars[item].distro]" color="#7516b6" fontcolor="#7516b6" id=edge_d0288f34 labeltooltip="7 [when: kubeinit_cluster_distro in hostvars[item].distro]" tooltip="7 [when: kubeinit_cluster_distro in hostvars[item].distro]"]
		task_0a492e36 [label="kubeinit.kubeinit.kubeinit_prepare : Collect all cluster node hypervisors" color="#7516b6" id=task_0a492e36 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Collect all cluster node hypervisors"]
		role_0470ea0d -> task_0a492e36 [label="8 " color="#7516b6" fontcolor="#7516b6" id=edge_0b7286b3 labeltooltip="8 " tooltip="8 "]
		task_bc294a45 [label="kubeinit.kubeinit.kubeinit_prepare : Show the before and after values of the hypervisors fact" color="#7516b6" id=task_bc294a45 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Show the before and after values of the hypervisors fact"]
		role_0470ea0d -> task_bc294a45 [label="9 " color="#7516b6" fontcolor="#7516b6" id=edge_e624fcca labeltooltip="9 " tooltip="9 "]
		task_02129320 [label="kubeinit.kubeinit.kubeinit_prepare : Add all service nodes to the all_service_nodes group" color="#7516b6" id=task_02129320 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all service nodes to the all_service_nodes group"]
		role_0470ea0d -> task_02129320 [label="10 " color="#7516b6" fontcolor="#7516b6" id=edge_3aa5408b labeltooltip="10 " tooltip="10 "]
		task_0778bef5 [label="kubeinit.kubeinit.kubeinit_prepare : Create tuples for each service and each service node providing that service" color="#7516b6" id=task_0778bef5 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Create tuples for each service and each service node providing that service"]
		role_0470ea0d -> task_0778bef5 [label="11 " color="#7516b6" fontcolor="#7516b6" id=edge_41ce27bb labeltooltip="11 " tooltip="11 "]
		task_29f9996b [label="kubeinit.kubeinit.kubeinit_prepare : Combine those tuples into dict of services and nodes providing that service" color="#7516b6" id=task_29f9996b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Combine those tuples into dict of services and nodes providing that service"]
		role_0470ea0d -> task_29f9996b [label="12 " color="#7516b6" fontcolor="#7516b6" id=edge_4430df43 labeltooltip="12 " tooltip="12 "]
		task_07774fbb [label="kubeinit.kubeinit.kubeinit_prepare : Check for any services being provided on more than one service node" color="#7516b6" id=task_07774fbb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Check for any services being provided on more than one service node"]
		role_0470ea0d -> task_07774fbb [label="13 [when: item.value | length > 1]" color="#7516b6" fontcolor="#7516b6" id=edge_3d2cd4ff labeltooltip="13 [when: item.value | length > 1]" tooltip="13 [when: item.value | length > 1]"]
		task_cc23b057 [label="kubeinit.kubeinit.kubeinit_prepare : Use first service node if there is no assigned provision service node" color="#7516b6" id=task_cc23b057 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Use first service node if there is no assigned provision service node"]
		role_0470ea0d -> task_cc23b057 [label="14 [when: 'provision' not in cluster_services_dict]" color="#7516b6" fontcolor="#7516b6" id=edge_9a6fe68f labeltooltip="14 [when: 'provision' not in cluster_services_dict]" tooltip="14 [when: 'provision' not in cluster_services_dict]"]
		task_fb47528c [label="kubeinit.kubeinit.kubeinit_prepare : Flatten dictionary values into final form" color="#7516b6" id=task_fb47528c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Flatten dictionary values into final form"]
		role_0470ea0d -> task_fb47528c [label="15 " color="#7516b6" fontcolor="#7516b6" id=edge_e9c5b65b labeltooltip="15 " tooltip="15 "]
		task_1f866080 [label="kubeinit.kubeinit.kubeinit_prepare : Check that the dns server address in the inventory matches the bind service node" color="#7516b6" id=task_1f866080 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Check that the dns server address in the inventory matches the bind service node"]
		role_0470ea0d -> task_1f866080 [label="16 [when: 'bind' in all_cluster_services and kubeinit_cluster_nameserver != hostvars[all_cluster_services['bind']].ansible_host]" color="#7516b6" fontcolor="#7516b6" id=edge_6d25227f labeltooltip="16 [when: 'bind' in all_cluster_services and kubeinit_cluster_nameserver != hostvars[all_cluster_services['bind']].ansible_host]" tooltip="16 [when: 'bind' in all_cluster_services and kubeinit_cluster_nameserver != hostvars[all_cluster_services['bind']].ansible_host]"]
		task_31825c13 [label="kubeinit.kubeinit.kubeinit_prepare : Set all services cluster fact" color="#7516b6" id=task_31825c13 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set all services cluster fact"]
		role_0470ea0d -> task_31825c13 [label="17 " color="#7516b6" fontcolor="#7516b6" id=edge_c60479f4 labeltooltip="17 " tooltip="17 "]
		task_84c1877c [label="kubeinit.kubeinit.kubeinit_prepare : Add all service and cluster nodes to the all_nodes group" color="#7516b6" id=task_84c1877c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all service and cluster nodes to the all_nodes group"]
		role_0470ea0d -> task_84c1877c [label="18 " color="#7516b6" fontcolor="#7516b6" id=edge_66fc623c labeltooltip="18 " tooltip="18 "]
		task_739708f6 [label="kubeinit.kubeinit.kubeinit_prepare : Add a default entry for the first hypervisor if there are no bastion_host members" color="#7516b6" id=task_739708f6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add a default entry for the first hypervisor if there are no bastion_host members"]
		role_0470ea0d -> task_739708f6 [label="19 [when: ('bastion_host' not in groups) or ((groups['bastion_host'] | list | length) == 0)]" color="#7516b6" fontcolor="#7516b6" id=edge_d06a5495 labeltooltip="19 [when: ('bastion_host' not in groups) or ((groups['bastion_host'] | list | length) == 0)]" tooltip="19 [when: ('bastion_host' not in groups) or ((groups['bastion_host'] | list | length) == 0)]"]
		task_48ebbcae [label="kubeinit.kubeinit.kubeinit_prepare : Add ansible_host for bastion_host if not defined" color="#7516b6" id=task_48ebbcae shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add ansible_host for bastion_host if not defined"]
		role_0470ea0d -> task_48ebbcae [label="20 [when: hostvars[kubeinit_cluster_bastion_name].ansible_host is not defined]" color="#7516b6" fontcolor="#7516b6" id=edge_9b198d3b labeltooltip="20 [when: hostvars[kubeinit_cluster_bastion_name].ansible_host is not defined]" tooltip="20 [when: hostvars[kubeinit_cluster_bastion_name].ansible_host is not defined]"]
		task_6498b952 [label="kubeinit.kubeinit.kubeinit_prepare : Add target for bastion_host if not defined" color="#7516b6" id=task_6498b952 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add target for bastion_host if not defined"]
		role_0470ea0d -> task_6498b952 [label="21 [when: hostvars[kubeinit_cluster_bastion_name].target is not defined]" color="#7516b6" fontcolor="#7516b6" id=edge_a78ef1c8 labeltooltip="21 [when: hostvars[kubeinit_cluster_bastion_name].target is not defined]" tooltip="21 [when: hostvars[kubeinit_cluster_bastion_name].target is not defined]"]
		task_d9c74d9c [label="kubeinit.kubeinit.kubeinit_prepare : Add a default entry for the first hypervisor if there are no ovn_central_host members" color="#7516b6" id=task_d9c74d9c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add a default entry for the first hypervisor if there are no ovn_central_host members"]
		role_0470ea0d -> task_d9c74d9c [label="22 [when: ('ovn_central_host' not in groups) or ((groups['ovn_central_host'] | list | length) == 0)]" color="#7516b6" fontcolor="#7516b6" id=edge_20583868 labeltooltip="22 [when: ('ovn_central_host' not in groups) or ((groups['ovn_central_host'] | list | length) == 0)]" tooltip="22 [when: ('ovn_central_host' not in groups) or ((groups['ovn_central_host'] | list | length) == 0)]"]
		task_1d0e1413 [label="kubeinit.kubeinit.kubeinit_prepare : Add ansible_host for ovn_central_host" color="#7516b6" id=task_1d0e1413 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add ansible_host for ovn_central_host"]
		role_0470ea0d -> task_1d0e1413 [label="23 " color="#7516b6" fontcolor="#7516b6" id=edge_6673e25a labeltooltip="23 " tooltip="23 "]
		task_80c8ba54 [label="kubeinit.kubeinit.kubeinit_prepare : Add all cluster hypervisors to the all_hosts group" color="#7516b6" id=task_80c8ba54 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all cluster hypervisors to the all_hosts group"]
		role_0470ea0d -> task_80c8ba54 [label="24 [when: item in hostvars[kubeinit_cluster_ovn_central_name].target or item in hostvars[kubeinit_cluster_facts_name].hypervisors
]" color="#7516b6" fontcolor="#7516b6" id=edge_a9e328ec labeltooltip="24 [when: item in hostvars[kubeinit_cluster_ovn_central_name].target or item in hostvars[kubeinit_cluster_facts_name].hypervisors
]" tooltip="24 [when: item in hostvars[kubeinit_cluster_ovn_central_name].target or item in hostvars[kubeinit_cluster_facts_name].hypervisors
]"]
		task_be54091b [label="kubeinit.kubeinit.kubeinit_prepare : Add all hosts to the all_ovn_hosts group" color="#7516b6" id=task_be54091b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all hosts to the all_ovn_hosts group"]
		role_0470ea0d -> task_be54091b [label="25 " color="#7516b6" fontcolor="#7516b6" id=edge_c3e234d2 labeltooltip="25 " tooltip="25 "]
		task_4ef422bc [label="kubeinit.kubeinit.kubeinit_prepare : Collect all of the hypervisor running vms into hv/vm tuples" color="#7516b6" id=task_4ef422bc shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Collect all of the hypervisor running vms into hv/vm tuples"]
		role_0470ea0d -> task_4ef422bc [label="26 " color="#7516b6" fontcolor="#7516b6" id=edge_7186c569 labeltooltip="26 " tooltip="26 "]
		task_3b65de41 [label="kubeinit.kubeinit.kubeinit_prepare : Set all running vms cluster fact" color="#7516b6" id=task_3b65de41 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set all running vms cluster fact"]
		role_0470ea0d -> task_3b65de41 [label="27 " color="#7516b6" fontcolor="#7516b6" id=edge_01c230f5 labeltooltip="27 " tooltip="27 "]
		task_03c58361 [label="kubeinit.kubeinit.kubeinit_prepare : Collect all of the localhost and hypervisor authorized keys into authorized_keys list" color="#7516b6" id=task_03c58361 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Collect all of the localhost and hypervisor authorized keys into authorized_keys list"]
		role_0470ea0d -> task_03c58361 [label="28 " color="#7516b6" fontcolor="#7516b6" id=edge_0c80813b labeltooltip="28 " tooltip="28 "]
		task_0acc082e [label="kubeinit.kubeinit.kubeinit_prepare : Set all hypervisor authorized keys cluster fact" color="#7516b6" id=task_0acc082e shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set all hypervisor authorized keys cluster fact"]
		role_0470ea0d -> task_0acc082e [label="29 " color="#7516b6" fontcolor="#7516b6" id=edge_3f6c4915 labeltooltip="29 " tooltip="29 "]
		task_6daf0929 [label="kubeinit.kubeinit.kubeinit_prepare : Add services guest and cluster nodes to the all_guest_vms group" color="#7516b6" id=task_6daf0929 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add services guest and cluster nodes to the all_guest_vms group"]
		role_0470ea0d -> task_6daf0929 [label="30 [when: hostvars[item].type == 'virtual']" color="#7516b6" fontcolor="#7516b6" id=edge_9ee5ed29 labeltooltip="30 [when: hostvars[item].type == 'virtual']" tooltip="30 [when: hostvars[item].type == 'virtual']"]
		task_4a1a1c7a [label="kubeinit.kubeinit.kubeinit_prepare : Collect all of the node aliases" color="#7516b6" id=task_4a1a1c7a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Collect all of the node aliases"]
		role_0470ea0d -> task_4a1a1c7a [label="31 " color="#7516b6" fontcolor="#7516b6" id=edge_01378a2b labeltooltip="31 " tooltip="31 "]
		task_19a89b14 [label="kubeinit.kubeinit.kubeinit_prepare : Set all node aliases cluster fact" color="#7516b6" id=task_19a89b14 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set all node aliases cluster fact"]
		role_0470ea0d -> task_19a89b14 [label="32 " color="#7516b6" fontcolor="#7516b6" id=edge_18272ceb labeltooltip="32 " tooltip="32 "]
		task_e80bf446 [label="kubeinit.kubeinit.kubeinit_prepare : Define group facts" color="#7516b6" id=task_e80bf446 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Define group facts"]
		role_0470ea0d -> task_e80bf446 [label="33 " color="#7516b6" fontcolor="#7516b6" id=edge_6d3f3021 labeltooltip="33 " tooltip="33 "]
		task_abf2db83 [label="kubeinit.kubeinit.kubeinit_prepare : Install podman if required" color="#7516b6" id=task_abf2db83 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Install podman if required"]
		role_0470ea0d -> task_abf2db83 [label="34 [when: not hostvars['localhost'].podman_is_installed]" color="#7516b6" fontcolor="#7516b6" id=edge_9de53a5b labeltooltip="34 [when: not hostvars['localhost'].podman_is_installed]" tooltip="34 [when: not hostvars['localhost'].podman_is_installed]"]
		task_59d0985b [label="kubeinit.kubeinit.kubeinit_prepare : Define service node facts" color="#7516b6" id=task_59d0985b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Define service node facts"]
		role_0470ea0d -> task_59d0985b [label="35 " color="#7516b6" fontcolor="#7516b6" id=edge_b0fe5660 labeltooltip="35 " tooltip="35 "]
		task_011a812d [label="kubeinit.kubeinit.kubeinit_prepare : Generate an OpenSSH keypair bastion host" color="#7516b6" id=task_011a812d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Generate an OpenSSH keypair bastion host"]
		role_0470ea0d -> task_011a812d [label="36 [when: kubeinit_bastion_host not in groups['all_hosts']]" color="#7516b6" fontcolor="#7516b6" id=edge_68f54b1b labeltooltip="36 [when: kubeinit_bastion_host not in groups['all_hosts']]" tooltip="36 [when: kubeinit_bastion_host not in groups['all_hosts']]"]
		task_207c109f [label="kubeinit.kubeinit.kubeinit_prepare : Set authorized_key hostvar for bastion host" color="#7516b6" id=task_207c109f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set authorized_key hostvar for bastion host"]
		role_0470ea0d -> task_207c109f [label="37 [when: kubeinit_bastion_host not in groups['all_hosts']]" color="#7516b6" fontcolor="#7516b6" id=edge_191c3add labeltooltip="37 [when: kubeinit_bastion_host not in groups['all_hosts']]" tooltip="37 [when: kubeinit_bastion_host not in groups['all_hosts']]"]
		task_7513c99d [label="kubeinit.kubeinit.kubeinit_prepare : Add bastion host authorized key to cluster authorized_keys" color="#7516b6" id=task_7513c99d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add bastion host authorized key to cluster authorized_keys"]
		role_0470ea0d -> task_7513c99d [label="38 [when: kubeinit_bastion_host not in groups['all_hosts']]" color="#7516b6" fontcolor="#7516b6" id=edge_a9ba156d labeltooltip="38 [when: kubeinit_bastion_host not in groups['all_hosts']]" tooltip="38 [when: kubeinit_bastion_host not in groups['all_hosts']]"]
		task_d1f6d37f [label="kubeinit.kubeinit.kubeinit_prepare : Set all cluster hypervisors fact" color="#7516b6" id=task_d1f6d37f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Set all cluster hypervisors fact"]
		role_0470ea0d -> task_d1f6d37f [label="39 [when: kubeinit_bastion_host not in groups['all_hosts']]" color="#7516b6" fontcolor="#7516b6" id=edge_67653610 labeltooltip="39 [when: kubeinit_bastion_host not in groups['all_hosts']]" tooltip="39 [when: kubeinit_bastion_host not in groups['all_hosts']]"]
		task_2e225bb4 [label="kubeinit.kubeinit.kubeinit_prepare : Update kubeinit_cluster_hostvars" color="#7516b6" id=task_2e225bb4 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Update kubeinit_cluster_hostvars"]
		role_0470ea0d -> task_2e225bb4 [label="40 [when: kubeinit_bastion_host not in groups['all_hosts']]" color="#7516b6" fontcolor="#7516b6" id=edge_d2dd08ec labeltooltip="40 [when: kubeinit_bastion_host not in groups['all_hosts']]" tooltip="40 [when: kubeinit_bastion_host not in groups['all_hosts']]"]
		task_4c544453 [label="kubeinit.kubeinit.kubeinit_prepare : Add all cluster authorized keys to all hypervisors" color="#7516b6" id=task_4c544453 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add all cluster authorized keys to all hypervisors"]
		role_0470ea0d -> task_4c544453 [label="41 " color="#7516b6" fontcolor="#7516b6" id=edge_2cb519db labeltooltip="41 " tooltip="41 "]
		task_46c83725 [label="kubeinit.kubeinit.kubeinit_prepare : Define additional host, node and services facts" color="#7516b6" id=task_46c83725 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Define additional host, node and services facts"]
		role_0470ea0d -> task_46c83725 [label="42 " color="#7516b6" fontcolor="#7516b6" id=edge_cb12b23d labeltooltip="42 " tooltip="42 "]
		task_1b82bf2b [label="kubeinit.kubeinit.kubeinit_prepare : Add ssh ProxyCommand option for all nodes" color="#7516b6" id=task_1b82bf2b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_prepare : Add ssh ProxyCommand option for all nodes"]
		role_0470ea0d -> task_1b82bf2b [label="43 " color="#7516b6" fontcolor="#7516b6" id=edge_5e891a78 labeltooltip="43 " tooltip="43 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_498cd8df [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_498cd8df tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_ed2faa0e [label="[role] Prepare environment if not prepared" color="#7516b6" id=role_ed2faa0e tooltip="Prepare environment if not prepared"]
		role_ed2faa0e -> role_498cd8df [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_007842f1 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_31de34dd [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#7516b6" id=role_31de34dd tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_6b58eb3d [label="[role] task-cleanup-hypervisors" color="#7516b6" id=role_6b58eb3d tooltip="task-cleanup-hypervisors"]
		role_6b58eb3d -> role_ed2faa0e [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_0e223ae2 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_6b58eb3d -> role_31de34dd [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_db464b04 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_b7c5c216 [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_b7c5c216 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_5749a658 [label="[role] Prepare environment if not prepared" color="#7516b6" id=role_5749a658 tooltip="Prepare environment if not prepared"]
		role_5749a658 -> role_b7c5c216 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_cb25ec9b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_b19f47b6 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#7516b6" id=role_b19f47b6 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_57cf1718 [label="[role] Cleanup hypervisors if needed" color="#7516b6" id=role_57cf1718 tooltip="Cleanup hypervisors if needed"]
		role_57cf1718 -> role_5749a658 [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_34c70ea6 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_57cf1718 -> role_b19f47b6 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_169d466f labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_e185eb0a [label="[role] task-run-validations" color="#7516b6" id=role_e185eb0a tooltip="task-run-validations"]
		role_e185eb0a -> role_57cf1718 [label="1 [when: not hypervisors_cleaned]" color="#7516b6" fontcolor="#7516b6" id=edge_60cabcb3 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_f1b43db0 [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_f1b43db0 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_500d12bf [label="[role] Prepare environment if not prepared" color="#7516b6" id=role_500d12bf tooltip="Prepare environment if not prepared"]
		role_500d12bf -> role_f1b43db0 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_8fbb6d4e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_79fa1209 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#7516b6" id=role_79fa1209 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_0b72b729 [label="[role] Cleanup hypervisors if needed" color="#7516b6" id=role_0b72b729 tooltip="Cleanup hypervisors if needed"]
		role_0b72b729 -> role_500d12bf [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_84edae82 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0b72b729 -> role_79fa1209 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_86d8fd45 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_f5ac9218 [label="[role] task-create-network" color="#7516b6" id=role_f5ac9218 tooltip="task-create-network"]
		role_f5ac9218 -> role_0b72b729 [label="1 [when: not hypervisors_cleaned]" color="#7516b6" fontcolor="#7516b6" id=edge_37de7303 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_3d948d05 [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_3d948d05 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_9b21ffe1 [label="[role] Prepare environment if not prepared" color="#7516b6" id=role_9b21ffe1 tooltip="Prepare environment if not prepared"]
		role_9b21ffe1 -> role_3d948d05 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_d183563c labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_a2b0ede9 [label="[role] Prepare podman" color="#7516b6" id=role_a2b0ede9 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_029b0a24 [label="[role] Create systemd service for podman container" color="#7516b6" id=role_029b0a24 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_0e26fa9a [label="[role] Configure Bind" color="#7516b6" id=role_0e26fa9a tooltip="Configure Bind"]
		role_0e26fa9a -> role_029b0a24 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_bb81ada7 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_dcc65b9a [label="[role] Create systemd service for podman container" color="#7516b6" id=role_dcc65b9a tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_ef7fc67b [label="[role] Configure Dnsmasq" color="#7516b6" id=role_ef7fc67b tooltip="Configure Dnsmasq"]
		role_ef7fc67b -> role_dcc65b9a [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_90315133 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_c7adeffe [label="[role] Create systemd service for podman container" color="#7516b6" id=role_c7adeffe tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_a3701427 [label="[role] Configure HAProxy" color="#7516b6" id=role_a3701427 tooltip="Configure HAProxy"]
		role_a3701427 -> role_c7adeffe [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_a5e2995d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_2b085f33 [label="[role] Create systemd service for podman container" color="#7516b6" id=role_2b085f33 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_bba86524 [label="[role] Configure Nexus" color="#7516b6" id=role_bba86524 tooltip="Configure Nexus"]
		role_bba86524 -> role_2b085f33 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_46a66d87 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_b2ff7c12 [label="[role] Create systemd service for podman container" color="#7516b6" id=role_b2ff7c12 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_bb401494 [label="[role] Configure Apache" color="#7516b6" id=role_bb401494 tooltip="Configure Apache"]
		role_bb401494 -> role_b2ff7c12 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_27e1416d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_75698cee [label="[role] Create systemd service for podman container" color="#7516b6" id=role_75698cee tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_df5cafbe [label="[role] Configure a local container image registry" color="#7516b6" id=role_df5cafbe tooltip="Configure a local container image registry"]
		role_df5cafbe -> role_75698cee [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_fa47773b labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_743ec343 [label="[role] task-create-services" color="#7516b6" id=role_743ec343 tooltip="task-create-services"]
		role_743ec343 -> role_9b21ffe1 [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_5d5a6cc8 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_743ec343 -> role_a2b0ede9 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_aff2d0c4 labeltooltip="2 " tooltip="2 "]
		role_743ec343 -> role_0e26fa9a [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_6f39c8ca labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_743ec343 -> role_ef7fc67b [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_13efbcf1 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_743ec343 -> role_a3701427 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_50e47b6d labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_743ec343 -> role_bba86524 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_72391e1b labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_743ec343 -> role_bb401494 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_d7a7ff7e labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_743ec343 -> role_df5cafbe [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#7516b6" fontcolor="#7516b6" id=edge_6945e7e3 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_ff8b56c7 [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_ff8b56c7 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_81b48c2f [label="[role] Prepare environment if needed" color="#7516b6" id=role_81b48c2f tooltip="Prepare environment if needed"]
		role_81b48c2f -> role_ff8b56c7 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_fb638cc0 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_9c9c2540 [label="[role] Gather network and host facts for guest" color="#7516b6" id=role_9c9c2540 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_05f025ae [label="[role] Prepare services if needed" color="#7516b6" id=role_05f025ae tooltip="Prepare services if needed"]
		role_05f025ae -> role_81b48c2f [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_a14de91d labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_05f025ae -> role_9c9c2540 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_ca2f51ad labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_c4fad6fc [label="[role] Create systemd service for podman container" color="#7516b6" id=role_c4fad6fc tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_fbef2164 [label="[role] Gather network and host facts for provision service" color="#7516b6" id=role_fbef2164 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_0d1b7c65 [label="[role] Setup the cluster provision container" color="#7516b6" id=role_0d1b7c65 tooltip="Setup the cluster provision container"]
		role_0d1b7c65 -> role_c4fad6fc [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_b5d28677 labeltooltip="1 " tooltip="1 "]
		role_0d1b7c65 -> role_fbef2164 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_5b20c228 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_99515768 [label="[role] Delegate to the distro role to prepare the cluster" color="#7516b6" id=role_99515768 tooltip="Delegate to the distro role to prepare the cluster"]
		role_99515768 -> role_0d1b7c65 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_57adbbb5 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_c6cb7e0c [label="[role] task-prepare-cluster" color="#7516b6" id=role_c6cb7e0c tooltip="task-prepare-cluster"]
		role_c6cb7e0c -> role_05f025ae [label="1 [when: not services_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_c24c613b labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_c6cb7e0c -> role_99515768 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_f5c4e132 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_7e1f1e18 [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_7e1f1e18 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_e75a2143 [label="[role] Prepare environment if not prepared" color="#7516b6" id=role_e75a2143 tooltip="Prepare environment if not prepared"]
		role_e75a2143 -> role_7e1f1e18 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_a5b45ced labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_c3306b41 [label="[role] task-download-images" color="#7516b6" id=role_c3306b41 tooltip="task-download-images"]
		role_c3306b41 -> role_e75a2143 [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_292aa8ee labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_1764a71b [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_1764a71b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_74292792 [label="[role] Prepare environment if needed" color="#7516b6" id=role_74292792 tooltip="Prepare environment if needed"]
		role_74292792 -> role_1764a71b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_b7d30b3a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_e1dc5dfc [label="[role] Gather network and host facts for guest" color="#7516b6" id=role_e1dc5dfc tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_1cca6e02 [label="[role] Prepare services if needed" color="#7516b6" id=role_1cca6e02 tooltip="Prepare services if needed"]
		role_1cca6e02 -> role_74292792 [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_b4319ae7 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_1cca6e02 -> role_e1dc5dfc [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_fba6f4f8 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster bootstrap node" {
		role_ede7f138 [label="[role] Deploy the cluster bootstrap node" color="#7516b6" id=role_ede7f138 tooltip="Deploy the cluster bootstrap node"]
	}
	subgraph "Deploy the cluster controller nodes" {
		role_97f02763 [label="[role] Deploy the cluster controller nodes" color="#7516b6" id=role_97f02763 tooltip="Deploy the cluster controller nodes"]
	}
	subgraph "Deploy the cluster compute nodes" {
		role_492b29f2 [label="[role] Deploy the cluster compute nodes" color="#7516b6" id=role_492b29f2 tooltip="Deploy the cluster compute nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_80cd78a1 [label="[role] Delegate to the distro role to deploy the cluster" color="#7516b6" id=role_80cd78a1 tooltip="Delegate to the distro role to deploy the cluster"]
		role_80cd78a1 -> role_ede7f138 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_36c8580b labeltooltip="1 " tooltip="1 "]
		role_80cd78a1 -> role_97f02763 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_82ab7c6b labeltooltip="2 " tooltip="2 "]
		role_80cd78a1 -> role_492b29f2 [label="3 " color="#7516b6" fontcolor="#7516b6" id=edge_1494fbf0 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "task-deploy-cluster" {
		role_cd4754af [label="[role] task-deploy-cluster" color="#7516b6" id=role_cd4754af tooltip="task-deploy-cluster"]
		role_cd4754af -> role_1cca6e02 [label="1 [when: not services_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_9e1e014a labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_cd4754af -> role_80cd78a1 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_09cc46c6 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_94563fec [label="[role] Read podman secrets if running from the container" color="#7516b6" id=role_94563fec tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_26a07853 [label="[role] Prepare environment if needed" color="#7516b6" id=role_26a07853 tooltip="Prepare environment if needed"]
		role_26a07853 -> role_94563fec [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7516b6" fontcolor="#7516b6" id=edge_0771be3d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_38c780e8 [label="[role] Gather network and host facts for guest" color="#7516b6" id=role_38c780e8 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_6805b091 [label="[role] Prepare services if needed" color="#7516b6" id=role_6805b091 tooltip="Prepare services if needed"]
		role_6805b091 -> role_26a07853 [label="1 [when: not environment_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_5fefe6fb labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_6805b091 -> role_38c780e8 [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_aaee87f7 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_b9a3ecbd [label="[role] Configure NFS" color="#7516b6" id=role_b9a3ecbd tooltip="Configure NFS"]
	}
	subgraph "Deploy the apps" {
		role_5c068ebc [label="[role] Deploy the apps" color="#7516b6" id=role_5c068ebc tooltip="Deploy the apps"]
	}
	subgraph "Deploy KubeVirt" {
		role_bba8652b [label="[role] Deploy KubeVirt" color="#7516b6" id=role_bba8652b tooltip="Deploy KubeVirt"]
	}
	subgraph "Deploy Submariner" {
		role_2053a032 [label="[role] Deploy Submariner" color="#7516b6" id=role_2053a032 tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_385b0d7a [label="[role] Delegate to distro role to run post-deployment tasks" color="#7516b6" id=role_385b0d7a tooltip="Delegate to distro role to run post-deployment tasks"]
		role_385b0d7a -> role_b9a3ecbd [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#7516b6" fontcolor="#7516b6" id=edge_a1fcf1a8 labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_385b0d7a -> role_5c068ebc [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_9e767f60 labeltooltip="2 " tooltip="2 "]
		role_385b0d7a -> role_bba8652b [label="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" color="#7516b6" fontcolor="#7516b6" id=edge_b9b1004a labeltooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" tooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]"]
		role_385b0d7a -> role_2053a032 [label="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" color="#7516b6" fontcolor="#7516b6" id=edge_2a43ef8a labeltooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" tooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_6aaa5f25 [label="[role] task-post-deployment" color="#7516b6" id=role_6aaa5f25 tooltip="task-post-deployment"]
		role_6aaa5f25 -> role_6805b091 [label="1 [when: not services_prepared]" color="#7516b6" fontcolor="#7516b6" id=edge_7a02c278 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_6aaa5f25 -> role_385b0d7a [label="2 " color="#7516b6" fontcolor="#7516b6" id=edge_492ac294 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_2c8d9dd9 -> block_c2ae233e [label=1 color="#7516b6" fontcolor="#7516b6" id=edge_96b146cf labeltooltip=1 tooltip=1]
		subgraph cluster_block_c2ae233e {
			block_c2ae233e [label="[block] Prepare the environment" color="#7516b6" id=block_c2ae233e labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_c2ae233e -> role_0470ea0d [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_7abe157f labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_a85805da [label=2 color="#7516b6" fontcolor="#7516b6" id=edge_e84af2c0 labeltooltip=2 tooltip=2]
		subgraph cluster_block_a85805da {
			block_a85805da [label="[block] Cleanup hypervisors" color="#7516b6" id=block_a85805da labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_a85805da -> role_6b58eb3d [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_37cbf6fa labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_f1224a9c [label=3 color="#7516b6" fontcolor="#7516b6" id=edge_be7b0396 labeltooltip=3 tooltip=3]
		subgraph cluster_block_f1224a9c {
			block_f1224a9c [label="[block] Run validations on cluster resources" color="#7516b6" id=block_f1224a9c labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_f1224a9c -> role_e185eb0a [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_39307015 labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_e687cea3 [label=4 color="#7516b6" fontcolor="#7516b6" id=edge_4ab9d1c7 labeltooltip=4 tooltip=4]
		subgraph cluster_block_e687cea3 {
			block_e687cea3 [label="[block] Create the cluster network resources" color="#7516b6" id=block_e687cea3 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_e687cea3 -> role_f5ac9218 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_30d855e6 labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_c5ec5b10 [label=5 color="#7516b6" fontcolor="#7516b6" id=edge_8b09d013 labeltooltip=5 tooltip=5]
		subgraph cluster_block_c5ec5b10 {
			block_c5ec5b10 [label="[block] Create services the cluster will need" color="#7516b6" id=block_c5ec5b10 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_c5ec5b10 -> role_743ec343 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_6c12ee9d labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_5e3f137e [label=6 color="#7516b6" fontcolor="#7516b6" id=edge_8bd03cdb labeltooltip=6 tooltip=6]
		subgraph cluster_block_5e3f137e {
			block_5e3f137e [label="[block] Prepare to deploy the cluster" color="#7516b6" id=block_5e3f137e labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_5e3f137e -> role_c6cb7e0c [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_678f0e87 labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_ae30b893 [label=7 color="#7516b6" fontcolor="#7516b6" id=edge_9f08bc3c labeltooltip=7 tooltip=7]
		subgraph cluster_block_ae30b893 {
			block_ae30b893 [label="[block] Download cloud images" color="#7516b6" id=block_ae30b893 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_ae30b893 -> role_c3306b41 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_e5a480a9 labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_68bd35d9 [label=8 color="#7516b6" fontcolor="#7516b6" id=edge_107f6883 labeltooltip=8 tooltip=8]
		subgraph cluster_block_68bd35d9 {
			block_68bd35d9 [label="[block] Deploy the cluster" color="#7516b6" id=block_68bd35d9 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_68bd35d9 -> role_cd4754af [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_8aef9a53 labeltooltip="1 " tooltip="1 "]
		}
		play_2c8d9dd9 -> block_2023d72c [label=9 color="#7516b6" fontcolor="#7516b6" id=edge_ca616817 labeltooltip=9 tooltip=9]
		subgraph cluster_block_2023d72c {
			block_2023d72c [label="[block] Run any post-deployment tasks" color="#7516b6" id=block_2023d72c labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_2023d72c -> role_6aaa5f25 [label="1 " color="#7516b6" fontcolor="#7516b6" id=edge_16e7ab8b labeltooltip="1 " tooltip="1 "]
		}
	}
}
