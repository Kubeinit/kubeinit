digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_bc4bc510 [label="Play: Initial setup (1)" color="#b6162b" fontcolor="#ffffff" id=play_bc4bc510 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_bc4bc510 [label="1 " color="#b6162b" fontcolor="#b6162b" id=edge_cd05c836 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_870eac61 [label="[role] Read podman secrets if running from the container" color="#b6162b" id=role_870eac61 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_7af03a35 [label="[role] task-gather-facts" color="#b6162b" id=role_7af03a35 tooltip="task-gather-facts"]
		role_7af03a35 -> role_870eac61 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b6162b" fontcolor="#b6162b" id=edge_5575e1ca labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_97be2820 [label="[role] Read podman secrets if running from the container" color="#b6162b" id=role_97be2820 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_84f783e9 [label="[role] task-prepare-hypervisors" color="#b6162b" id=role_84f783e9 tooltip="task-prepare-hypervisors"]
		role_84f783e9 -> role_97be2820 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b6162b" fontcolor="#b6162b" id=edge_5160703f labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_bc4bc510 -> block_ed950db0 [label=1 color="#b6162b" fontcolor="#b6162b" id=edge_08d9810b labeltooltip=1 tooltip=1]
		subgraph cluster_block_ed950db0 {
			block_ed950db0 [label="[block] Gather facts about the deployment environment" color="#b6162b" id=block_ed950db0 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_ed950db0 -> role_7af03a35 [label="1 " color="#b6162b" fontcolor="#b6162b" id=edge_72cc699d labeltooltip="1 " tooltip="1 "]
		}
		play_bc4bc510 -> block_c1ffb8b4 [label=2 color="#b6162b" fontcolor="#b6162b" id=edge_9165a0cc labeltooltip=2 tooltip=2]
		subgraph cluster_block_c1ffb8b4 {
			block_c1ffb8b4 [label="[block] Prepare the hypervisors" color="#b6162b" id=block_c1ffb8b4 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_c1ffb8b4 -> role_84f783e9 [label="1 " color="#b6162b" fontcolor="#b6162b" id=edge_8ea19149 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_609309ae [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#22b01c" fontcolor="#ffffff" id=play_609309ae shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_609309ae [label="2 " color="#22b01c" fontcolor="#22b01c" id=edge_31546219 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_843b51da [label="[role] Provision the libvirt services on the hypervisor" color="#22b01c" id=role_843b51da tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_2ea2000b [label="[role] Prepare each hypervisor in the deployment" color="#22b01c" id=role_2ea2000b tooltip="Prepare each hypervisor in the deployment"]
		role_2ea2000b -> role_843b51da [label="1 " color="#22b01c" fontcolor="#22b01c" id=edge_5b650c53 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_609309ae -> block_aee84b53 [label=1 color="#22b01c" fontcolor="#22b01c" id=edge_0ebfbf60 labeltooltip=1 tooltip=1]
		subgraph cluster_block_aee84b53 {
			block_aee84b53 [label="[block] Prepare individual hypervisors" color="#22b01c" id=block_aee84b53 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_aee84b53 -> role_2ea2000b [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#22b01c" fontcolor="#22b01c" id=edge_68d8e82f labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_61e46386 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#b89814" fontcolor="#ffffff" id=play_61e46386 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_61e46386 [label="3 " color="#b89814" fontcolor="#b89814" id=edge_a233dd1f labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_777d1436 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_777d1436 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_6bd19fac [label="[role] task-prepare-environment" color="#b89814" id=role_6bd19fac tooltip="task-prepare-environment"]
		role_6bd19fac -> role_777d1436 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_2091a5c3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_30f2339c [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_30f2339c tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_c54b2d91 [label="[role] Prepare environment if not prepared" color="#b89814" id=role_c54b2d91 tooltip="Prepare environment if not prepared"]
		role_c54b2d91 -> role_30f2339c [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_dac0043a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_3663842b [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b89814" id=role_3663842b tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_de2320c0 [label="[role] task-cleanup-hypervisors" color="#b89814" id=role_de2320c0 tooltip="task-cleanup-hypervisors"]
		role_de2320c0 -> role_c54b2d91 [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_6a6128d6 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_de2320c0 -> role_3663842b [label="2 " color="#b89814" fontcolor="#b89814" id=edge_9f3021ef labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_c118fd89 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_c118fd89 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_a557fbe8 [label="[role] Prepare environment if not prepared" color="#b89814" id=role_a557fbe8 tooltip="Prepare environment if not prepared"]
		role_a557fbe8 -> role_c118fd89 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_f5aba579 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_94bd19cf [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b89814" id=role_94bd19cf tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_6cb4f2ad [label="[role] Cleanup hypervisors if needed" color="#b89814" id=role_6cb4f2ad tooltip="Cleanup hypervisors if needed"]
		role_6cb4f2ad -> role_a557fbe8 [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_173ec6d2 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_6cb4f2ad -> role_94bd19cf [label="2 " color="#b89814" fontcolor="#b89814" id=edge_a34f9703 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_8d4691ea [label="[role] task-run-validations" color="#b89814" id=role_8d4691ea tooltip="task-run-validations"]
		role_8d4691ea -> role_6cb4f2ad [label="1 [when: not hypervisors_cleaned]" color="#b89814" fontcolor="#b89814" id=edge_d72bfc8f labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_81cae7cc [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_81cae7cc tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_c161ca86 [label="[role] Prepare environment if not prepared" color="#b89814" id=role_c161ca86 tooltip="Prepare environment if not prepared"]
		role_c161ca86 -> role_81cae7cc [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_3aa21405 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_5437b874 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b89814" id=role_5437b874 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_e18dd7b8 [label="[role] Cleanup hypervisors if needed" color="#b89814" id=role_e18dd7b8 tooltip="Cleanup hypervisors if needed"]
		role_e18dd7b8 -> role_c161ca86 [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_74276d1f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_e18dd7b8 -> role_5437b874 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_913fa72e labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_ed5836e2 [label="[role] task-create-network" color="#b89814" id=role_ed5836e2 tooltip="task-create-network"]
		role_ed5836e2 -> role_e18dd7b8 [label="1 [when: not hypervisors_cleaned]" color="#b89814" fontcolor="#b89814" id=edge_960f875d labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_829a7871 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_829a7871 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_61174111 [label="[role] Prepare environment if not prepared" color="#b89814" id=role_61174111 tooltip="Prepare environment if not prepared"]
		role_61174111 -> role_829a7871 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_5d458853 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_4add75ae [label="[role] Prepare podman" color="#b89814" id=role_4add75ae tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_9f787c53 [label="[role] Create systemd service for podman container" color="#b89814" id=role_9f787c53 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_7ad6e826 [label="[role] Configure Bind" color="#b89814" id=role_7ad6e826 tooltip="Configure Bind"]
		role_7ad6e826 -> role_9f787c53 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_fed1764d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_dccf60d0 [label="[role] Create systemd service for podman container" color="#b89814" id=role_dccf60d0 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_e686f41d [label="[role] Configure Dnsmasq" color="#b89814" id=role_e686f41d tooltip="Configure Dnsmasq"]
		role_e686f41d -> role_dccf60d0 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_3c2fdcfc labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_0746c747 [label="[role] Create systemd service for podman container" color="#b89814" id=role_0746c747 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_ff5101e2 [label="[role] Configure HAProxy" color="#b89814" id=role_ff5101e2 tooltip="Configure HAProxy"]
		role_ff5101e2 -> role_0746c747 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_5ac3c17b labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_6ac4738f [label="[role] Create systemd service for podman container" color="#b89814" id=role_6ac4738f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_39bd5b55 [label="[role] Configure Nexus" color="#b89814" id=role_39bd5b55 tooltip="Configure Nexus"]
		role_39bd5b55 -> role_6ac4738f [label="1 " color="#b89814" fontcolor="#b89814" id=edge_01b77898 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_d83965ca [label="[role] Create systemd service for podman container" color="#b89814" id=role_d83965ca tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_64eeeae7 [label="[role] Configure Apache" color="#b89814" id=role_64eeeae7 tooltip="Configure Apache"]
		role_64eeeae7 -> role_d83965ca [label="1 " color="#b89814" fontcolor="#b89814" id=edge_a1312fb2 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_08df7556 [label="[role] Create systemd service for podman container" color="#b89814" id=role_08df7556 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_79255dff [label="[role] Configure a local container image registry" color="#b89814" id=role_79255dff tooltip="Configure a local container image registry"]
		role_79255dff -> role_08df7556 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_9149938b labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_acbca862 [label="[role] task-create-services" color="#b89814" id=role_acbca862 tooltip="task-create-services"]
		role_acbca862 -> role_61174111 [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_7fe32261 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_acbca862 -> role_4add75ae [label="2 " color="#b89814" fontcolor="#b89814" id=edge_baa47823 labeltooltip="2 " tooltip="2 "]
		role_acbca862 -> role_7ad6e826 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_29c84e9e labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_acbca862 -> role_e686f41d [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_2a3ffa9b labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_acbca862 -> role_ff5101e2 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_8508fa48 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_acbca862 -> role_39bd5b55 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_d5fb2e3c labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_acbca862 -> role_64eeeae7 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_95010a63 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_acbca862 -> role_79255dff [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#b89814" fontcolor="#b89814" id=edge_d368a11c labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_4f946978 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_4f946978 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_2615fe6b [label="[role] Prepare environment if needed" color="#b89814" id=role_2615fe6b tooltip="Prepare environment if needed"]
		role_2615fe6b -> role_4f946978 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_e3e5d2f3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_41ed779a [label="[role] Gather network and host facts for guest" color="#b89814" id=role_41ed779a tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_f327345d [label="[role] Prepare services if needed" color="#b89814" id=role_f327345d tooltip="Prepare services if needed"]
		role_f327345d -> role_2615fe6b [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_2c2c4c1d labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_f327345d -> role_41ed779a [label="2 " color="#b89814" fontcolor="#b89814" id=edge_9e32ba96 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_119659bd [label="[role] Create systemd service for podman container" color="#b89814" id=role_119659bd tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_2b11f06b [label="[role] Gather network and host facts for provision service" color="#b89814" id=role_2b11f06b tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_b1b22179 [label="[role] Setup the cluster provision container" color="#b89814" id=role_b1b22179 tooltip="Setup the cluster provision container"]
		role_b1b22179 -> role_119659bd [label="1 " color="#b89814" fontcolor="#b89814" id=edge_f071c8a0 labeltooltip="1 " tooltip="1 "]
		role_b1b22179 -> role_2b11f06b [label="2 " color="#b89814" fontcolor="#b89814" id=edge_f2ce63f5 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_41dda6b9 [label="[role] Delegate to the distro role to prepare the cluster" color="#b89814" id=role_41dda6b9 tooltip="Delegate to the distro role to prepare the cluster"]
		role_41dda6b9 -> role_b1b22179 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_dea22d27 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_d5c0415f [label="[role] task-prepare-cluster" color="#b89814" id=role_d5c0415f tooltip="task-prepare-cluster"]
		role_d5c0415f -> role_f327345d [label="1 [when: not services_prepared]" color="#b89814" fontcolor="#b89814" id=edge_a29a2f1c labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_d5c0415f -> role_41dda6b9 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_09974003 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_13c2e66d [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_13c2e66d tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_723bb99e [label="[role] Prepare environment if not prepared" color="#b89814" id=role_723bb99e tooltip="Prepare environment if not prepared"]
		role_723bb99e -> role_13c2e66d [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_8c0496da labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_7406f64d [label="[role] task-download-images" color="#b89814" id=role_7406f64d tooltip="task-download-images"]
		role_7406f64d -> role_723bb99e [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_6deac3d4 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_a3879f83 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_a3879f83 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_7b07517b [label="[role] Prepare environment if needed" color="#b89814" id=role_7b07517b tooltip="Prepare environment if needed"]
		role_7b07517b -> role_a3879f83 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_c203f967 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_a7e5b7d3 [label="[role] Gather network and host facts for guest" color="#b89814" id=role_a7e5b7d3 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_e838f9e9 [label="[role] Prepare services if needed" color="#b89814" id=role_e838f9e9 tooltip="Prepare services if needed"]
		role_e838f9e9 -> role_7b07517b [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_6a9ac8a5 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_e838f9e9 -> role_a7e5b7d3 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_cc07a766 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_973f2a10 [label="[role] Deploy the cluster nodes" color="#b89814" id=role_973f2a10 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_b2ea07f9 [label="[role] Delegate to the distro role to deploy the cluster" color="#b89814" id=role_b2ea07f9 tooltip="Delegate to the distro role to deploy the cluster"]
		role_b2ea07f9 -> role_973f2a10 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#b89814" fontcolor="#b89814" id=edge_e2ab9556 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_f78df112 [label="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template" color="#b89814" id=task_f78df112 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template"]
		role_b2ea07f9 -> task_f78df112 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_b8e0885a labeltooltip="2 " tooltip="2 "]
		task_7ca41cd7 [label="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template" color="#b89814" id=task_7ca41cd7 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template"]
		role_b2ea07f9 -> task_7ca41cd7 [label="3 " color="#b89814" fontcolor="#b89814" id=edge_e098a692 labeltooltip="3 " tooltip="3 "]
		task_8a0d8aef [label="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts" color="#b89814" id=task_8a0d8aef shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts"]
		role_b2ea07f9 -> task_8a0d8aef [label="4 " color="#b89814" fontcolor="#b89814" id=edge_59e52cca labeltooltip="4 " tooltip="4 "]
		task_e2418777 [label="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer" color="#b89814" id=task_e2418777 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer"]
		role_b2ea07f9 -> task_e2418777 [label="5 " color="#b89814" fontcolor="#b89814" id=edge_a1914c4e labeltooltip="5 " tooltip="5 "]
		task_6f6af48f [label="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster" color="#b89814" id=task_6f6af48f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster"]
		role_b2ea07f9 -> task_6f6af48f [label="6 " color="#b89814" fontcolor="#b89814" id=edge_d9255ac0 labeltooltip="6 " tooltip="6 "]
		task_e11c76ea [label="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes" color="#b89814" id=task_e11c76ea shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes"]
		role_b2ea07f9 -> task_e11c76ea [label="7 " color="#b89814" fontcolor="#b89814" id=edge_ff850433 labeltooltip="7 " tooltip="7 "]
		task_d7779844 [label="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller" color="#b89814" id=task_d7779844 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller"]
		role_b2ea07f9 -> task_d7779844 [label="8 " color="#b89814" fontcolor="#b89814" id=edge_ef1786aa labeltooltip="8 " tooltip="8 "]
		task_64f45418 [label="kubeinit.kubeinit.kubeinit_cdk : Show juju info" color="#b89814" id=task_64f45418 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Show juju info"]
		role_b2ea07f9 -> task_64f45418 [label="9 " color="#b89814" fontcolor="#b89814" id=edge_f4f44224 labeltooltip="9 " tooltip="9 "]
		task_317632e3 [label="kubeinit.kubeinit.kubeinit_cdk : Add machines" color="#b89814" id=task_317632e3 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add machines"]
		role_b2ea07f9 -> task_317632e3 [label="10 " color="#b89814" fontcolor="#b89814" id=edge_dbb808e6 labeltooltip="10 " tooltip="10 "]
		task_5a4bb2cb [label="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started" color="#b89814" id=task_5a4bb2cb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started"]
		role_b2ea07f9 -> task_5a4bb2cb [label="11 " color="#b89814" fontcolor="#b89814" id=edge_abf91ec3 labeltooltip="11 " tooltip="11 "]
		task_0728ab64 [label="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK" color="#b89814" id=task_0728ab64 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK"]
		role_b2ea07f9 -> task_0728ab64 [label="12 " color="#b89814" fontcolor="#b89814" id=edge_3ec0117f labeltooltip="12 " tooltip="12 "]
		task_a5706e16 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy" color="#b89814" id=task_a5706e16 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy"]
		role_b2ea07f9 -> task_a5706e16 [label="13 " color="#b89814" fontcolor="#b89814" id=edge_7042c0ab labeltooltip="13 " tooltip="13 "]
		task_94e3106c [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy" color="#b89814" id=task_94e3106c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy"]
		role_b2ea07f9 -> task_94e3106c [label="14 " color="#b89814" fontcolor="#b89814" id=edge_b826aedf labeltooltip="14 " tooltip="14 "]
		task_fda4331d [label="kubeinit.kubeinit.kubeinit_cdk : Create kube directory" color="#b89814" id=task_fda4331d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Create kube directory"]
		role_b2ea07f9 -> task_fda4331d [label="15 " color="#b89814" fontcolor="#b89814" id=edge_b1133614 labeltooltip="15 " tooltip="15 "]
		task_33300966 [label="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node" color="#b89814" id=task_33300966 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node"]
		role_b2ea07f9 -> task_33300966 [label="16 " color="#b89814" fontcolor="#b89814" id=edge_46bc28ee labeltooltip="16 " tooltip="16 "]
		task_a9c17f18 [label="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig" color="#b89814" id=task_a9c17f18 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig"]
		role_b2ea07f9 -> task_a9c17f18 [label="17 " color="#b89814" fontcolor="#b89814" id=edge_c681feb2 labeltooltip="17 " tooltip="17 "]
		task_d57bfd1b [label="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster" color="#b89814" id=task_d57bfd1b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster"]
		role_b2ea07f9 -> task_d57bfd1b [label="18 " color="#b89814" fontcolor="#b89814" id=edge_3b094b65 labeltooltip="18 " tooltip="18 "]
	}
	subgraph "task-deploy-cluster" {
		role_43267223 [label="[role] task-deploy-cluster" color="#b89814" id=role_43267223 tooltip="task-deploy-cluster"]
		role_43267223 -> role_e838f9e9 [label="1 [when: not services_prepared]" color="#b89814" fontcolor="#b89814" id=edge_ecc25966 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_43267223 -> role_b2ea07f9 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_24f7d794 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e56a8d23 [label="[role] Read podman secrets if running from the container" color="#b89814" id=role_e56a8d23 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_6bbffd3c [label="[role] Prepare environment if needed" color="#b89814" id=role_6bbffd3c tooltip="Prepare environment if needed"]
		role_6bbffd3c -> role_e56a8d23 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b89814" fontcolor="#b89814" id=edge_3844df4b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_6caea123 [label="[role] Gather network and host facts for guest" color="#b89814" id=role_6caea123 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_397b31a9 [label="[role] Prepare services if needed" color="#b89814" id=role_397b31a9 tooltip="Prepare services if needed"]
		role_397b31a9 -> role_6bbffd3c [label="1 [when: not environment_prepared]" color="#b89814" fontcolor="#b89814" id=edge_f3b28dc0 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_397b31a9 -> role_6caea123 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_794d4223 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_b6563bc3 [label="[role] Deploy the apps" color="#b89814" id=role_b6563bc3 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_120b9613 [label="[role] Configure NFS" color="#b89814" id=role_120b9613 tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_2dee7f56 [label="[role] Delegate to distro role to run post-deployment tasks" color="#b89814" id=role_2dee7f56 tooltip="Delegate to distro role to run post-deployment tasks"]
		role_2dee7f56 -> role_b6563bc3 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_94079027 labeltooltip="1 " tooltip="1 "]
		role_2dee7f56 -> role_120b9613 [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#b89814" fontcolor="#b89814" id=edge_d579f3b2 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_d78fc47e [label="[role] task-post-deployment" color="#b89814" id=role_d78fc47e tooltip="task-post-deployment"]
		role_d78fc47e -> role_397b31a9 [label="1 [when: not services_prepared]" color="#b89814" fontcolor="#b89814" id=edge_d12c9ab7 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_d78fc47e -> role_2dee7f56 [label="2 " color="#b89814" fontcolor="#b89814" id=edge_9972ee29 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_61e46386 -> block_2c405d25 [label=1 color="#b89814" fontcolor="#b89814" id=edge_808aedd0 labeltooltip=1 tooltip=1]
		subgraph cluster_block_2c405d25 {
			block_2c405d25 [label="[block] Prepare the environment" color="#b89814" id=block_2c405d25 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_2c405d25 -> role_6bd19fac [label="1 " color="#b89814" fontcolor="#b89814" id=edge_f4ed397b labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_0d763859 [label=2 color="#b89814" fontcolor="#b89814" id=edge_097a8512 labeltooltip=2 tooltip=2]
		subgraph cluster_block_0d763859 {
			block_0d763859 [label="[block] Cleanup hypervisors" color="#b89814" id=block_0d763859 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_0d763859 -> role_de2320c0 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_91208784 labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_fdd13775 [label=3 color="#b89814" fontcolor="#b89814" id=edge_bee3b1bf labeltooltip=3 tooltip=3]
		subgraph cluster_block_fdd13775 {
			block_fdd13775 [label="[block] Run validations on cluster resources" color="#b89814" id=block_fdd13775 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_fdd13775 -> role_8d4691ea [label="1 " color="#b89814" fontcolor="#b89814" id=edge_a40f840a labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_d019e7a6 [label=4 color="#b89814" fontcolor="#b89814" id=edge_d1a4288e labeltooltip=4 tooltip=4]
		subgraph cluster_block_d019e7a6 {
			block_d019e7a6 [label="[block] Create the cluster network resources" color="#b89814" id=block_d019e7a6 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_d019e7a6 -> role_ed5836e2 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_bd78ec5a labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_2bdc17a6 [label=5 color="#b89814" fontcolor="#b89814" id=edge_e42a39f9 labeltooltip=5 tooltip=5]
		subgraph cluster_block_2bdc17a6 {
			block_2bdc17a6 [label="[block] Create services the cluster will need" color="#b89814" id=block_2bdc17a6 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_2bdc17a6 -> role_acbca862 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_9d941d93 labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_40a9b779 [label=6 color="#b89814" fontcolor="#b89814" id=edge_65a27c01 labeltooltip=6 tooltip=6]
		subgraph cluster_block_40a9b779 {
			block_40a9b779 [label="[block] Prepare to deploy the cluster" color="#b89814" id=block_40a9b779 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_40a9b779 -> role_d5c0415f [label="1 " color="#b89814" fontcolor="#b89814" id=edge_2885325d labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_7715f6b3 [label=7 color="#b89814" fontcolor="#b89814" id=edge_b16876cf labeltooltip=7 tooltip=7]
		subgraph cluster_block_7715f6b3 {
			block_7715f6b3 [label="[block] Download cloud images" color="#b89814" id=block_7715f6b3 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_7715f6b3 -> role_7406f64d [label="1 " color="#b89814" fontcolor="#b89814" id=edge_bc194642 labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_09c700e8 [label=8 color="#b89814" fontcolor="#b89814" id=edge_9b6bde37 labeltooltip=8 tooltip=8]
		subgraph cluster_block_09c700e8 {
			block_09c700e8 [label="[block] Deploy the cluster" color="#b89814" id=block_09c700e8 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_09c700e8 -> role_43267223 [label="1 " color="#b89814" fontcolor="#b89814" id=edge_58f769d3 labeltooltip="1 " tooltip="1 "]
		}
		play_61e46386 -> block_5556f5c8 [label=9 color="#b89814" fontcolor="#b89814" id=edge_6014508b labeltooltip=9 tooltip=9]
		subgraph cluster_block_5556f5c8 {
			block_5556f5c8 [label="[block] Run any post-deployment tasks" color="#b89814" id=block_5556f5c8 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_5556f5c8 -> role_d78fc47e [label="1 " color="#b89814" fontcolor="#b89814" id=edge_b3443e87 labeltooltip="1 " tooltip="1 "]
		}
	}
}
