digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_466d5fcf [label="Play: Initial setup (1)" color="#7311bb" fontcolor="#ffffff" id=play_466d5fcf shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_466d5fcf [label="1 " color="#7311bb" fontcolor="#7311bb" id=edge_ae6e247c labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_fb395929 [label="[role] Read podman secrets if running from the container" color="#7311bb" id=role_fb395929 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_91746d9b [label="[role] task-gather-facts" color="#7311bb" id=role_91746d9b tooltip="task-gather-facts"]
		role_91746d9b -> role_fb395929 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7311bb" fontcolor="#7311bb" id=edge_5050a618 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_d47cb7bd [label="[role] Read podman secrets if running from the container" color="#7311bb" id=role_d47cb7bd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_c4bd36e9 [label="[role] task-prepare-hypervisors" color="#7311bb" id=role_c4bd36e9 tooltip="task-prepare-hypervisors"]
		role_c4bd36e9 -> role_d47cb7bd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#7311bb" fontcolor="#7311bb" id=edge_0b03e1bf labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_466d5fcf -> block_d6b39e53 [label=1 color="#7311bb" fontcolor="#7311bb" id=edge_26834c84 labeltooltip=1 tooltip=1]
		subgraph cluster_block_d6b39e53 {
			block_d6b39e53 [label="[block] Gather facts about the deployment environment" color="#7311bb" id=block_d6b39e53 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_d6b39e53 -> role_91746d9b [label="1 " color="#7311bb" fontcolor="#7311bb" id=edge_8435f998 labeltooltip="1 " tooltip="1 "]
		}
		play_466d5fcf -> block_f78d2fc8 [label=2 color="#7311bb" fontcolor="#7311bb" id=edge_62ae2ce8 labeltooltip=2 tooltip=2]
		subgraph cluster_block_f78d2fc8 {
			block_f78d2fc8 [label="[block] Prepare the hypervisors" color="#7311bb" id=block_f78d2fc8 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_f78d2fc8 -> role_c4bd36e9 [label="1 " color="#7311bb" fontcolor="#7311bb" id=edge_24e4ae31 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_3390c7fc [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#3d26a6" fontcolor="#ffffff" id=play_3390c7fc shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_3390c7fc [label="2 " color="#3d26a6" fontcolor="#3d26a6" id=edge_35851c29 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_17fa5b6e [label="[role] Provision the libvirt services on the hypervisor" color="#3d26a6" id=role_17fa5b6e tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_6841a7d5 [label="[role] Prepare each hypervisor in the deployment" color="#3d26a6" id=role_6841a7d5 tooltip="Prepare each hypervisor in the deployment"]
		role_6841a7d5 -> role_17fa5b6e [label="1 " color="#3d26a6" fontcolor="#3d26a6" id=edge_03bea3b9 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_3390c7fc -> block_547898e1 [label=1 color="#3d26a6" fontcolor="#3d26a6" id=edge_a2c4a4a4 labeltooltip=1 tooltip=1]
		subgraph cluster_block_547898e1 {
			block_547898e1 [label="[block] Prepare individual hypervisors" color="#3d26a6" id=block_547898e1 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_547898e1 -> role_6841a7d5 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#3d26a6" fontcolor="#3d26a6" id=edge_eb5513c7 labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_4daaa626 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#a8a224" fontcolor="#ffffff" id=play_4daaa626 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_4daaa626 [label="3 " color="#a8a224" fontcolor="#a8a224" id=edge_fd0ba9a1 labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_d977b368 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_d977b368 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_14df47b8 [label="[role] task-prepare-environment" color="#a8a224" id=role_14df47b8 tooltip="task-prepare-environment"]
		role_14df47b8 -> role_d977b368 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_42e8d82e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_dd46cbf7 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_dd46cbf7 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_b8c72777 [label="[role] Prepare environment if not prepared" color="#a8a224" id=role_b8c72777 tooltip="Prepare environment if not prepared"]
		role_b8c72777 -> role_dd46cbf7 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_7e623684 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_23a631fd [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#a8a224" id=role_23a631fd tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_88a8731c [label="[role] task-cleanup-hypervisors" color="#a8a224" id=role_88a8731c tooltip="task-cleanup-hypervisors"]
		role_88a8731c -> role_b8c72777 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_59faad35 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_88a8731c -> role_23a631fd [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_5f86204f labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_d1307fdd [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_d1307fdd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_545795da [label="[role] Prepare environment if not prepared" color="#a8a224" id=role_545795da tooltip="Prepare environment if not prepared"]
		role_545795da -> role_d1307fdd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_81fc5715 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_e1fcc9ed [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#a8a224" id=role_e1fcc9ed tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_61cd6c64 [label="[role] Cleanup hypervisors if needed" color="#a8a224" id=role_61cd6c64 tooltip="Cleanup hypervisors if needed"]
		role_61cd6c64 -> role_545795da [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_e5a7bf54 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_61cd6c64 -> role_e1fcc9ed [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_7529f532 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_f46be752 [label="[role] task-run-validations" color="#a8a224" id=role_f46be752 tooltip="task-run-validations"]
		role_f46be752 -> role_61cd6c64 [label="1 [when: not hypervisors_cleaned]" color="#a8a224" fontcolor="#a8a224" id=edge_0386175b labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_ea3c76f1 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_ea3c76f1 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_62ec7da9 [label="[role] Prepare environment if not prepared" color="#a8a224" id=role_62ec7da9 tooltip="Prepare environment if not prepared"]
		role_62ec7da9 -> role_ea3c76f1 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_9fce864d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_0deb7741 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#a8a224" id=role_0deb7741 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_156d9050 [label="[role] Cleanup hypervisors if needed" color="#a8a224" id=role_156d9050 tooltip="Cleanup hypervisors if needed"]
		role_156d9050 -> role_62ec7da9 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_dbea3c8e labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_156d9050 -> role_0deb7741 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_3c5048e8 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_0237201a [label="[role] task-create-network" color="#a8a224" id=role_0237201a tooltip="task-create-network"]
		role_0237201a -> role_156d9050 [label="1 [when: not hypervisors_cleaned]" color="#a8a224" fontcolor="#a8a224" id=edge_13ded0b9 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_0372bb46 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_0372bb46 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_d031f209 [label="[role] Prepare environment if not prepared" color="#a8a224" id=role_d031f209 tooltip="Prepare environment if not prepared"]
		role_d031f209 -> role_0372bb46 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_887cf850 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_bd715d7f [label="[role] Prepare podman" color="#a8a224" id=role_bd715d7f tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_1e9cc204 [label="[role] Create systemd service for podman container" color="#a8a224" id=role_1e9cc204 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_113a3156 [label="[role] Configure Bind" color="#a8a224" id=role_113a3156 tooltip="Configure Bind"]
		role_113a3156 -> role_1e9cc204 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_645848fb labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_f5ab601e [label="[role] Create systemd service for podman container" color="#a8a224" id=role_f5ab601e tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_83f9ce4c [label="[role] Configure Dnsmasq" color="#a8a224" id=role_83f9ce4c tooltip="Configure Dnsmasq"]
		role_83f9ce4c -> role_f5ab601e [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_b07109a3 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_8c63a021 [label="[role] Create systemd service for podman container" color="#a8a224" id=role_8c63a021 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_b5af4338 [label="[role] Configure HAProxy" color="#a8a224" id=role_b5af4338 tooltip="Configure HAProxy"]
		role_b5af4338 -> role_8c63a021 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_7525a9bb labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_76d1bf36 [label="[role] Create systemd service for podman container" color="#a8a224" id=role_76d1bf36 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_24a80a13 [label="[role] Configure Nexus" color="#a8a224" id=role_24a80a13 tooltip="Configure Nexus"]
		role_24a80a13 -> role_76d1bf36 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_bf20e096 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_d2a5c72c [label="[role] Create systemd service for podman container" color="#a8a224" id=role_d2a5c72c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_c165187c [label="[role] Configure Apache" color="#a8a224" id=role_c165187c tooltip="Configure Apache"]
		role_c165187c -> role_d2a5c72c [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_9a363cda labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_90179b03 [label="[role] Create systemd service for podman container" color="#a8a224" id=role_90179b03 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_024ca933 [label="[role] Configure a local container image registry" color="#a8a224" id=role_024ca933 tooltip="Configure a local container image registry"]
		role_024ca933 -> role_90179b03 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_6b41dcb1 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_e2074bc1 [label="[role] task-create-services" color="#a8a224" id=role_e2074bc1 tooltip="task-create-services"]
		role_e2074bc1 -> role_d031f209 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_9207de07 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_e2074bc1 -> role_bd715d7f [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_9803ed62 labeltooltip="2 " tooltip="2 "]
		role_e2074bc1 -> role_113a3156 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_c07a0e1a labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_e2074bc1 -> role_83f9ce4c [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_6ce71328 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_e2074bc1 -> role_b5af4338 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_3e9d36a1 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_e2074bc1 -> role_24a80a13 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_974d07bd labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_e2074bc1 -> role_c165187c [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_812e5dcd labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_e2074bc1 -> role_024ca933 [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#a8a224" fontcolor="#a8a224" id=edge_e06540bf labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_ae9f7f38 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_ae9f7f38 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_4d9f2c96 [label="[role] Prepare environment if needed" color="#a8a224" id=role_4d9f2c96 tooltip="Prepare environment if needed"]
		role_4d9f2c96 -> role_ae9f7f38 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_5e468744 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_75f00e30 [label="[role] Gather network and host facts for guest" color="#a8a224" id=role_75f00e30 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_bee1023a [label="[role] Prepare services if needed" color="#a8a224" id=role_bee1023a tooltip="Prepare services if needed"]
		role_bee1023a -> role_4d9f2c96 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_7ec1f977 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_bee1023a -> role_75f00e30 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_36988f68 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_3e5379eb [label="[role] Create systemd service for podman container" color="#a8a224" id=role_3e5379eb tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_005faade [label="[role] Gather network and host facts for provision service" color="#a8a224" id=role_005faade tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_d4131aec [label="[role] Setup the cluster provision container" color="#a8a224" id=role_d4131aec tooltip="Setup the cluster provision container"]
		role_d4131aec -> role_3e5379eb [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_169a8265 labeltooltip="1 " tooltip="1 "]
		role_d4131aec -> role_005faade [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_4724e088 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_6b3ba743 [label="[role] Delegate to the distro role to prepare the cluster" color="#a8a224" id=role_6b3ba743 tooltip="Delegate to the distro role to prepare the cluster"]
		role_6b3ba743 -> role_d4131aec [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_6ebe14c2 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_43455d4c [label="[role] task-prepare-cluster" color="#a8a224" id=role_43455d4c tooltip="task-prepare-cluster"]
		role_43455d4c -> role_bee1023a [label="1 [when: not services_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_34f6f9a5 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_43455d4c -> role_6b3ba743 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_e71ea7fa labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_b8c7b1ff [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_b8c7b1ff tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_88c4aa54 [label="[role] Prepare environment if not prepared" color="#a8a224" id=role_88c4aa54 tooltip="Prepare environment if not prepared"]
		role_88c4aa54 -> role_b8c7b1ff [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_081527f3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_93053726 [label="[role] task-download-images" color="#a8a224" id=role_93053726 tooltip="task-download-images"]
		role_93053726 -> role_88c4aa54 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_038022a3 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_457c24b4 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_457c24b4 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_cad63244 [label="[role] Prepare environment if needed" color="#a8a224" id=role_cad63244 tooltip="Prepare environment if needed"]
		role_cad63244 -> role_457c24b4 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_9f5835c8 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_d7cbd934 [label="[role] Gather network and host facts for guest" color="#a8a224" id=role_d7cbd934 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_b7987408 [label="[role] Prepare services if needed" color="#a8a224" id=role_b7987408 tooltip="Prepare services if needed"]
		role_b7987408 -> role_cad63244 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_09337758 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_b7987408 -> role_d7cbd934 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_4ac90fbe labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_b4d936b8 [label="[role] Deploy the cluster nodes" color="#a8a224" id=role_b4d936b8 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_f5beb129 [label="[role] Delegate to the distro role to deploy the cluster" color="#a8a224" id=role_f5beb129 tooltip="Delegate to the distro role to deploy the cluster"]
		role_f5beb129 -> role_b4d936b8 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#a8a224" fontcolor="#a8a224" id=edge_8456f2d1 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_ee361bc1 [label="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template" color="#a8a224" id=task_ee361bc1 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template"]
		role_f5beb129 -> task_ee361bc1 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_b3948c61 labeltooltip="2 " tooltip="2 "]
		task_2ea91659 [label="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template" color="#a8a224" id=task_2ea91659 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template"]
		role_f5beb129 -> task_2ea91659 [label="3 " color="#a8a224" fontcolor="#a8a224" id=edge_0ce2066b labeltooltip="3 " tooltip="3 "]
		task_40e0dadd [label="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts" color="#a8a224" id=task_40e0dadd shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts"]
		role_f5beb129 -> task_40e0dadd [label="4 " color="#a8a224" fontcolor="#a8a224" id=edge_6fbf8db0 labeltooltip="4 " tooltip="4 "]
		task_04ab0ecf [label="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer" color="#a8a224" id=task_04ab0ecf shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer"]
		role_f5beb129 -> task_04ab0ecf [label="5 " color="#a8a224" fontcolor="#a8a224" id=edge_3902870e labeltooltip="5 " tooltip="5 "]
		task_39da05ac [label="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster" color="#a8a224" id=task_39da05ac shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster"]
		role_f5beb129 -> task_39da05ac [label="6 " color="#a8a224" fontcolor="#a8a224" id=edge_9f8d0d74 labeltooltip="6 " tooltip="6 "]
		task_23c37fdd [label="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes" color="#a8a224" id=task_23c37fdd shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes"]
		role_f5beb129 -> task_23c37fdd [label="7 " color="#a8a224" fontcolor="#a8a224" id=edge_6bcc8429 labeltooltip="7 " tooltip="7 "]
		task_e12d4678 [label="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller" color="#a8a224" id=task_e12d4678 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller"]
		role_f5beb129 -> task_e12d4678 [label="8 " color="#a8a224" fontcolor="#a8a224" id=edge_4adee46e labeltooltip="8 " tooltip="8 "]
		task_707942db [label="kubeinit.kubeinit.kubeinit_cdk : Show juju info" color="#a8a224" id=task_707942db shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Show juju info"]
		role_f5beb129 -> task_707942db [label="9 " color="#a8a224" fontcolor="#a8a224" id=edge_3604f79e labeltooltip="9 " tooltip="9 "]
		task_8d10722f [label="kubeinit.kubeinit.kubeinit_cdk : Add machines" color="#a8a224" id=task_8d10722f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add machines"]
		role_f5beb129 -> task_8d10722f [label="10 " color="#a8a224" fontcolor="#a8a224" id=edge_32c54a14 labeltooltip="10 " tooltip="10 "]
		task_0ec61ad9 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started" color="#a8a224" id=task_0ec61ad9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started"]
		role_f5beb129 -> task_0ec61ad9 [label="11 " color="#a8a224" fontcolor="#a8a224" id=edge_90099a58 labeltooltip="11 " tooltip="11 "]
		task_b522f26a [label="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK" color="#a8a224" id=task_b522f26a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK"]
		role_f5beb129 -> task_b522f26a [label="12 " color="#a8a224" fontcolor="#a8a224" id=edge_cc584f05 labeltooltip="12 " tooltip="12 "]
		task_ea6b0c41 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy" color="#a8a224" id=task_ea6b0c41 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy"]
		role_f5beb129 -> task_ea6b0c41 [label="13 " color="#a8a224" fontcolor="#a8a224" id=edge_8b2fd76f labeltooltip="13 " tooltip="13 "]
		task_7dfc3bb9 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy" color="#a8a224" id=task_7dfc3bb9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy"]
		role_f5beb129 -> task_7dfc3bb9 [label="14 " color="#a8a224" fontcolor="#a8a224" id=edge_3c00015d labeltooltip="14 " tooltip="14 "]
		task_94b27a96 [label="kubeinit.kubeinit.kubeinit_cdk : Create kube directory" color="#a8a224" id=task_94b27a96 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Create kube directory"]
		role_f5beb129 -> task_94b27a96 [label="15 " color="#a8a224" fontcolor="#a8a224" id=edge_1f145cbc labeltooltip="15 " tooltip="15 "]
		task_93e59afb [label="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node" color="#a8a224" id=task_93e59afb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node"]
		role_f5beb129 -> task_93e59afb [label="16 " color="#a8a224" fontcolor="#a8a224" id=edge_1bdb0805 labeltooltip="16 " tooltip="16 "]
		task_b071e36f [label="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig" color="#a8a224" id=task_b071e36f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig"]
		role_f5beb129 -> task_b071e36f [label="17 " color="#a8a224" fontcolor="#a8a224" id=edge_570a2ea4 labeltooltip="17 " tooltip="17 "]
		task_065bf27e [label="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster" color="#a8a224" id=task_065bf27e shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster"]
		role_f5beb129 -> task_065bf27e [label="18 " color="#a8a224" fontcolor="#a8a224" id=edge_f8bab714 labeltooltip="18 " tooltip="18 "]
	}
	subgraph "task-deploy-cluster" {
		role_939cc752 [label="[role] task-deploy-cluster" color="#a8a224" id=role_939cc752 tooltip="task-deploy-cluster"]
		role_939cc752 -> role_b7987408 [label="1 [when: not services_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_82be9187 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_939cc752 -> role_f5beb129 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_e4b4fff7 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_c2b082a3 [label="[role] Read podman secrets if running from the container" color="#a8a224" id=role_c2b082a3 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_a06343a0 [label="[role] Prepare environment if needed" color="#a8a224" id=role_a06343a0 tooltip="Prepare environment if needed"]
		role_a06343a0 -> role_c2b082a3 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#a8a224" fontcolor="#a8a224" id=edge_c67c4802 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_5a263045 [label="[role] Gather network and host facts for guest" color="#a8a224" id=role_5a263045 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_cc684b75 [label="[role] Prepare services if needed" color="#a8a224" id=role_cc684b75 tooltip="Prepare services if needed"]
		role_cc684b75 -> role_a06343a0 [label="1 [when: not environment_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_2ec81aa2 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_cc684b75 -> role_5a263045 [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_3fd5e75e labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_7458e453 [label="[role] Deploy the apps" color="#a8a224" id=role_7458e453 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_d23157cc [label="[role] Configure NFS" color="#a8a224" id=role_d23157cc tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_e0c4c8eb [label="[role] Delegate to distro role to run post-deployment tasks" color="#a8a224" id=role_e0c4c8eb tooltip="Delegate to distro role to run post-deployment tasks"]
		role_e0c4c8eb -> role_7458e453 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_cbd2c459 labeltooltip="1 " tooltip="1 "]
		role_e0c4c8eb -> role_d23157cc [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#a8a224" fontcolor="#a8a224" id=edge_44e96af4 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_0acf2b3b [label="[role] task-post-deployment" color="#a8a224" id=role_0acf2b3b tooltip="task-post-deployment"]
		role_0acf2b3b -> role_cc684b75 [label="1 [when: not services_prepared]" color="#a8a224" fontcolor="#a8a224" id=edge_b399dd5d labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_0acf2b3b -> role_e0c4c8eb [label="2 " color="#a8a224" fontcolor="#a8a224" id=edge_17673e03 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_4daaa626 -> block_35454281 [label=1 color="#a8a224" fontcolor="#a8a224" id=edge_6237e4ff labeltooltip=1 tooltip=1]
		subgraph cluster_block_35454281 {
			block_35454281 [label="[block] Prepare the environment" color="#a8a224" id=block_35454281 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_35454281 -> role_14df47b8 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_538fad75 labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_932ade8f [label=2 color="#a8a224" fontcolor="#a8a224" id=edge_cc907fe3 labeltooltip=2 tooltip=2]
		subgraph cluster_block_932ade8f {
			block_932ade8f [label="[block] Cleanup hypervisors" color="#a8a224" id=block_932ade8f labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_932ade8f -> role_88a8731c [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_cbd1f70e labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_5b932ae3 [label=3 color="#a8a224" fontcolor="#a8a224" id=edge_ab18d0af labeltooltip=3 tooltip=3]
		subgraph cluster_block_5b932ae3 {
			block_5b932ae3 [label="[block] Run validations on cluster resources" color="#a8a224" id=block_5b932ae3 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_5b932ae3 -> role_f46be752 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_3b934739 labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_e5fb835b [label=4 color="#a8a224" fontcolor="#a8a224" id=edge_c1b4fc2e labeltooltip=4 tooltip=4]
		subgraph cluster_block_e5fb835b {
			block_e5fb835b [label="[block] Create the cluster network resources" color="#a8a224" id=block_e5fb835b labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_e5fb835b -> role_0237201a [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_55eb3332 labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_855c189c [label=5 color="#a8a224" fontcolor="#a8a224" id=edge_cf449cfe labeltooltip=5 tooltip=5]
		subgraph cluster_block_855c189c {
			block_855c189c [label="[block] Create services the cluster will need" color="#a8a224" id=block_855c189c labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_855c189c -> role_e2074bc1 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_9dba63ac labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_8cb06d57 [label=6 color="#a8a224" fontcolor="#a8a224" id=edge_19da7b92 labeltooltip=6 tooltip=6]
		subgraph cluster_block_8cb06d57 {
			block_8cb06d57 [label="[block] Prepare to deploy the cluster" color="#a8a224" id=block_8cb06d57 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_8cb06d57 -> role_43455d4c [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_dca9525f labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_99ccd68a [label=7 color="#a8a224" fontcolor="#a8a224" id=edge_1cb2118a labeltooltip=7 tooltip=7]
		subgraph cluster_block_99ccd68a {
			block_99ccd68a [label="[block] Download cloud images" color="#a8a224" id=block_99ccd68a labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_99ccd68a -> role_93053726 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_dabe82af labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_05f959b7 [label=8 color="#a8a224" fontcolor="#a8a224" id=edge_3e9d13ae labeltooltip=8 tooltip=8]
		subgraph cluster_block_05f959b7 {
			block_05f959b7 [label="[block] Deploy the cluster" color="#a8a224" id=block_05f959b7 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_05f959b7 -> role_939cc752 [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_b52b3ead labeltooltip="1 " tooltip="1 "]
		}
		play_4daaa626 -> block_9eabd563 [label=9 color="#a8a224" fontcolor="#a8a224" id=edge_ef2adae2 labeltooltip=9 tooltip=9]
		subgraph cluster_block_9eabd563 {
			block_9eabd563 [label="[block] Run any post-deployment tasks" color="#a8a224" id=block_9eabd563 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_9eabd563 -> role_0acf2b3b [label="1 " color="#a8a224" fontcolor="#a8a224" id=edge_abc341e2 labeltooltip="1 " tooltip="1 "]
		}
	}
}
