digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_4b35d843 [label="Play: Initial setup (1)" color="#2578a7" fontcolor="#ffffff" id=play_4b35d843 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_4b35d843 [label="1 " color="#2578a7" fontcolor="#2578a7" id=edge_b134be61 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_a3c16553 [label="[role] Read podman secrets if running from the container" color="#2578a7" id=role_a3c16553 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_21fd3b1e [label="[role] task-gather-facts" color="#2578a7" id=role_21fd3b1e tooltip="task-gather-facts"]
		role_21fd3b1e -> role_a3c16553 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2578a7" fontcolor="#2578a7" id=edge_0e3549f4 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_451df026 [label="[role] Read podman secrets if running from the container" color="#2578a7" id=role_451df026 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_69ea2513 [label="[role] task-prepare-hypervisors" color="#2578a7" id=role_69ea2513 tooltip="task-prepare-hypervisors"]
		role_69ea2513 -> role_451df026 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2578a7" fontcolor="#2578a7" id=edge_13327eaa labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_4b35d843 -> block_f6861aaa [label=1 color="#2578a7" fontcolor="#2578a7" id=edge_cabb15c2 labeltooltip=1 tooltip=1]
		subgraph cluster_block_f6861aaa {
			block_f6861aaa [label="[block] Gather facts about the deployment environment" color="#2578a7" id=block_f6861aaa labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_f6861aaa -> role_21fd3b1e [label="1 " color="#2578a7" fontcolor="#2578a7" id=edge_8db1d192 labeltooltip="1 " tooltip="1 "]
		}
		play_4b35d843 -> block_ede80fec [label=2 color="#2578a7" fontcolor="#2578a7" id=edge_ff5f4646 labeltooltip=2 tooltip=2]
		subgraph cluster_block_ede80fec {
			block_ede80fec [label="[block] Prepare the hypervisors" color="#2578a7" id=block_ede80fec labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_ede80fec -> role_69ea2513 [label="1 " color="#2578a7" fontcolor="#2578a7" id=edge_a3e81373 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_35b87e3a [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#272fa5" fontcolor="#ffffff" id=play_35b87e3a shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_35b87e3a [label="2 " color="#272fa5" fontcolor="#272fa5" id=edge_9e505da9 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_5da345cf [label="[role] Provision the libvirt services on the hypervisor" color="#272fa5" id=role_5da345cf tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_841ff0f4 [label="[role] Prepare each hypervisor in the deployment" color="#272fa5" id=role_841ff0f4 tooltip="Prepare each hypervisor in the deployment"]
		role_841ff0f4 -> role_5da345cf [label="1 " color="#272fa5" fontcolor="#272fa5" id=edge_c858cb67 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_35b87e3a -> block_bde3f326 [label=1 color="#272fa5" fontcolor="#272fa5" id=edge_bd8f8bac labeltooltip=1 tooltip=1]
		subgraph cluster_block_bde3f326 {
			block_bde3f326 [label="[block] Prepare individual hypervisors" color="#272fa5" id=block_bde3f326 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_bde3f326 -> role_841ff0f4 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#272fa5" fontcolor="#272fa5" id=edge_971a75c3 labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_81ba33ff [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#2279aa" fontcolor="#ffffff" id=play_81ba33ff shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_81ba33ff [label="3 " color="#2279aa" fontcolor="#2279aa" id=edge_3cafe249 labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_ae318362 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_ae318362 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_59a3cc17 [label="[role] task-prepare-environment" color="#2279aa" id=role_59a3cc17 tooltip="task-prepare-environment"]
		role_59a3cc17 -> role_ae318362 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_7ef47c8e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_881ce48a [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_881ce48a tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_c617070b [label="[role] Prepare environment if not prepared" color="#2279aa" id=role_c617070b tooltip="Prepare environment if not prepared"]
		role_c617070b -> role_881ce48a [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_c3c918de labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_64a1d9b7 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#2279aa" id=role_64a1d9b7 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_ffb86849 [label="[role] task-cleanup-hypervisors" color="#2279aa" id=role_ffb86849 tooltip="task-cleanup-hypervisors"]
		role_ffb86849 -> role_c617070b [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_e20c4f4e labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_ffb86849 -> role_64a1d9b7 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_4a023889 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_2696ed94 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_2696ed94 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_530fd414 [label="[role] Prepare environment if not prepared" color="#2279aa" id=role_530fd414 tooltip="Prepare environment if not prepared"]
		role_530fd414 -> role_2696ed94 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_66705322 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_9a65fe41 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#2279aa" id=role_9a65fe41 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_bfd357f7 [label="[role] Cleanup hypervisors if needed" color="#2279aa" id=role_bfd357f7 tooltip="Cleanup hypervisors if needed"]
		role_bfd357f7 -> role_530fd414 [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_645dca00 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_bfd357f7 -> role_9a65fe41 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_c47d0c36 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_e33f6528 [label="[role] task-run-validations" color="#2279aa" id=role_e33f6528 tooltip="task-run-validations"]
		role_e33f6528 -> role_bfd357f7 [label="1 [when: not hypervisors_cleaned]" color="#2279aa" fontcolor="#2279aa" id=edge_adf007a6 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_290e106e [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_290e106e tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_7c798822 [label="[role] Prepare environment if not prepared" color="#2279aa" id=role_7c798822 tooltip="Prepare environment if not prepared"]
		role_7c798822 -> role_290e106e [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_99d16b1a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_cae667fe [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#2279aa" id=role_cae667fe tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_59fff1a0 [label="[role] Cleanup hypervisors if needed" color="#2279aa" id=role_59fff1a0 tooltip="Cleanup hypervisors if needed"]
		role_59fff1a0 -> role_7c798822 [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_d9b4cf3b labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_59fff1a0 -> role_cae667fe [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_77eb29ab labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_21b855cd [label="[role] task-create-network" color="#2279aa" id=role_21b855cd tooltip="task-create-network"]
		role_21b855cd -> role_59fff1a0 [label="1 [when: not hypervisors_cleaned]" color="#2279aa" fontcolor="#2279aa" id=edge_ce3182eb labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_8a1920ca [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_8a1920ca tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_00b1840f [label="[role] Prepare environment if not prepared" color="#2279aa" id=role_00b1840f tooltip="Prepare environment if not prepared"]
		role_00b1840f -> role_8a1920ca [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_46fbbce6 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_65921f9a [label="[role] Prepare podman" color="#2279aa" id=role_65921f9a tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_7178ef0c [label="[role] Create systemd service for podman container" color="#2279aa" id=role_7178ef0c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_04e9c728 [label="[role] Configure Bind" color="#2279aa" id=role_04e9c728 tooltip="Configure Bind"]
		role_04e9c728 -> role_7178ef0c [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_5a6e9c9a labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_8ba40b2f [label="[role] Create systemd service for podman container" color="#2279aa" id=role_8ba40b2f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_cd996cb2 [label="[role] Configure Dnsmasq" color="#2279aa" id=role_cd996cb2 tooltip="Configure Dnsmasq"]
		role_cd996cb2 -> role_8ba40b2f [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_a92b8a48 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_9331b9ad [label="[role] Create systemd service for podman container" color="#2279aa" id=role_9331b9ad tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_fb41d0b9 [label="[role] Configure HAProxy" color="#2279aa" id=role_fb41d0b9 tooltip="Configure HAProxy"]
		role_fb41d0b9 -> role_9331b9ad [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_3ac4a86a labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_107e4e80 [label="[role] Create systemd service for podman container" color="#2279aa" id=role_107e4e80 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_6f69a0e7 [label="[role] Configure Nexus" color="#2279aa" id=role_6f69a0e7 tooltip="Configure Nexus"]
		role_6f69a0e7 -> role_107e4e80 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_8500102e labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_400e5859 [label="[role] Create systemd service for podman container" color="#2279aa" id=role_400e5859 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_fc939c88 [label="[role] Configure Apache" color="#2279aa" id=role_fc939c88 tooltip="Configure Apache"]
		role_fc939c88 -> role_400e5859 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_ffed77ac labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_7ec1bfcc [label="[role] Create systemd service for podman container" color="#2279aa" id=role_7ec1bfcc tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_ea4999ae [label="[role] Configure a local container image registry" color="#2279aa" id=role_ea4999ae tooltip="Configure a local container image registry"]
		role_ea4999ae -> role_7ec1bfcc [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_677513ed labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_a5780c6b [label="[role] task-create-services" color="#2279aa" id=role_a5780c6b tooltip="task-create-services"]
		role_a5780c6b -> role_00b1840f [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_ae60cbe7 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_a5780c6b -> role_65921f9a [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_5608177e labeltooltip="2 " tooltip="2 "]
		role_a5780c6b -> role_04e9c728 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_bfeafb9b labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_a5780c6b -> role_cd996cb2 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_2af21ebf labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_a5780c6b -> role_fb41d0b9 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_92eb97c0 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_a5780c6b -> role_6f69a0e7 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_0aaa6bab labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_a5780c6b -> role_fc939c88 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_c14ae305 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_a5780c6b -> role_ea4999ae [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#2279aa" fontcolor="#2279aa" id=edge_0abeb147 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_4d1e8e99 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_4d1e8e99 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_3b23b56c [label="[role] Prepare environment if needed" color="#2279aa" id=role_3b23b56c tooltip="Prepare environment if needed"]
		role_3b23b56c -> role_4d1e8e99 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_e5b669e7 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_8c051d15 [label="[role] Gather network and host facts for guest" color="#2279aa" id=role_8c051d15 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_13d62caa [label="[role] Prepare services if needed" color="#2279aa" id=role_13d62caa tooltip="Prepare services if needed"]
		role_13d62caa -> role_3b23b56c [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_4ce50326 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_13d62caa -> role_8c051d15 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_d24dc431 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_bfa8323a [label="[role] Create systemd service for podman container" color="#2279aa" id=role_bfa8323a tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_65da4688 [label="[role] Gather network and host facts for provision service" color="#2279aa" id=role_65da4688 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_699e0c4c [label="[role] Setup the cluster provision container" color="#2279aa" id=role_699e0c4c tooltip="Setup the cluster provision container"]
		role_699e0c4c -> role_bfa8323a [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_72fb81b7 labeltooltip="1 " tooltip="1 "]
		role_699e0c4c -> role_65da4688 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_be58be2e labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_4b8634a6 [label="[role] Delegate to the distro role to prepare the cluster" color="#2279aa" id=role_4b8634a6 tooltip="Delegate to the distro role to prepare the cluster"]
		role_4b8634a6 -> role_699e0c4c [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_b6b9bd91 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_1ec1d149 [label="[role] task-prepare-cluster" color="#2279aa" id=role_1ec1d149 tooltip="task-prepare-cluster"]
		role_1ec1d149 -> role_13d62caa [label="1 [when: not services_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_b655f59a labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_1ec1d149 -> role_4b8634a6 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_b791af98 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_b3942814 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_b3942814 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_a5209937 [label="[role] Prepare environment if not prepared" color="#2279aa" id=role_a5209937 tooltip="Prepare environment if not prepared"]
		role_a5209937 -> role_b3942814 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_bc65148f labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_3093bef7 [label="[role] task-download-images" color="#2279aa" id=role_3093bef7 tooltip="task-download-images"]
		role_3093bef7 -> role_a5209937 [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_83fc4e17 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_377e7db4 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_377e7db4 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_706d2080 [label="[role] Prepare environment if needed" color="#2279aa" id=role_706d2080 tooltip="Prepare environment if needed"]
		role_706d2080 -> role_377e7db4 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_28c33a2b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_b2815e2d [label="[role] Gather network and host facts for guest" color="#2279aa" id=role_b2815e2d tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_4ba08bb8 [label="[role] Prepare services if needed" color="#2279aa" id=role_4ba08bb8 tooltip="Prepare services if needed"]
		role_4ba08bb8 -> role_706d2080 [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_65c3ee8a labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_4ba08bb8 -> role_b2815e2d [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_4b638c10 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_1acde39f [label="[role] Deploy the cluster nodes" color="#2279aa" id=role_1acde39f tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_7ee26db8 [label="[role] Delegate to the distro role to deploy the cluster" color="#2279aa" id=role_7ee26db8 tooltip="Delegate to the distro role to deploy the cluster"]
		role_7ee26db8 -> role_1acde39f [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#2279aa" fontcolor="#2279aa" id=edge_7dbb78f8 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_5409761f [label="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template" color="#2279aa" id=task_5409761f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the cluster template"]
		role_7ee26db8 -> task_5409761f [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_791f7309 labeltooltip="2 " tooltip="2 "]
		task_07904918 [label="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template" color="#2279aa" id=task_07904918 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Render the bundle template"]
		role_7ee26db8 -> task_07904918 [label="3 " color="#2279aa" fontcolor="#2279aa" id=edge_3a5dd195 labeltooltip="3 " tooltip="3 "]
		task_545418c2 [label="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts" color="#2279aa" id=task_545418c2 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add host keys to known_hosts"]
		role_7ee26db8 -> task_545418c2 [label="4 " color="#2279aa" fontcolor="#2279aa" id=edge_8fe2124a labeltooltip="4 " tooltip="4 "]
		task_29fe8ba9 [label="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer" color="#2279aa" id=task_29fe8ba9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Install the CDK juju installer"]
		role_7ee26db8 -> task_29fe8ba9 [label="5 " color="#2279aa" fontcolor="#2279aa" id=edge_387227ee labeltooltip="5 " tooltip="5 "]
		task_5ffa4c44 [label="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster" color="#2279aa" id=task_5ffa4c44 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add the CDK cluster"]
		role_7ee26db8 -> task_5ffa4c44 [label="6 " color="#2279aa" fontcolor="#2279aa" id=edge_b3a439bd labeltooltip="6 " tooltip="6 "]
		task_9dc6738a [label="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes" color="#2279aa" id=task_9dc6738a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Copy juju client key to cluster nodes"]
		role_7ee26db8 -> task_9dc6738a [label="7 " color="#2279aa" fontcolor="#2279aa" id=edge_9043f5b6 labeltooltip="7 " tooltip="7 "]
		task_59d612c0 [label="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller" color="#2279aa" id=task_59d612c0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Bootstrap the CDK controller"]
		role_7ee26db8 -> task_59d612c0 [label="8 " color="#2279aa" fontcolor="#2279aa" id=edge_bcb0390c labeltooltip="8 " tooltip="8 "]
		task_22d1ae0a [label="kubeinit.kubeinit.kubeinit_cdk : Show juju info" color="#2279aa" id=task_22d1ae0a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Show juju info"]
		role_7ee26db8 -> task_22d1ae0a [label="9 " color="#2279aa" fontcolor="#2279aa" id=edge_2f28cf06 labeltooltip="9 " tooltip="9 "]
		task_b9226b26 [label="kubeinit.kubeinit.kubeinit_cdk : Add machines" color="#2279aa" id=task_b9226b26 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Add machines"]
		role_7ee26db8 -> task_b9226b26 [label="10 " color="#2279aa" fontcolor="#2279aa" id=edge_6204c787 labeltooltip="10 " tooltip="10 "]
		task_8dcff612 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started" color="#2279aa" id=task_8dcff612 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that all cluster nodes are started"]
		role_7ee26db8 -> task_8dcff612 [label="11 " color="#2279aa" fontcolor="#2279aa" id=edge_9e02aa7f labeltooltip="11 " tooltip="11 "]
		task_9183e854 [label="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK" color="#2279aa" id=task_9183e854 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Deploy CDK"]
		role_7ee26db8 -> task_9183e854 [label="12 " color="#2279aa" fontcolor="#2279aa" id=edge_d205c0bc labeltooltip="12 " tooltip="12 "]
		task_ba5273b0 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy" color="#2279aa" id=task_ba5273b0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the etcd cluster is up and healthy"]
		role_7ee26db8 -> task_ba5273b0 [label="13 " color="#2279aa" fontcolor="#2279aa" id=edge_e84569ad labeltooltip="13 " tooltip="13 "]
		task_de60cfb8 [label="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy" color="#2279aa" id=task_de60cfb8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Verify that the kubernetes_master application is up and healthy"]
		role_7ee26db8 -> task_de60cfb8 [label="14 " color="#2279aa" fontcolor="#2279aa" id=edge_d17d4fda labeltooltip="14 " tooltip="14 "]
		task_be92d112 [label="kubeinit.kubeinit.kubeinit_cdk : Create kube directory" color="#2279aa" id=task_be92d112 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Create kube directory"]
		role_7ee26db8 -> task_be92d112 [label="15 " color="#2279aa" fontcolor="#2279aa" id=edge_c117fc76 labeltooltip="15 " tooltip="15 "]
		task_4b754896 [label="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node" color="#2279aa" id=task_4b754896 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Get the kubectl binary and kubeconfig from the first controller node"]
		role_7ee26db8 -> task_4b754896 [label="16 " color="#2279aa" fontcolor="#2279aa" id=edge_34444c04 labeltooltip="16 " tooltip="16 "]
		task_33e923eb [label="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig" color="#2279aa" id=task_33e923eb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Autoload kubeconfig"]
		role_7ee26db8 -> task_33e923eb [label="17 " color="#2279aa" fontcolor="#2279aa" id=edge_2fe95630 labeltooltip="17 " tooltip="17 "]
		task_04de5bf6 [label="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster" color="#2279aa" id=task_04de5bf6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_cdk : Finished deploying cluster"]
		role_7ee26db8 -> task_04de5bf6 [label="18 " color="#2279aa" fontcolor="#2279aa" id=edge_e782d275 labeltooltip="18 " tooltip="18 "]
	}
	subgraph "task-deploy-cluster" {
		role_f8f4fd3f [label="[role] task-deploy-cluster" color="#2279aa" id=role_f8f4fd3f tooltip="task-deploy-cluster"]
		role_f8f4fd3f -> role_4ba08bb8 [label="1 [when: not services_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_3d20953a labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_f8f4fd3f -> role_7ee26db8 [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_113d8e76 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_d9d63a52 [label="[role] Read podman secrets if running from the container" color="#2279aa" id=role_d9d63a52 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_73357052 [label="[role] Prepare environment if needed" color="#2279aa" id=role_73357052 tooltip="Prepare environment if needed"]
		role_73357052 -> role_d9d63a52 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#2279aa" fontcolor="#2279aa" id=edge_7a51e782 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_0915e19b [label="[role] Gather network and host facts for guest" color="#2279aa" id=role_0915e19b tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_2a12a052 [label="[role] Prepare services if needed" color="#2279aa" id=role_2a12a052 tooltip="Prepare services if needed"]
		role_2a12a052 -> role_73357052 [label="1 [when: not environment_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_93613671 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_2a12a052 -> role_0915e19b [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_27b7f06b labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_6fda0627 [label="[role] Deploy the apps" color="#2279aa" id=role_6fda0627 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_7eec3c84 [label="[role] Configure NFS" color="#2279aa" id=role_7eec3c84 tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_2ffebc4e [label="[role] Delegate to distro role to run post-deployment tasks" color="#2279aa" id=role_2ffebc4e tooltip="Delegate to distro role to run post-deployment tasks"]
		role_2ffebc4e -> role_6fda0627 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_7768226d labeltooltip="1 " tooltip="1 "]
		role_2ffebc4e -> role_7eec3c84 [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#2279aa" fontcolor="#2279aa" id=edge_7ccff171 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_383a2289 [label="[role] task-post-deployment" color="#2279aa" id=role_383a2289 tooltip="task-post-deployment"]
		role_383a2289 -> role_2a12a052 [label="1 [when: not services_prepared]" color="#2279aa" fontcolor="#2279aa" id=edge_d2fb518c labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_383a2289 -> role_2ffebc4e [label="2 " color="#2279aa" fontcolor="#2279aa" id=edge_bfe2b442 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_81ba33ff -> block_0ce4ee11 [label=1 color="#2279aa" fontcolor="#2279aa" id=edge_093e5a07 labeltooltip=1 tooltip=1]
		subgraph cluster_block_0ce4ee11 {
			block_0ce4ee11 [label="[block] Prepare the environment" color="#2279aa" id=block_0ce4ee11 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_0ce4ee11 -> role_59a3cc17 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_16972155 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_ec7d65e9 [label=2 color="#2279aa" fontcolor="#2279aa" id=edge_484e1094 labeltooltip=2 tooltip=2]
		subgraph cluster_block_ec7d65e9 {
			block_ec7d65e9 [label="[block] Cleanup hypervisors" color="#2279aa" id=block_ec7d65e9 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_ec7d65e9 -> role_ffb86849 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_7ba98943 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_26d860b3 [label=3 color="#2279aa" fontcolor="#2279aa" id=edge_11f2eb08 labeltooltip=3 tooltip=3]
		subgraph cluster_block_26d860b3 {
			block_26d860b3 [label="[block] Run validations on cluster resources" color="#2279aa" id=block_26d860b3 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_26d860b3 -> role_e33f6528 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_9016d720 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_fc2d0aed [label=4 color="#2279aa" fontcolor="#2279aa" id=edge_9a06fcf1 labeltooltip=4 tooltip=4]
		subgraph cluster_block_fc2d0aed {
			block_fc2d0aed [label="[block] Create the cluster network resources" color="#2279aa" id=block_fc2d0aed labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_fc2d0aed -> role_21b855cd [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_1968579b labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_db078006 [label=5 color="#2279aa" fontcolor="#2279aa" id=edge_a34bf2bc labeltooltip=5 tooltip=5]
		subgraph cluster_block_db078006 {
			block_db078006 [label="[block] Create services the cluster will need" color="#2279aa" id=block_db078006 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_db078006 -> role_a5780c6b [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_73679320 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_b7e37c89 [label=6 color="#2279aa" fontcolor="#2279aa" id=edge_4d9a5048 labeltooltip=6 tooltip=6]
		subgraph cluster_block_b7e37c89 {
			block_b7e37c89 [label="[block] Prepare to deploy the cluster" color="#2279aa" id=block_b7e37c89 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_b7e37c89 -> role_1ec1d149 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_7ccf6174 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_01c9f373 [label=7 color="#2279aa" fontcolor="#2279aa" id=edge_710d4a8f labeltooltip=7 tooltip=7]
		subgraph cluster_block_01c9f373 {
			block_01c9f373 [label="[block] Download cloud images" color="#2279aa" id=block_01c9f373 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_01c9f373 -> role_3093bef7 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_307f15f8 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_a15bf201 [label=8 color="#2279aa" fontcolor="#2279aa" id=edge_feb00445 labeltooltip=8 tooltip=8]
		subgraph cluster_block_a15bf201 {
			block_a15bf201 [label="[block] Deploy the cluster" color="#2279aa" id=block_a15bf201 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_a15bf201 -> role_f8f4fd3f [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_c461e399 labeltooltip="1 " tooltip="1 "]
		}
		play_81ba33ff -> block_8cc91fd1 [label=9 color="#2279aa" fontcolor="#2279aa" id=edge_f51390cd labeltooltip=9 tooltip=9]
		subgraph cluster_block_8cc91fd1 {
			block_8cc91fd1 [label="[block] Run any post-deployment tasks" color="#2279aa" id=block_8cc91fd1 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_8cc91fd1 -> role_383a2289 [label="1 " color="#2279aa" fontcolor="#2279aa" id=edge_6d0f890b labeltooltip="1 " tooltip="1 "]
		}
	}
}
