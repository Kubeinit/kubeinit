digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_213f224e [label="Play: Initial setup (1)" color="#b6165e" fontcolor="#ffffff" id=play_213f224e shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_213f224e [label="1 " color="#b6165e" fontcolor="#b6165e" id=edge_bcc7f923 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_6fae4da5 [label="[role] Read podman secrets if running from the container" color="#b6165e" id=role_6fae4da5 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_3daa9d02 [label="[role] task-gather-facts" color="#b6165e" id=role_3daa9d02 tooltip="task-gather-facts"]
		role_3daa9d02 -> role_6fae4da5 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b6165e" fontcolor="#b6165e" id=edge_606ca2a6 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_9d55959b [label="[role] Read podman secrets if running from the container" color="#b6165e" id=role_9d55959b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_b3e588ba [label="[role] task-prepare-hypervisors" color="#b6165e" id=role_b3e588ba tooltip="task-prepare-hypervisors"]
		role_b3e588ba -> role_9d55959b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b6165e" fontcolor="#b6165e" id=edge_e23ecba1 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_213f224e -> block_6819969c [label=1 color="#b6165e" fontcolor="#b6165e" id=edge_2ac88c82 labeltooltip=1 tooltip=1]
		subgraph cluster_block_6819969c {
			block_6819969c [label="[block] Gather facts about the deployment environment" color="#b6165e" id=block_6819969c labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_6819969c -> role_3daa9d02 [label="1 " color="#b6165e" fontcolor="#b6165e" id=edge_5d2657b3 labeltooltip="1 " tooltip="1 "]
		}
		play_213f224e -> block_0659b045 [label=2 color="#b6165e" fontcolor="#b6165e" id=edge_fc0f7647 labeltooltip=2 tooltip=2]
		subgraph cluster_block_0659b045 {
			block_0659b045 [label="[block] Prepare the hypervisors" color="#b6165e" id=block_0659b045 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_0659b045 -> role_b3e588ba [label="1 " color="#b6165e" fontcolor="#b6165e" id=edge_28c96007 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_93d9a16a [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#804c75" fontcolor="#ffffff" id=play_93d9a16a shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_93d9a16a [label="2 " color="#804c75" fontcolor="#804c75" id=edge_40f42648 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_11adf6aa [label="[role] Provision the libvirt services on the hypervisor" color="#804c75" id=role_11adf6aa tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_f7cfc316 [label="[role] Prepare each hypervisor in the deployment" color="#804c75" id=role_f7cfc316 tooltip="Prepare each hypervisor in the deployment"]
		role_f7cfc316 -> role_11adf6aa [label="1 " color="#804c75" fontcolor="#804c75" id=edge_955c4f2e labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_93d9a16a -> block_e1a89f68 [label=1 color="#804c75" fontcolor="#804c75" id=edge_a2365530 labeltooltip=1 tooltip=1]
		subgraph cluster_block_e1a89f68 {
			block_e1a89f68 [label="[block] Prepare individual hypervisors" color="#804c75" id=block_e1a89f68 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_e1a89f68 -> role_f7cfc316 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#804c75" fontcolor="#804c75" id=edge_7156a4ee labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_51541b2b [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#556c77" fontcolor="#ffffff" id=play_51541b2b shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_51541b2b [label="3 " color="#556c77" fontcolor="#556c77" id=edge_4a531b9a labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_d463c426 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_d463c426 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_87d5109f [label="[role] task-prepare-environment" color="#556c77" id=role_87d5109f tooltip="task-prepare-environment"]
		role_87d5109f -> role_d463c426 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_75179e72 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_6edde8f5 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_6edde8f5 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_4ce0f50f [label="[role] Prepare environment if not prepared" color="#556c77" id=role_4ce0f50f tooltip="Prepare environment if not prepared"]
		role_4ce0f50f -> role_6edde8f5 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_3dd372ea labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_8e284e65 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#556c77" id=role_8e284e65 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_b30ddd92 [label="[role] task-cleanup-hypervisors" color="#556c77" id=role_b30ddd92 tooltip="task-cleanup-hypervisors"]
		role_b30ddd92 -> role_4ce0f50f [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_1ad85219 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_b30ddd92 -> role_8e284e65 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_4b482b2f labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_35ddc9c2 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_35ddc9c2 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_5c58541e [label="[role] Prepare environment if not prepared" color="#556c77" id=role_5c58541e tooltip="Prepare environment if not prepared"]
		role_5c58541e -> role_35ddc9c2 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_2d92f832 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_239dcb6d [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#556c77" id=role_239dcb6d tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_7a73d570 [label="[role] Cleanup hypervisors if needed" color="#556c77" id=role_7a73d570 tooltip="Cleanup hypervisors if needed"]
		role_7a73d570 -> role_5c58541e [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_430dc2d2 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_7a73d570 -> role_239dcb6d [label="2 " color="#556c77" fontcolor="#556c77" id=edge_1da99cf0 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_28965996 [label="[role] task-run-validations" color="#556c77" id=role_28965996 tooltip="task-run-validations"]
		role_28965996 -> role_7a73d570 [label="1 [when: not hypervisors_cleaned]" color="#556c77" fontcolor="#556c77" id=edge_ea29a658 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_da7162ee [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_da7162ee tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_421ade4d [label="[role] Prepare environment if not prepared" color="#556c77" id=role_421ade4d tooltip="Prepare environment if not prepared"]
		role_421ade4d -> role_da7162ee [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_678c3c8c labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_2fc813c1 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#556c77" id=role_2fc813c1 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_c37bb1fa [label="[role] Cleanup hypervisors if needed" color="#556c77" id=role_c37bb1fa tooltip="Cleanup hypervisors if needed"]
		role_c37bb1fa -> role_421ade4d [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_d11562c4 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_c37bb1fa -> role_2fc813c1 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_e335a620 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_479144ea [label="[role] task-create-network" color="#556c77" id=role_479144ea tooltip="task-create-network"]
		role_479144ea -> role_c37bb1fa [label="1 [when: not hypervisors_cleaned]" color="#556c77" fontcolor="#556c77" id=edge_5cef82dc labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_43dda18b [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_43dda18b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_ae459197 [label="[role] Prepare environment if not prepared" color="#556c77" id=role_ae459197 tooltip="Prepare environment if not prepared"]
		role_ae459197 -> role_43dda18b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_0d782db5 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_dc4ef62b [label="[role] Prepare podman" color="#556c77" id=role_dc4ef62b tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_9eaae545 [label="[role] Create systemd service for podman container" color="#556c77" id=role_9eaae545 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_8fda4bb0 [label="[role] Configure Bind" color="#556c77" id=role_8fda4bb0 tooltip="Configure Bind"]
		role_8fda4bb0 -> role_9eaae545 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_7a6d00e3 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_cacae34c [label="[role] Create systemd service for podman container" color="#556c77" id=role_cacae34c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_e81cf12d [label="[role] Configure Dnsmasq" color="#556c77" id=role_e81cf12d tooltip="Configure Dnsmasq"]
		role_e81cf12d -> role_cacae34c [label="1 " color="#556c77" fontcolor="#556c77" id=edge_76eb1442 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_3b733d02 [label="[role] Create systemd service for podman container" color="#556c77" id=role_3b733d02 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_d37d9c45 [label="[role] Configure HAProxy" color="#556c77" id=role_d37d9c45 tooltip="Configure HAProxy"]
		role_d37d9c45 -> role_3b733d02 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_e5d9c678 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_ba1ecabe [label="[role] Create systemd service for podman container" color="#556c77" id=role_ba1ecabe tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_e62ba1f5 [label="[role] Configure Nexus" color="#556c77" id=role_e62ba1f5 tooltip="Configure Nexus"]
		role_e62ba1f5 -> role_ba1ecabe [label="1 " color="#556c77" fontcolor="#556c77" id=edge_3108903b labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_3c3c881f [label="[role] Create systemd service for podman container" color="#556c77" id=role_3c3c881f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_87eb57d1 [label="[role] Configure Apache" color="#556c77" id=role_87eb57d1 tooltip="Configure Apache"]
		role_87eb57d1 -> role_3c3c881f [label="1 " color="#556c77" fontcolor="#556c77" id=edge_36d98d65 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_004eb457 [label="[role] Create systemd service for podman container" color="#556c77" id=role_004eb457 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_050724e7 [label="[role] Configure a local container image registry" color="#556c77" id=role_050724e7 tooltip="Configure a local container image registry"]
		role_050724e7 -> role_004eb457 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_0120c27a labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_28529d72 [label="[role] task-create-services" color="#556c77" id=role_28529d72 tooltip="task-create-services"]
		role_28529d72 -> role_ae459197 [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_0d5cc60b labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_28529d72 -> role_dc4ef62b [label="2 " color="#556c77" fontcolor="#556c77" id=edge_a1be93b6 labeltooltip="2 " tooltip="2 "]
		role_28529d72 -> role_8fda4bb0 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_9ff62770 labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_28529d72 -> role_e81cf12d [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_1fcb8578 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_28529d72 -> role_d37d9c45 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_34e27600 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_28529d72 -> role_e62ba1f5 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_cff06b06 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_28529d72 -> role_87eb57d1 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_897ca704 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_28529d72 -> role_050724e7 [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#556c77" fontcolor="#556c77" id=edge_6320c129 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_60412442 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_60412442 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_51bf4aae [label="[role] Prepare environment if needed" color="#556c77" id=role_51bf4aae tooltip="Prepare environment if needed"]
		role_51bf4aae -> role_60412442 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_c1e8fb0b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_7bf50613 [label="[role] Gather network and host facts for guest" color="#556c77" id=role_7bf50613 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_1dda9202 [label="[role] Prepare services if needed" color="#556c77" id=role_1dda9202 tooltip="Prepare services if needed"]
		role_1dda9202 -> role_51bf4aae [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_7b5b2969 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_1dda9202 -> role_7bf50613 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_a3eb02bb labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_1c17e65f [label="[role] Create systemd service for podman container" color="#556c77" id=role_1c17e65f tooltip="Create systemd service for podman container"]
		task_85e9d548 [label="kubeinit.kubeinit.kubeinit_services : Ensure user specific systemd instance are persistent" color="#556c77" id=task_85e9d548 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Ensure user specific systemd instance are persistent"]
		role_1c17e65f -> task_85e9d548 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_f8b98d39 labeltooltip="1 " tooltip="1 "]
		task_6e8e2cd5 [label="kubeinit.kubeinit.kubeinit_services : Create systemd user directory" color="#556c77" id=task_6e8e2cd5 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create systemd user directory"]
		role_1c17e65f -> task_6e8e2cd5 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_5c4e651e labeltooltip="2 " tooltip="2 "]
		task_f7bb1ab6 [label="kubeinit.kubeinit.kubeinit_services : Copy the podman systemd service file" color="#556c77" id=task_f7bb1ab6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Copy the podman systemd service file"]
		role_1c17e65f -> task_f7bb1ab6 [label="3 " color="#556c77" fontcolor="#556c77" id=edge_51b12092 labeltooltip="3 " tooltip="3 "]
		task_c17a8962 [label="kubeinit.kubeinit.kubeinit_services : Reload systemd service" color="#556c77" id=task_c17a8962 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Reload systemd service"]
		role_1c17e65f -> task_c17a8962 [label="4 " color="#556c77" fontcolor="#556c77" id=edge_e6e511ce labeltooltip="4 " tooltip="4 "]
		task_5a215a5d [label="kubeinit.kubeinit.kubeinit_services : Enable {{ _param_systemd_service_name }}.service" color="#556c77" id=task_5a215a5d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Enable {{ _param_systemd_service_name }}.service"]
		role_1c17e65f -> task_5a215a5d [label="5 " color="#556c77" fontcolor="#556c77" id=edge_7a5b97cc labeltooltip="5 " tooltip="5 "]
		task_9cab67dc [label="kubeinit.kubeinit.kubeinit_services : Start {{ _param_systemd_service_name }}.service" color="#556c77" id=task_9cab67dc shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Start {{ _param_systemd_service_name }}.service"]
		role_1c17e65f -> task_9cab67dc [label="6 " color="#556c77" fontcolor="#556c77" id=edge_7a8d3977 labeltooltip="6 " tooltip="6 "]
	}
	subgraph "Gather network and host facts for provision service" {
		role_30d154b8 [label="[role] Gather network and host facts for provision service" color="#556c77" id=role_30d154b8 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_d5993841 [label="[role] Setup the cluster provision container" color="#556c77" id=role_d5993841 tooltip="Setup the cluster provision container"]
		task_cfda0a98 [label="kubeinit.kubeinit.kubeinit_services : Install buildah if required" color="#556c77" id=task_cfda0a98 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install buildah if required"]
		role_d5993841 -> task_cfda0a98 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_12ae29d3 labeltooltip="1 " tooltip="1 "]
		task_7e3a1b08 [label="kubeinit.kubeinit.kubeinit_services : Remove any old buildah container" color="#556c77" id=task_7e3a1b08 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Remove any old buildah container"]
		role_d5993841 -> task_7e3a1b08 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_44ff59f7 labeltooltip="2 " tooltip="2 "]
		task_9a8e90e5 [label="kubeinit.kubeinit.kubeinit_services : Create a new working container image (CentOS)" color="#556c77" id=task_9a8e90e5 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create a new working container image (CentOS)"]
		role_d5993841 -> task_9a8e90e5 [label="3 [when: kubeinit_deployment_os == 'centos']" color="#556c77" fontcolor="#556c77" id=edge_39a00b01 labeltooltip="3 [when: kubeinit_deployment_os == 'centos']" tooltip="3 [when: kubeinit_deployment_os == 'centos']"]
		task_d658d94d [label="kubeinit.kubeinit.kubeinit_services : Update the container" color="#556c77" id=task_d658d94d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the container"]
		role_d5993841 -> task_d658d94d [label="4 [when: kubeinit_deployment_os == 'centos']" color="#556c77" fontcolor="#556c77" id=edge_c21baa2d labeltooltip="4 [when: kubeinit_deployment_os == 'centos']" tooltip="4 [when: kubeinit_deployment_os == 'centos']"]
		task_ca053a01 [label="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need" color="#556c77" id=task_ca053a01 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need"]
		role_d5993841 -> task_ca053a01 [label="5 [when: kubeinit_deployment_os == 'centos']" color="#556c77" fontcolor="#556c77" id=edge_b79c9136 labeltooltip="5 [when: kubeinit_deployment_os == 'centos']" tooltip="5 [when: kubeinit_deployment_os == 'centos']"]
		task_ff250a70 [label="kubeinit.kubeinit.kubeinit_services : Create a new working container image" color="#556c77" id=task_ff250a70 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create a new working container image"]
		role_d5993841 -> task_ff250a70 [label="6 [when: kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_b2c4eb40 labeltooltip="6 [when: kubeinit_deployment_os == 'debian']" tooltip="6 [when: kubeinit_deployment_os == 'debian']"]
		task_ed3eee7c [label="kubeinit.kubeinit.kubeinit_services : Update the container" color="#556c77" id=task_ed3eee7c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the container"]
		role_d5993841 -> task_ed3eee7c [label="7 [when: kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_1e2dcf85 labeltooltip="7 [when: kubeinit_deployment_os == 'debian']" tooltip="7 [when: kubeinit_deployment_os == 'debian']"]
		task_3ba89cb0 [label="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need" color="#556c77" id=task_3ba89cb0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need"]
		role_d5993841 -> task_3ba89cb0 [label="8 [when: kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_257d1556 labeltooltip="8 [when: kubeinit_deployment_os == 'debian']" tooltip="8 [when: kubeinit_deployment_os == 'debian']"]
		task_85df8e71 [label="kubeinit.kubeinit.kubeinit_services : Missing privilege separation directory" color="#556c77" id=task_85df8e71 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Missing privilege separation directory"]
		role_d5993841 -> task_85df8e71 [label="9 [when: kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_d236d316 labeltooltip="9 [when: kubeinit_deployment_os == 'debian']" tooltip="9 [when: kubeinit_deployment_os == 'debian']"]
		task_d10e9dc0 [label="kubeinit.kubeinit.kubeinit_services : Create a new working container image" color="#556c77" id=task_d10e9dc0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create a new working container image"]
		role_d5993841 -> task_d10e9dc0 [label="10 [when: kubeinit_deployment_os == 'ubuntu']" color="#556c77" fontcolor="#556c77" id=edge_73e90143 labeltooltip="10 [when: kubeinit_deployment_os == 'ubuntu']" tooltip="10 [when: kubeinit_deployment_os == 'ubuntu']"]
		task_66aa2ce8 [label="kubeinit.kubeinit.kubeinit_services : Update the container" color="#556c77" id=task_66aa2ce8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the container"]
		role_d5993841 -> task_66aa2ce8 [label="11 [when: kubeinit_deployment_os == 'ubuntu']" color="#556c77" fontcolor="#556c77" id=edge_6f7334a2 labeltooltip="11 [when: kubeinit_deployment_os == 'ubuntu']" tooltip="11 [when: kubeinit_deployment_os == 'ubuntu']"]
		task_1a32dc8d [label="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need" color="#556c77" id=task_1a32dc8d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install commands and services we will need"]
		role_d5993841 -> task_1a32dc8d [label="12 [when: kubeinit_deployment_os == 'ubuntu']" color="#556c77" fontcolor="#556c77" id=edge_5ff6063d labeltooltip="12 [when: kubeinit_deployment_os == 'ubuntu']" tooltip="12 [when: kubeinit_deployment_os == 'ubuntu']"]
		task_bdc57b46 [label="kubeinit.kubeinit.kubeinit_services : Create folder normally done by service ssh start" color="#556c77" id=task_bdc57b46 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create folder normally done by service ssh start"]
		role_d5993841 -> task_bdc57b46 [label="13 [when: kubeinit_deployment_os == 'ubuntu']" color="#556c77" fontcolor="#556c77" id=edge_ccab3446 labeltooltip="13 [when: kubeinit_deployment_os == 'ubuntu']" tooltip="13 [when: kubeinit_deployment_os == 'ubuntu']"]
		task_f2a1602c [label="kubeinit.kubeinit.kubeinit_services : Set working directory inside container" color="#556c77" id=task_f2a1602c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Set working directory inside container"]
		role_d5993841 -> task_f2a1602c [label="14 " color="#556c77" fontcolor="#556c77" id=edge_6bc80458 labeltooltip="14 " tooltip="14 "]
		task_5ef79500 [label="kubeinit.kubeinit.kubeinit_services : Generate system ssh keys" color="#556c77" id=task_5ef79500 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Generate system ssh keys"]
		role_d5993841 -> task_5ef79500 [label="15 " color="#556c77" fontcolor="#556c77" id=edge_7e7121de labeltooltip="15 " tooltip="15 "]
		task_1a8f14e4 [label="kubeinit.kubeinit.kubeinit_services : Clear cmd" color="#556c77" id=task_1a8f14e4 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Clear cmd"]
		role_d5993841 -> task_1a8f14e4 [label="16 " color="#556c77" fontcolor="#556c77" id=edge_76abae0b labeltooltip="16 " tooltip="16 "]
		task_8a4fc1e3 [label="kubeinit.kubeinit.kubeinit_services : Set entrypoint" color="#556c77" id=task_8a4fc1e3 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Set entrypoint"]
		role_d5993841 -> task_8a4fc1e3 [label="17 " color="#556c77" fontcolor="#556c77" id=edge_d1330683 labeltooltip="17 " tooltip="17 "]
		task_60a3d631 [label="kubeinit.kubeinit.kubeinit_services : Set kubeinit-cluster-name label" color="#556c77" id=task_60a3d631 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Set kubeinit-cluster-name label"]
		role_d5993841 -> task_60a3d631 [label="18 " color="#556c77" fontcolor="#556c77" id=edge_95a43e25 labeltooltip="18 " tooltip="18 "]
		task_31fb4589 [label="kubeinit.kubeinit.kubeinit_services : Commit the image" color="#556c77" id=task_31fb4589 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Commit the image"]
		role_d5993841 -> task_31fb4589 [label="19 " color="#556c77" fontcolor="#556c77" id=edge_d7445495 labeltooltip="19 " tooltip="19 "]
		task_29ba75a4 [label="kubeinit.kubeinit.kubeinit_services : Remove the buildah container" color="#556c77" id=task_29ba75a4 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Remove the buildah container"]
		role_d5993841 -> task_29ba75a4 [label="20 " color="#556c77" fontcolor="#556c77" id=edge_0a8d937b labeltooltip="20 " tooltip="20 "]
		task_258275ce [label="kubeinit.kubeinit.kubeinit_services : Remove any previous provision container" color="#556c77" id=task_258275ce shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Remove any previous provision container"]
		role_d5993841 -> task_258275ce [label="21 " color="#556c77" fontcolor="#556c77" id=edge_63f01dc6 labeltooltip="21 " tooltip="21 "]
		task_07c2f4ab [label="kubeinit.kubeinit.kubeinit_services : Create podman provision container" color="#556c77" id=task_07c2f4ab shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create podman provision container"]
		role_d5993841 -> task_07c2f4ab [label="22 " color="#556c77" fontcolor="#556c77" id=edge_3c4026b1 labeltooltip="22 " tooltip="22 "]
		role_d5993841 -> role_1c17e65f [label="23 " color="#556c77" fontcolor="#556c77" id=edge_1516c05b labeltooltip="23 " tooltip="23 "]
		task_964978b0 [label="kubeinit.kubeinit.kubeinit_services : Add remote container to hosts" color="#556c77" id=task_964978b0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Add remote container to hosts"]
		role_d5993841 -> task_964978b0 [label="24 " color="#556c77" fontcolor="#556c77" id=edge_8d254166 labeltooltip="24 " tooltip="24 "]
		task_bacb3845 [label="kubeinit.kubeinit.kubeinit_services : Wait for connection to provision container" color="#556c77" id=task_bacb3845 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Wait for connection to provision container"]
		role_d5993841 -> task_bacb3845 [label="25 " color="#556c77" fontcolor="#556c77" id=edge_023be723 labeltooltip="25 " tooltip="25 "]
		task_ffb9fb44 [label="kubeinit.kubeinit.kubeinit_services : Read in the contents of domain.crt" color="#556c77" id=task_ffb9fb44 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Read in the contents of domain.crt"]
		role_d5993841 -> task_ffb9fb44 [label="26 " color="#556c77" fontcolor="#556c77" id=edge_1cf8cf14 labeltooltip="26 " tooltip="26 "]
		task_21d2eb47 [label="kubeinit.kubeinit.kubeinit_services : Wait for registry service to be available" color="#556c77" id=task_21d2eb47 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Wait for registry service to be available"]
		role_d5993841 -> task_21d2eb47 [label="27 " color="#556c77" fontcolor="#556c77" id=edge_08c2c355 labeltooltip="27 " tooltip="27 "]
		task_1c7a093c [label="kubeinit.kubeinit.kubeinit_services : Make sure packages to generate registry credentials are installed" color="#556c77" id=task_1c7a093c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Make sure packages to generate registry credentials are installed"]
		role_d5993841 -> task_1c7a093c [label="28 " color="#556c77" fontcolor="#556c77" id=edge_2c4e0b3e labeltooltip="28 " tooltip="28 "]
		task_3e19cfd9 [label="kubeinit.kubeinit.kubeinit_services : Install cryptography, passlib and nexus3-cli" color="#556c77" id=task_3e19cfd9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install cryptography, passlib and nexus3-cli"]
		role_d5993841 -> task_3e19cfd9 [label="29 " color="#556c77" fontcolor="#556c77" id=edge_9b867948 labeltooltip="29 " tooltip="29 "]
		task_5b53b1c5 [label="kubeinit.kubeinit.kubeinit_services : Remove nologin marker" color="#556c77" id=task_5b53b1c5 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Remove nologin marker"]
		role_d5993841 -> task_5b53b1c5 [label="30 " color="#556c77" fontcolor="#556c77" id=edge_63c30bb3 labeltooltip="30 " tooltip="30 "]
		task_4b7dd357 [label="kubeinit.kubeinit.kubeinit_services : Set disconnected_auth" color="#556c77" id=task_4b7dd357 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Set disconnected_auth"]
		role_d5993841 -> task_4b7dd357 [label="31 " color="#556c77" fontcolor="#556c77" id=edge_d798d076 labeltooltip="31 " tooltip="31 "]
		task_bc15a61d [label="kubeinit.kubeinit.kubeinit_services : Create registry auth for pullsecret" color="#556c77" id=task_bc15a61d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create registry auth for pullsecret"]
		role_d5993841 -> task_bc15a61d [label="32 " color="#556c77" fontcolor="#556c77" id=edge_b350b37c labeltooltip="32 " tooltip="32 "]
		task_eaa72b55 [label="kubeinit.kubeinit.kubeinit_services : Append auths to pullsecret" color="#556c77" id=task_eaa72b55 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Append auths to pullsecret"]
		role_d5993841 -> task_eaa72b55 [label="33 " color="#556c77" fontcolor="#556c77" id=edge_a3547385 labeltooltip="33 " tooltip="33 "]
		task_f1859472 [label="kubeinit.kubeinit.kubeinit_services : Override final kubeinit_registry_pullsecret with both auths" color="#556c77" id=task_f1859472 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Override final kubeinit_registry_pullsecret with both auths"]
		role_d5993841 -> task_f1859472 [label="34 " color="#556c77" fontcolor="#556c77" id=edge_52f3eb6a labeltooltip="34 " tooltip="34 "]
		task_0bb685e6 [label="kubeinit.kubeinit.kubeinit_services : Debug the creds dictionary" color="#556c77" id=task_0bb685e6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Debug the creds dictionary"]
		role_d5993841 -> task_0bb685e6 [label="35 " color="#556c77" fontcolor="#556c77" id=edge_fb42db1d labeltooltip="35 " tooltip="35 "]
		task_2ed1eecb [label="kubeinit.kubeinit.kubeinit_services : Write auth for disconnected registry auth details" color="#556c77" id=task_2ed1eecb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Write auth for disconnected registry auth details"]
		role_d5993841 -> task_2ed1eecb [label="36 " color="#556c77" fontcolor="#556c77" id=edge_b17de815 labeltooltip="36 " tooltip="36 "]
		task_c9761fb6 [label="kubeinit.kubeinit.kubeinit_services : Create registry auth pullsecret file" color="#556c77" id=task_c9761fb6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create registry auth pullsecret file"]
		role_d5993841 -> task_c9761fb6 [label="37 " color="#556c77" fontcolor="#556c77" id=edge_b9e39937 labeltooltip="37 " tooltip="37 "]
		task_82f21897 [label="kubeinit.kubeinit.kubeinit_services : Copy domain cert into services container" color="#556c77" id=task_82f21897 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Copy domain cert into services container"]
		role_d5993841 -> task_82f21897 [label="38 " color="#556c77" fontcolor="#556c77" id=edge_7ffd171b labeltooltip="38 " tooltip="38 "]
		task_075f1378 [label="kubeinit.kubeinit.kubeinit_services : Copy cert to pki directory" color="#556c77" id=task_075f1378 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Copy cert to pki directory"]
		role_d5993841 -> task_075f1378 [label="39 [when: kubeinit_deployment_os == 'centos']" color="#556c77" fontcolor="#556c77" id=edge_e8e33171 labeltooltip="39 [when: kubeinit_deployment_os == 'centos']" tooltip="39 [when: kubeinit_deployment_os == 'centos']"]
		task_4bb9a1f2 [label="kubeinit.kubeinit.kubeinit_services : Copy cert to pki directory" color="#556c77" id=task_4bb9a1f2 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Copy cert to pki directory"]
		role_d5993841 -> task_4bb9a1f2 [label="40 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_db9a4774 labeltooltip="40 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" tooltip="40 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']"]
		task_ccc6ebb8 [label="kubeinit.kubeinit.kubeinit_services : Install all certs in ubuntu" color="#556c77" id=task_ccc6ebb8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install all certs in ubuntu"]
		role_d5993841 -> task_ccc6ebb8 [label="41 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_15592c62 labeltooltip="41 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" tooltip="41 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']"]
		task_38e6e29f [label="kubeinit.kubeinit.kubeinit_services : Update the CA trust files" color="#556c77" id=task_38e6e29f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the CA trust files"]
		role_d5993841 -> task_38e6e29f [label="42 [when: kubeinit_deployment_os == 'centos']" color="#556c77" fontcolor="#556c77" id=edge_bedf2522 labeltooltip="42 [when: kubeinit_deployment_os == 'centos']" tooltip="42 [when: kubeinit_deployment_os == 'centos']"]
		task_c92534ee [label="kubeinit.kubeinit.kubeinit_services : Update the CA trust files" color="#556c77" id=task_c92534ee shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the CA trust files"]
		role_d5993841 -> task_c92534ee [label="43 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" color="#556c77" fontcolor="#556c77" id=edge_e971e6c2 labeltooltip="43 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']" tooltip="43 [when: kubeinit_deployment_os == 'ubuntu' or kubeinit_deployment_os == 'debian']"]
		task_b6385e71 [label="kubeinit.kubeinit.kubeinit_services : Create ~/.ssh directory" color="#556c77" id=task_b6385e71 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Create ~/.ssh directory"]
		role_d5993841 -> task_b6385e71 [label="44 " color="#556c77" fontcolor="#556c77" id=edge_6814da73 labeltooltip="44 " tooltip="44 "]
		task_808d721d [label="kubeinit.kubeinit.kubeinit_services : Generate an OpenSSH keypair for provision host" color="#556c77" id=task_808d721d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Generate an OpenSSH keypair for provision host"]
		role_d5993841 -> task_808d721d [label="45 " color="#556c77" fontcolor="#556c77" id=edge_17345bcb labeltooltip="45 " tooltip="45 "]
		task_ae1511e1 [label="kubeinit.kubeinit.kubeinit_services : Set authorized_key hostvar for provision service" color="#556c77" id=task_ae1511e1 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Set authorized_key hostvar for provision service"]
		role_d5993841 -> task_ae1511e1 [label="46 " color="#556c77" fontcolor="#556c77" id=edge_3bdb7e54 labeltooltip="46 " tooltip="46 "]
		task_90793208 [label="kubeinit.kubeinit.kubeinit_services : Add provision service authorized key to cluster authorized_keys" color="#556c77" id=task_90793208 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Add provision service authorized key to cluster authorized_keys"]
		role_d5993841 -> task_90793208 [label="47 " color="#556c77" fontcolor="#556c77" id=edge_392230e8 labeltooltip="47 " tooltip="47 "]
		task_fe289f47 [label="kubeinit.kubeinit.kubeinit_services : Install cluster authorized keys" color="#556c77" id=task_fe289f47 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Install cluster authorized keys"]
		role_d5993841 -> task_fe289f47 [label="48 " color="#556c77" fontcolor="#556c77" id=edge_2ef83a93 labeltooltip="48 " tooltip="48 "]
		task_2c71f6ac [label="kubeinit.kubeinit.kubeinit_services : Update the cluster authorized_keys" color="#556c77" id=task_2c71f6ac shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update the cluster authorized_keys"]
		role_d5993841 -> task_2c71f6ac [label="49 " color="#556c77" fontcolor="#556c77" id=edge_caf74a45 labeltooltip="49 " tooltip="49 "]
		task_8f72a27c [label="kubeinit.kubeinit.kubeinit_services : Add registry auth info to cluster vars" color="#556c77" id=task_8f72a27c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Add registry auth info to cluster vars"]
		role_d5993841 -> task_8f72a27c [label="50 " color="#556c77" fontcolor="#556c77" id=edge_9c5d8a56 labeltooltip="50 " tooltip="50 "]
		task_6c172dfd [label="kubeinit.kubeinit.kubeinit_services : Update kubeinit_cluster_hostvars" color="#556c77" id=task_6c172dfd shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Update kubeinit_cluster_hostvars"]
		role_d5993841 -> task_6c172dfd [label="51 " color="#556c77" fontcolor="#556c77" id=edge_55c7adfe labeltooltip="51 " tooltip="51 "]
		task_5725c93d [label="kubeinit.kubeinit.kubeinit_services : Make sure we can execute remote commands on {{ kubeinit_deployment_node_name }} before we continue" color="#556c77" id=task_5725c93d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_services : Make sure we can execute remote commands on {{ kubeinit_deployment_node_name }} before we continue"]
		role_d5993841 -> task_5725c93d [label="52 " color="#556c77" fontcolor="#556c77" id=edge_39e5d845 labeltooltip="52 " tooltip="52 "]
		role_d5993841 -> role_30d154b8 [label="53 " color="#556c77" fontcolor="#556c77" id=edge_21656502 labeltooltip="53 " tooltip="53 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_89fce6c3 [label="[role] Delegate to the distro role to prepare the cluster" color="#556c77" id=role_89fce6c3 tooltip="Delegate to the distro role to prepare the cluster"]
		role_89fce6c3 -> role_d5993841 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_578258b4 labeltooltip="1 " tooltip="1 "]
		task_61e1f405 [label="kubeinit.kubeinit.kubeinit_eks : Remove repo before adding it" color="#556c77" id=task_61e1f405 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Remove repo before adding it"]
		role_89fce6c3 -> task_61e1f405 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_29132d03 labeltooltip="2 " tooltip="2 "]
		task_3882e03f [label="kubeinit.kubeinit.kubeinit_eks : Creating a repository file for Kubernetes" color="#556c77" id=task_3882e03f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Creating a repository file for Kubernetes"]
		role_89fce6c3 -> task_3882e03f [label="3 " color="#556c77" fontcolor="#556c77" id=edge_32d203d2 labeltooltip="3 " tooltip="3 "]
		task_b0993c5d [label="kubeinit.kubeinit.kubeinit_eks : Adding repository details in Kubernetes repo file." color="#556c77" id=task_b0993c5d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Adding repository details in Kubernetes repo file."]
		role_89fce6c3 -> task_b0993c5d [label="4 " color="#556c77" fontcolor="#556c77" id=edge_27ea7735 labeltooltip="4 " tooltip="4 "]
		task_15e1e298 [label="kubeinit.kubeinit.kubeinit_eks : Fetch EKS kubernetes release" color="#556c77" id=task_15e1e298 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Fetch EKS kubernetes release"]
		role_89fce6c3 -> task_15e1e298 [label="5 " color="#556c77" fontcolor="#556c77" id=edge_f3ab995b labeltooltip="5 " tooltip="5 "]
		task_66d72995 [label="kubeinit.kubeinit.kubeinit_eks : Set EKS kubernetes major-minor fact" color="#556c77" id=task_66d72995 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Set EKS kubernetes major-minor fact"]
		role_89fce6c3 -> task_66d72995 [label="6 " color="#556c77" fontcolor="#556c77" id=edge_f6544edf labeltooltip="6 " tooltip="6 "]
		task_90c84e0d [label="kubeinit.kubeinit.kubeinit_eks : Discover the revision number for eks" color="#556c77" id=task_90c84e0d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Discover the revision number for eks"]
		role_89fce6c3 -> task_90c84e0d [label="7 " color="#556c77" fontcolor="#556c77" id=edge_04d71f9e labeltooltip="7 " tooltip="7 "]
		task_71df9598 [label="kubeinit.kubeinit.kubeinit_eks : Set EKS release number fact" color="#556c77" id=task_71df9598 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Set EKS release number fact"]
		role_89fce6c3 -> task_71df9598 [label="8 " color="#556c77" fontcolor="#556c77" id=edge_3e8973cd labeltooltip="8 " tooltip="8 "]
		task_98d7313b [label="kubeinit.kubeinit.kubeinit_eks : Discover the git tag for eks" color="#556c77" id=task_98d7313b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Discover the git tag for eks"]
		role_89fce6c3 -> task_98d7313b [label="9 " color="#556c77" fontcolor="#556c77" id=edge_8f1e030d labeltooltip="9 " tooltip="9 "]
		task_ec8697de [label="kubeinit.kubeinit.kubeinit_eks : Set EKS string facts" color="#556c77" id=task_ec8697de shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Set EKS string facts"]
		role_89fce6c3 -> task_ec8697de [label="10 " color="#556c77" fontcolor="#556c77" id=edge_e2187b64 labeltooltip="10 " tooltip="10 "]
		task_f6b14f45 [label="kubeinit.kubeinit.kubeinit_eks : Set complete EKS kubernetes version" color="#556c77" id=task_f6b14f45 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Set complete EKS kubernetes version"]
		role_89fce6c3 -> task_f6b14f45 [label="11 " color="#556c77" fontcolor="#556c77" id=edge_366db358 labeltooltip="11 " tooltip="11 "]
		task_294c9958 [label="kubeinit.kubeinit.kubeinit_eks : Install requirements" color="#556c77" id=task_294c9958 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Install requirements"]
		role_89fce6c3 -> task_294c9958 [label="12 " color="#556c77" fontcolor="#556c77" id=edge_b38d81b8 labeltooltip="12 " tooltip="12 "]
		task_9b03963a [label="kubeinit.kubeinit.kubeinit_eks : Install services requirements" color="#556c77" id=task_9b03963a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Install services requirements"]
		role_89fce6c3 -> task_9b03963a [label="13 " color="#556c77" fontcolor="#556c77" id=edge_5b7058ec labeltooltip="13 " tooltip="13 "]
		task_41c185d6 [label="kubeinit.kubeinit.kubeinit_eks : Install common requirements" color="#556c77" id=task_41c185d6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Install common requirements"]
		role_89fce6c3 -> task_41c185d6 [label="14 [when: kubeinit_eks_common_dependencies is defined]" color="#556c77" fontcolor="#556c77" id=edge_77a4a59d labeltooltip="14 [when: kubeinit_eks_common_dependencies is defined]" tooltip="14 [when: kubeinit_eks_common_dependencies is defined]"]
		task_76729ed7 [label="kubeinit.kubeinit.kubeinit_eks : Get the required container images" color="#556c77" id=task_76729ed7 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Get the required container images"]
		role_89fce6c3 -> task_76729ed7 [label="15 " color="#556c77" fontcolor="#556c77" id=edge_f47c3b02 labeltooltip="15 " tooltip="15 "]
		task_02c01d72 [label="kubeinit.kubeinit.kubeinit_eks : Mirror EKS remote registry to local" color="#556c77" id=task_02c01d72 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_eks : Mirror EKS remote registry to local"]
		role_89fce6c3 -> task_02c01d72 [label="16 [when: 'registry' in kubeinit_cluster_hostvars.services]" color="#556c77" fontcolor="#556c77" id=edge_1a541728 labeltooltip="16 [when: 'registry' in kubeinit_cluster_hostvars.services]" tooltip="16 [when: 'registry' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-prepare-cluster" {
		role_b28b9bee [label="[role] task-prepare-cluster" color="#556c77" id=role_b28b9bee tooltip="task-prepare-cluster"]
		role_b28b9bee -> role_1dda9202 [label="1 [when: not services_prepared]" color="#556c77" fontcolor="#556c77" id=edge_14a74a02 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_b28b9bee -> role_89fce6c3 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_0d393885 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_377803d5 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_377803d5 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_05893b7c [label="[role] Prepare environment if not prepared" color="#556c77" id=role_05893b7c tooltip="Prepare environment if not prepared"]
		role_05893b7c -> role_377803d5 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_891c7c17 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_913a0372 [label="[role] task-download-images" color="#556c77" id=role_913a0372 tooltip="task-download-images"]
		role_913a0372 -> role_05893b7c [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_550b6e8d labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_09cf6ef8 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_09cf6ef8 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_856970dc [label="[role] Prepare environment if needed" color="#556c77" id=role_856970dc tooltip="Prepare environment if needed"]
		role_856970dc -> role_09cf6ef8 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_ed071e75 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_05430c95 [label="[role] Gather network and host facts for guest" color="#556c77" id=role_05430c95 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_7b951907 [label="[role] Prepare services if needed" color="#556c77" id=role_7b951907 tooltip="Prepare services if needed"]
		role_7b951907 -> role_856970dc [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_a4b3e69b labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_7b951907 -> role_05430c95 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_54e14315 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_2a0eb6fd [label="[role] Deploy the cluster nodes" color="#556c77" id=role_2a0eb6fd tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_e50f1c14 [label="[role] Delegate to the distro role to deploy the cluster" color="#556c77" id=role_e50f1c14 tooltip="Delegate to the distro role to deploy the cluster"]
		role_e50f1c14 -> role_2a0eb6fd [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#556c77" fontcolor="#556c77" id=edge_8a761baa labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
	}
	subgraph "task-deploy-cluster" {
		role_28f5f187 [label="[role] task-deploy-cluster" color="#556c77" id=role_28f5f187 tooltip="task-deploy-cluster"]
		role_28f5f187 -> role_7b951907 [label="1 [when: not services_prepared]" color="#556c77" fontcolor="#556c77" id=edge_7507b167 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_28f5f187 -> role_e50f1c14 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_0b19a754 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_0c9a6544 [label="[role] Read podman secrets if running from the container" color="#556c77" id=role_0c9a6544 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_c5ceb305 [label="[role] Prepare environment if needed" color="#556c77" id=role_c5ceb305 tooltip="Prepare environment if needed"]
		role_c5ceb305 -> role_0c9a6544 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#556c77" fontcolor="#556c77" id=edge_5faedf51 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_34c1fef8 [label="[role] Gather network and host facts for guest" color="#556c77" id=role_34c1fef8 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_0c8c6e47 [label="[role] Prepare services if needed" color="#556c77" id=role_0c8c6e47 tooltip="Prepare services if needed"]
		role_0c8c6e47 -> role_c5ceb305 [label="1 [when: not environment_prepared]" color="#556c77" fontcolor="#556c77" id=edge_b1186c7b labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0c8c6e47 -> role_34c1fef8 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_8d8bcd7b labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_6f29749a [label="[role] Deploy the apps" color="#556c77" id=role_6f29749a tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_2ff6b437 [label="[role] Configure NFS" color="#556c77" id=role_2ff6b437 tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_f7d65277 [label="[role] Delegate to distro role to run post-deployment tasks" color="#556c77" id=role_f7d65277 tooltip="Delegate to distro role to run post-deployment tasks"]
		role_f7d65277 -> role_6f29749a [label="1 " color="#556c77" fontcolor="#556c77" id=edge_b544d4fe labeltooltip="1 " tooltip="1 "]
		role_f7d65277 -> role_2ff6b437 [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#556c77" fontcolor="#556c77" id=edge_ff10ed74 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_6225f7bc [label="[role] task-post-deployment" color="#556c77" id=role_6225f7bc tooltip="task-post-deployment"]
		role_6225f7bc -> role_0c8c6e47 [label="1 [when: not services_prepared]" color="#556c77" fontcolor="#556c77" id=edge_fb0f7e86 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_6225f7bc -> role_f7d65277 [label="2 " color="#556c77" fontcolor="#556c77" id=edge_1b0f45b2 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_51541b2b -> block_08e31a00 [label=1 color="#556c77" fontcolor="#556c77" id=edge_4947ebcc labeltooltip=1 tooltip=1]
		subgraph cluster_block_08e31a00 {
			block_08e31a00 [label="[block] Prepare the environment" color="#556c77" id=block_08e31a00 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_08e31a00 -> role_87d5109f [label="1 " color="#556c77" fontcolor="#556c77" id=edge_edb3d162 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_c0ab0d32 [label=2 color="#556c77" fontcolor="#556c77" id=edge_f41b83d5 labeltooltip=2 tooltip=2]
		subgraph cluster_block_c0ab0d32 {
			block_c0ab0d32 [label="[block] Cleanup hypervisors" color="#556c77" id=block_c0ab0d32 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_c0ab0d32 -> role_b30ddd92 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_9f89e5f6 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_7cdd86ea [label=3 color="#556c77" fontcolor="#556c77" id=edge_891cdda8 labeltooltip=3 tooltip=3]
		subgraph cluster_block_7cdd86ea {
			block_7cdd86ea [label="[block] Run validations on cluster resources" color="#556c77" id=block_7cdd86ea labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_7cdd86ea -> role_28965996 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_c6dc94f7 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_60bc2282 [label=4 color="#556c77" fontcolor="#556c77" id=edge_554e2f87 labeltooltip=4 tooltip=4]
		subgraph cluster_block_60bc2282 {
			block_60bc2282 [label="[block] Create the cluster network resources" color="#556c77" id=block_60bc2282 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_60bc2282 -> role_479144ea [label="1 " color="#556c77" fontcolor="#556c77" id=edge_870a61f8 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_71c74ca9 [label=5 color="#556c77" fontcolor="#556c77" id=edge_7634bd6a labeltooltip=5 tooltip=5]
		subgraph cluster_block_71c74ca9 {
			block_71c74ca9 [label="[block] Create services the cluster will need" color="#556c77" id=block_71c74ca9 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_71c74ca9 -> role_28529d72 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_bf27a9ed labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_64cf9cb6 [label=6 color="#556c77" fontcolor="#556c77" id=edge_971b342d labeltooltip=6 tooltip=6]
		subgraph cluster_block_64cf9cb6 {
			block_64cf9cb6 [label="[block] Prepare to deploy the cluster" color="#556c77" id=block_64cf9cb6 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_64cf9cb6 -> role_b28b9bee [label="1 " color="#556c77" fontcolor="#556c77" id=edge_83356b00 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_0913a381 [label=7 color="#556c77" fontcolor="#556c77" id=edge_9bf19af6 labeltooltip=7 tooltip=7]
		subgraph cluster_block_0913a381 {
			block_0913a381 [label="[block] Download cloud images" color="#556c77" id=block_0913a381 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_0913a381 -> role_913a0372 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_829dba98 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_6e4e7b8a [label=8 color="#556c77" fontcolor="#556c77" id=edge_bf80143d labeltooltip=8 tooltip=8]
		subgraph cluster_block_6e4e7b8a {
			block_6e4e7b8a [label="[block] Deploy the cluster" color="#556c77" id=block_6e4e7b8a labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_6e4e7b8a -> role_28f5f187 [label="1 " color="#556c77" fontcolor="#556c77" id=edge_3bf9d3b4 labeltooltip="1 " tooltip="1 "]
		}
		play_51541b2b -> block_83bd7a33 [label=9 color="#556c77" fontcolor="#556c77" id=edge_3507ed46 labeltooltip=9 tooltip=9]
		subgraph cluster_block_83bd7a33 {
			block_83bd7a33 [label="[block] Run any post-deployment tasks" color="#556c77" id=block_83bd7a33 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_83bd7a33 -> role_6225f7bc [label="1 " color="#556c77" fontcolor="#556c77" id=edge_807d2011 labeltooltip="1 " tooltip="1 "]
		}
	}
}
