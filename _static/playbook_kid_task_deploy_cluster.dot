digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_a8a9266c [label="Play: Initial setup (1)" color="#9bab21" fontcolor="#ffffff" id=play_a8a9266c shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_a8a9266c [label="1 " color="#9bab21" fontcolor="#9bab21" id=edge_e253cbc4 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_03fd7bbd [label="[role] Read podman secrets if running from the container" color="#9bab21" id=role_03fd7bbd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_3c117294 [label="[role] task-gather-facts" color="#9bab21" id=role_3c117294 tooltip="task-gather-facts"]
		role_3c117294 -> role_03fd7bbd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9bab21" fontcolor="#9bab21" id=edge_44a737a6 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_af1afffb [label="[role] Read podman secrets if running from the container" color="#9bab21" id=role_af1afffb tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_10a2a7bb [label="[role] task-prepare-hypervisors" color="#9bab21" id=role_10a2a7bb tooltip="task-prepare-hypervisors"]
		role_10a2a7bb -> role_af1afffb [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9bab21" fontcolor="#9bab21" id=edge_a5edc94d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_a8a9266c -> block_f97819f5 [label=1 color="#9bab21" fontcolor="#9bab21" id=edge_19651744 labeltooltip=1 tooltip=1]
		subgraph cluster_block_f97819f5 {
			block_f97819f5 [label="[block] Gather facts about the deployment environment" color="#9bab21" id=block_f97819f5 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_f97819f5 -> role_3c117294 [label="1 " color="#9bab21" fontcolor="#9bab21" id=edge_fa543dd1 labeltooltip="1 " tooltip="1 "]
		}
		play_a8a9266c -> block_3cecad57 [label=2 color="#9bab21" fontcolor="#9bab21" id=edge_2a5ca857 labeltooltip=2 tooltip=2]
		subgraph cluster_block_3cecad57 {
			block_3cecad57 [label="[block] Prepare the hypervisors" color="#9bab21" id=block_3cecad57 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_3cecad57 -> role_10a2a7bb [label="1 " color="#9bab21" fontcolor="#9bab21" id=edge_170f1ab8 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_4564ed42 [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#4ec20a" fontcolor="#ffffff" id=play_4564ed42 shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_4564ed42 [label="2 " color="#4ec20a" fontcolor="#4ec20a" id=edge_b287317f labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_1ce8a1d2 [label="[role] Provision the libvirt services on the hypervisor" color="#4ec20a" id=role_1ce8a1d2 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_114642be [label="[role] Prepare each hypervisor in the deployment" color="#4ec20a" id=role_114642be tooltip="Prepare each hypervisor in the deployment"]
		role_114642be -> role_1ce8a1d2 [label="1 " color="#4ec20a" fontcolor="#4ec20a" id=edge_f333b341 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_4564ed42 -> block_59a69590 [label=1 color="#4ec20a" fontcolor="#4ec20a" id=edge_780299f6 labeltooltip=1 tooltip=1]
		subgraph cluster_block_59a69590 {
			block_59a69590 [label="[block] Prepare individual hypervisors" color="#4ec20a" id=block_59a69590 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_59a69590 -> role_114642be [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#4ec20a" fontcolor="#4ec20a" id=edge_869bbc95 labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_2b1ea357 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#9d2f86" fontcolor="#ffffff" id=play_2b1ea357 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_2b1ea357 [label="3 " color="#9d2f86" fontcolor="#9d2f86" id=edge_29e5422d labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_fe651754 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_fe651754 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_9dc0c12d [label="[role] task-prepare-environment" color="#9d2f86" id=role_9dc0c12d tooltip="task-prepare-environment"]
		role_9dc0c12d -> role_fe651754 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_aca0963c labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_51f8aa6f [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_51f8aa6f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_d9c2e91e [label="[role] Prepare environment if not prepared" color="#9d2f86" id=role_d9c2e91e tooltip="Prepare environment if not prepared"]
		role_d9c2e91e -> role_51f8aa6f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_8d64edaa labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_1bcb5cf6 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#9d2f86" id=role_1bcb5cf6 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_0ab7e910 [label="[role] task-cleanup-hypervisors" color="#9d2f86" id=role_0ab7e910 tooltip="task-cleanup-hypervisors"]
		role_0ab7e910 -> role_d9c2e91e [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_f0ae3284 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0ab7e910 -> role_1bcb5cf6 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_ea6eb8be labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e16b4d68 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_e16b4d68 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_a7ed8b46 [label="[role] Prepare environment if not prepared" color="#9d2f86" id=role_a7ed8b46 tooltip="Prepare environment if not prepared"]
		role_a7ed8b46 -> role_e16b4d68 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_a51c3f55 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_5d2f1005 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#9d2f86" id=role_5d2f1005 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_c7dfe7e5 [label="[role] Cleanup hypervisors if needed" color="#9d2f86" id=role_c7dfe7e5 tooltip="Cleanup hypervisors if needed"]
		role_c7dfe7e5 -> role_a7ed8b46 [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_fb4b5686 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_c7dfe7e5 -> role_5d2f1005 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_07c54180 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_312a0c6b [label="[role] task-run-validations" color="#9d2f86" id=role_312a0c6b tooltip="task-run-validations"]
		role_312a0c6b -> role_c7dfe7e5 [label="1 [when: not hypervisors_cleaned]" color="#9d2f86" fontcolor="#9d2f86" id=edge_89fd698a labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_f562d704 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_f562d704 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_15067a08 [label="[role] Prepare environment if not prepared" color="#9d2f86" id=role_15067a08 tooltip="Prepare environment if not prepared"]
		role_15067a08 -> role_f562d704 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_3c33d958 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_b129ab64 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#9d2f86" id=role_b129ab64 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_9cb81b81 [label="[role] Cleanup hypervisors if needed" color="#9d2f86" id=role_9cb81b81 tooltip="Cleanup hypervisors if needed"]
		role_9cb81b81 -> role_15067a08 [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_8f9cefe9 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_9cb81b81 -> role_b129ab64 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_ae12970c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_64bafcae [label="[role] task-create-network" color="#9d2f86" id=role_64bafcae tooltip="task-create-network"]
		role_64bafcae -> role_9cb81b81 [label="1 [when: not hypervisors_cleaned]" color="#9d2f86" fontcolor="#9d2f86" id=edge_ce887e8d labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_7be7983a [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_7be7983a tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_d0a494af [label="[role] Prepare environment if not prepared" color="#9d2f86" id=role_d0a494af tooltip="Prepare environment if not prepared"]
		role_d0a494af -> role_7be7983a [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_e469b50d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_395ed1b4 [label="[role] Prepare podman" color="#9d2f86" id=role_395ed1b4 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_d392425c [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_d392425c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_0aae804b [label="[role] Configure Bind" color="#9d2f86" id=role_0aae804b tooltip="Configure Bind"]
		role_0aae804b -> role_d392425c [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_647c344d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_da5582ea [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_da5582ea tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_78f45c20 [label="[role] Configure Dnsmasq" color="#9d2f86" id=role_78f45c20 tooltip="Configure Dnsmasq"]
		role_78f45c20 -> role_da5582ea [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_27fd9352 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_2a0ccf08 [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_2a0ccf08 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_9049769b [label="[role] Configure HAProxy" color="#9d2f86" id=role_9049769b tooltip="Configure HAProxy"]
		role_9049769b -> role_2a0ccf08 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_2609b9d9 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_fe86ece8 [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_fe86ece8 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_a837b290 [label="[role] Configure Nexus" color="#9d2f86" id=role_a837b290 tooltip="Configure Nexus"]
		role_a837b290 -> role_fe86ece8 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_9a356bbb labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_a144223c [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_a144223c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_87d4534f [label="[role] Configure Apache" color="#9d2f86" id=role_87d4534f tooltip="Configure Apache"]
		role_87d4534f -> role_a144223c [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_268820fc labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_665bdb5b [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_665bdb5b tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_74165c83 [label="[role] Configure a local container image registry" color="#9d2f86" id=role_74165c83 tooltip="Configure a local container image registry"]
		role_74165c83 -> role_665bdb5b [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_419b2e71 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_ba52d9e3 [label="[role] task-create-services" color="#9d2f86" id=role_ba52d9e3 tooltip="task-create-services"]
		role_ba52d9e3 -> role_d0a494af [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_e045f1ae labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_ba52d9e3 -> role_395ed1b4 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_98532c2b labeltooltip="2 " tooltip="2 "]
		role_ba52d9e3 -> role_0aae804b [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_70e65dfd labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_ba52d9e3 -> role_78f45c20 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_9aa3db9a labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_ba52d9e3 -> role_9049769b [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_d60f53d2 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_ba52d9e3 -> role_a837b290 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_a0ad3170 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_ba52d9e3 -> role_87d4534f [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_a776ea44 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_ba52d9e3 -> role_74165c83 [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_7bb1897a labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_94fb5981 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_94fb5981 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_e857c9a6 [label="[role] Prepare environment if needed" color="#9d2f86" id=role_e857c9a6 tooltip="Prepare environment if needed"]
		role_e857c9a6 -> role_94fb5981 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_9d7d542b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_922f75d6 [label="[role] Gather network and host facts for guest" color="#9d2f86" id=role_922f75d6 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_defaec00 [label="[role] Prepare services if needed" color="#9d2f86" id=role_defaec00 tooltip="Prepare services if needed"]
		role_defaec00 -> role_e857c9a6 [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_b278ddab labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_defaec00 -> role_922f75d6 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_1840d3d0 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_e7f4839e [label="[role] Create systemd service for podman container" color="#9d2f86" id=role_e7f4839e tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_78817ec5 [label="[role] Gather network and host facts for provision service" color="#9d2f86" id=role_78817ec5 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_e4bc7b57 [label="[role] Setup the cluster provision container" color="#9d2f86" id=role_e4bc7b57 tooltip="Setup the cluster provision container"]
		role_e4bc7b57 -> role_e7f4839e [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_915e2801 labeltooltip="1 " tooltip="1 "]
		role_e4bc7b57 -> role_78817ec5 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_ef49c000 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_b3a515d2 [label="[role] Delegate to the distro role to prepare the cluster" color="#9d2f86" id=role_b3a515d2 tooltip="Delegate to the distro role to prepare the cluster"]
		role_b3a515d2 -> role_e4bc7b57 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_3848c842 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_ddc62c6a [label="[role] task-prepare-cluster" color="#9d2f86" id=role_ddc62c6a tooltip="task-prepare-cluster"]
		role_ddc62c6a -> role_defaec00 [label="1 [when: not services_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_1bc80e46 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_ddc62c6a -> role_b3a515d2 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_65babc60 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_bc245ed3 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_bc245ed3 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_050c2eab [label="[role] Prepare environment if not prepared" color="#9d2f86" id=role_050c2eab tooltip="Prepare environment if not prepared"]
		role_050c2eab -> role_bc245ed3 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_5a2a06f7 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_74089223 [label="[role] task-download-images" color="#9d2f86" id=role_74089223 tooltip="task-download-images"]
		role_74089223 -> role_050c2eab [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_e606d54f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_69651da2 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_69651da2 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_bbe1a0a2 [label="[role] Prepare environment if needed" color="#9d2f86" id=role_bbe1a0a2 tooltip="Prepare environment if needed"]
		role_bbe1a0a2 -> role_69651da2 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_1fc77bcf labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_4e3c3883 [label="[role] Gather network and host facts for guest" color="#9d2f86" id=role_4e3c3883 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_d80cf822 [label="[role] Prepare services if needed" color="#9d2f86" id=role_d80cf822 tooltip="Prepare services if needed"]
		role_d80cf822 -> role_bbe1a0a2 [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_34d5c08c labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_d80cf822 -> role_4e3c3883 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_e0d9e39a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_9da75230 [label="[role] Deploy the cluster nodes" color="#9d2f86" id=role_9da75230 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_1bc493c1 [label="[role] Delegate to the distro role to deploy the cluster" color="#9d2f86" id=role_1bc493c1 tooltip="Delegate to the distro role to deploy the cluster"]
		role_1bc493c1 -> role_9da75230 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#9d2f86" fontcolor="#9d2f86" id=edge_1ca56c79 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_8551ad51 [label="kubeinit.kubeinit.kubeinit_kid : Install controller requirements" color="#9d2f86" id=task_8551ad51 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install controller requirements"]
		role_1bc493c1 -> task_8551ad51 [label="2 [when: kubeinit_kid_controller_dependencies is defined]" color="#9d2f86" fontcolor="#9d2f86" id=edge_989ae938 labeltooltip="2 [when: kubeinit_kid_controller_dependencies is defined]" tooltip="2 [when: kubeinit_kid_controller_dependencies is defined]"]
		task_3998da08 [label="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements" color="#9d2f86" id=task_3998da08 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements"]
		role_1bc493c1 -> task_3998da08 [label="3 [when: kubeinit_kid_compute_dependencies is defined]" color="#9d2f86" fontcolor="#9d2f86" id=edge_e4f5317f labeltooltip="3 [when: kubeinit_kid_compute_dependencies is defined]" tooltip="3 [when: kubeinit_kid_compute_dependencies is defined]"]
		task_ae67f0c9 [label="kubeinit.kubeinit.kubeinit_kid : Create kube directory" color="#9d2f86" id=task_ae67f0c9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Create kube directory"]
		role_1bc493c1 -> task_ae67f0c9 [label="4 " color="#9d2f86" fontcolor="#9d2f86" id=edge_a7188f3e labeltooltip="4 " tooltip="4 "]
		task_3b4614aa [label="kubeinit.kubeinit.kubeinit_kid : Touch a file" color="#9d2f86" id=task_3b4614aa shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Touch a file"]
		role_1bc493c1 -> task_3b4614aa [label="5 " color="#9d2f86" fontcolor="#9d2f86" id=edge_a4274486 labeltooltip="5 " tooltip="5 "]
	}
	subgraph "task-deploy-cluster" {
		role_3d79b684 [label="[role] task-deploy-cluster" color="#9d2f86" id=role_3d79b684 tooltip="task-deploy-cluster"]
		role_3d79b684 -> role_d80cf822 [label="1 [when: not services_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_63ed4bc6 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_3d79b684 -> role_1bc493c1 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_71867f20 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e76405a9 [label="[role] Read podman secrets if running from the container" color="#9d2f86" id=role_e76405a9 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_dfe0ac18 [label="[role] Prepare environment if needed" color="#9d2f86" id=role_dfe0ac18 tooltip="Prepare environment if needed"]
		role_dfe0ac18 -> role_e76405a9 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#9d2f86" fontcolor="#9d2f86" id=edge_c9805d10 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_b75e9ee2 [label="[role] Gather network and host facts for guest" color="#9d2f86" id=role_b75e9ee2 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_ce40a8d7 [label="[role] Prepare services if needed" color="#9d2f86" id=role_ce40a8d7 tooltip="Prepare services if needed"]
		role_ce40a8d7 -> role_dfe0ac18 [label="1 [when: not environment_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_8f70c01a labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_ce40a8d7 -> role_b75e9ee2 [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_385932ea labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_da65424a [label="[role] Configure NFS" color="#9d2f86" id=role_da65424a tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_4b4897af [label="[role] Delegate to distro role to run post-deployment tasks" color="#9d2f86" id=role_4b4897af tooltip="Delegate to distro role to run post-deployment tasks"]
		role_4b4897af -> role_da65424a [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#9d2f86" fontcolor="#9d2f86" id=edge_1684ede0 labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_3e8d2a07 [label="[role] task-post-deployment" color="#9d2f86" id=role_3e8d2a07 tooltip="task-post-deployment"]
		role_3e8d2a07 -> role_ce40a8d7 [label="1 [when: not services_prepared]" color="#9d2f86" fontcolor="#9d2f86" id=edge_fe8417a7 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_3e8d2a07 -> role_4b4897af [label="2 " color="#9d2f86" fontcolor="#9d2f86" id=edge_19523e08 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_2b1ea357 -> block_982f0f94 [label=1 color="#9d2f86" fontcolor="#9d2f86" id=edge_c2eb9a83 labeltooltip=1 tooltip=1]
		subgraph cluster_block_982f0f94 {
			block_982f0f94 [label="[block] Prepare the environment" color="#9d2f86" id=block_982f0f94 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_982f0f94 -> role_9dc0c12d [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_3e382952 labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_da32c2f2 [label=2 color="#9d2f86" fontcolor="#9d2f86" id=edge_56e52320 labeltooltip=2 tooltip=2]
		subgraph cluster_block_da32c2f2 {
			block_da32c2f2 [label="[block] Cleanup hypervisors" color="#9d2f86" id=block_da32c2f2 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_da32c2f2 -> role_0ab7e910 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_9b23773b labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_4a9ff042 [label=3 color="#9d2f86" fontcolor="#9d2f86" id=edge_4ab0be66 labeltooltip=3 tooltip=3]
		subgraph cluster_block_4a9ff042 {
			block_4a9ff042 [label="[block] Run validations on cluster resources" color="#9d2f86" id=block_4a9ff042 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_4a9ff042 -> role_312a0c6b [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_77a77076 labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_4d3eaf4d [label=4 color="#9d2f86" fontcolor="#9d2f86" id=edge_1c882388 labeltooltip=4 tooltip=4]
		subgraph cluster_block_4d3eaf4d {
			block_4d3eaf4d [label="[block] Create the cluster network resources" color="#9d2f86" id=block_4d3eaf4d labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_4d3eaf4d -> role_64bafcae [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_dfd3f6e3 labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_fb5a0033 [label=5 color="#9d2f86" fontcolor="#9d2f86" id=edge_4d8159b5 labeltooltip=5 tooltip=5]
		subgraph cluster_block_fb5a0033 {
			block_fb5a0033 [label="[block] Create services the cluster will need" color="#9d2f86" id=block_fb5a0033 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_fb5a0033 -> role_ba52d9e3 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_879ec57e labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_c9f2351c [label=6 color="#9d2f86" fontcolor="#9d2f86" id=edge_997bd0fb labeltooltip=6 tooltip=6]
		subgraph cluster_block_c9f2351c {
			block_c9f2351c [label="[block] Prepare to deploy the cluster" color="#9d2f86" id=block_c9f2351c labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_c9f2351c -> role_ddc62c6a [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_269e9768 labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_dedeaff9 [label=7 color="#9d2f86" fontcolor="#9d2f86" id=edge_c6eca9d6 labeltooltip=7 tooltip=7]
		subgraph cluster_block_dedeaff9 {
			block_dedeaff9 [label="[block] Download cloud images" color="#9d2f86" id=block_dedeaff9 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_dedeaff9 -> role_74089223 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_9b36deba labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_4f1c1113 [label=8 color="#9d2f86" fontcolor="#9d2f86" id=edge_0d502df1 labeltooltip=8 tooltip=8]
		subgraph cluster_block_4f1c1113 {
			block_4f1c1113 [label="[block] Deploy the cluster" color="#9d2f86" id=block_4f1c1113 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_4f1c1113 -> role_3d79b684 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_09d3641a labeltooltip="1 " tooltip="1 "]
		}
		play_2b1ea357 -> block_3c383bdc [label=9 color="#9d2f86" fontcolor="#9d2f86" id=edge_ef9cf736 labeltooltip=9 tooltip=9]
		subgraph cluster_block_3c383bdc {
			block_3c383bdc [label="[block] Run any post-deployment tasks" color="#9d2f86" id=block_3c383bdc labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_3c383bdc -> role_3e8d2a07 [label="1 " color="#9d2f86" fontcolor="#9d2f86" id=edge_c94274c8 labeltooltip="1 " tooltip="1 "]
		}
	}
}
