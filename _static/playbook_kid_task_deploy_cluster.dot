digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_96e30a4d [label="Play: Initial setup (1)" color="#3e8e43" fontcolor="#ffffff" id=play_96e30a4d shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_96e30a4d [label="1 " color="#3e8e43" fontcolor="#3e8e43" id=edge_386db6fd labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_ab216f04 [label="[role] Read podman secrets if running from the container" color="#3e8e43" id=role_ab216f04 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_4091ffe1 [label="[role] task-gather-facts" color="#3e8e43" id=role_4091ffe1 tooltip="task-gather-facts"]
		role_4091ffe1 -> role_ab216f04 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#3e8e43" fontcolor="#3e8e43" id=edge_8170b53a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_f3c74d42 [label="[role] Read podman secrets if running from the container" color="#3e8e43" id=role_f3c74d42 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_92e44980 [label="[role] task-prepare-hypervisors" color="#3e8e43" id=role_92e44980 tooltip="task-prepare-hypervisors"]
		role_92e44980 -> role_f3c74d42 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#3e8e43" fontcolor="#3e8e43" id=edge_96f29dac labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_96e30a4d -> block_6fc5afff [label=1 color="#3e8e43" fontcolor="#3e8e43" id=edge_1955a996 labeltooltip=1 tooltip=1]
		subgraph cluster_block_6fc5afff {
			block_6fc5afff [label="[block] Gather facts about the deployment environment" color="#3e8e43" id=block_6fc5afff labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_6fc5afff -> role_4091ffe1 [label="1 " color="#3e8e43" fontcolor="#3e8e43" id=edge_ca49a86b labeltooltip="1 " tooltip="1 "]
		}
		play_96e30a4d -> block_7e7d3408 [label=2 color="#3e8e43" fontcolor="#3e8e43" id=edge_b7b62f48 labeltooltip=2 tooltip=2]
		subgraph cluster_block_7e7d3408 {
			block_7e7d3408 [label="[block] Prepare the hypervisors" color="#3e8e43" id=block_7e7d3408 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_7e7d3408 -> role_92e44980 [label="1 " color="#3e8e43" fontcolor="#3e8e43" id=edge_b66c4f47 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_498677c8 [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#7d8a42" fontcolor="#ffffff" id=play_498677c8 shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_498677c8 [label="2 " color="#7d8a42" fontcolor="#7d8a42" id=edge_5903a280 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_8d77caad [label="[role] Provision the libvirt services on the hypervisor" color="#7d8a42" id=role_8d77caad tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_10fcd4da [label="[role] Prepare each hypervisor in the deployment" color="#7d8a42" id=role_10fcd4da tooltip="Prepare each hypervisor in the deployment"]
		role_10fcd4da -> role_8d77caad [label="1 " color="#7d8a42" fontcolor="#7d8a42" id=edge_1020dc0c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_498677c8 -> block_a75caf3b [label=1 color="#7d8a42" fontcolor="#7d8a42" id=edge_43a86b6d labeltooltip=1 tooltip=1]
		subgraph cluster_block_a75caf3b {
			block_a75caf3b [label="[block] Prepare individual hypervisors" color="#7d8a42" id=block_a75caf3b labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_a75caf3b -> role_10fcd4da [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#7d8a42" fontcolor="#7d8a42" id=edge_fb527e63 labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_4a353a2f [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#340ebe" fontcolor="#ffffff" id=play_4a353a2f shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_4a353a2f [label="3 " color="#340ebe" fontcolor="#340ebe" id=edge_d77dff8d labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_c5f9c831 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_c5f9c831 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_c1036d60 [label="[role] task-prepare-environment" color="#340ebe" id=role_c1036d60 tooltip="task-prepare-environment"]
		role_c1036d60 -> role_c5f9c831 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_850fa228 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_47dfc21a [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_47dfc21a tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_9ddd0775 [label="[role] Prepare environment if not prepared" color="#340ebe" id=role_9ddd0775 tooltip="Prepare environment if not prepared"]
		role_9ddd0775 -> role_47dfc21a [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_9dcb8868 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_03810fc6 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#340ebe" id=role_03810fc6 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_649d1fe4 [label="[role] task-cleanup-hypervisors" color="#340ebe" id=role_649d1fe4 tooltip="task-cleanup-hypervisors"]
		role_649d1fe4 -> role_9ddd0775 [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_3a6d97e6 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_649d1fe4 -> role_03810fc6 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_0f0c5dee labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_fe5f3039 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_fe5f3039 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_11dd3bdd [label="[role] Prepare environment if not prepared" color="#340ebe" id=role_11dd3bdd tooltip="Prepare environment if not prepared"]
		role_11dd3bdd -> role_fe5f3039 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_d9e0907d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_356fff9b [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#340ebe" id=role_356fff9b tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_55675267 [label="[role] Cleanup hypervisors if needed" color="#340ebe" id=role_55675267 tooltip="Cleanup hypervisors if needed"]
		role_55675267 -> role_11dd3bdd [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_0ef07dc6 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_55675267 -> role_356fff9b [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_034d2ba3 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_594cd1fb [label="[role] task-run-validations" color="#340ebe" id=role_594cd1fb tooltip="task-run-validations"]
		role_594cd1fb -> role_55675267 [label="1 [when: not hypervisors_cleaned]" color="#340ebe" fontcolor="#340ebe" id=edge_f61e2137 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_a81a885b [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_a81a885b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_8f267e41 [label="[role] Prepare environment if not prepared" color="#340ebe" id=role_8f267e41 tooltip="Prepare environment if not prepared"]
		role_8f267e41 -> role_a81a885b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_0594647e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_fdadf6b9 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#340ebe" id=role_fdadf6b9 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_0fde333a [label="[role] Cleanup hypervisors if needed" color="#340ebe" id=role_0fde333a tooltip="Cleanup hypervisors if needed"]
		role_0fde333a -> role_8f267e41 [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_0e422074 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0fde333a -> role_fdadf6b9 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_b4f01928 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_7fc4fb8a [label="[role] task-create-network" color="#340ebe" id=role_7fc4fb8a tooltip="task-create-network"]
		role_7fc4fb8a -> role_0fde333a [label="1 [when: not hypervisors_cleaned]" color="#340ebe" fontcolor="#340ebe" id=edge_e2b3eab8 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_08f92cb6 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_08f92cb6 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_800c2bc0 [label="[role] Prepare environment if not prepared" color="#340ebe" id=role_800c2bc0 tooltip="Prepare environment if not prepared"]
		role_800c2bc0 -> role_08f92cb6 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_7a213122 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_f5db9240 [label="[role] Prepare podman" color="#340ebe" id=role_f5db9240 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_ae058f4c [label="[role] Create systemd service for podman container" color="#340ebe" id=role_ae058f4c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_881e69f8 [label="[role] Configure Bind" color="#340ebe" id=role_881e69f8 tooltip="Configure Bind"]
		role_881e69f8 -> role_ae058f4c [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_11e7fc1d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_d91dd5b2 [label="[role] Create systemd service for podman container" color="#340ebe" id=role_d91dd5b2 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_777dee5b [label="[role] Configure Dnsmasq" color="#340ebe" id=role_777dee5b tooltip="Configure Dnsmasq"]
		role_777dee5b -> role_d91dd5b2 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_1a2eb954 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_426b2800 [label="[role] Create systemd service for podman container" color="#340ebe" id=role_426b2800 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_d9ced153 [label="[role] Configure HAProxy" color="#340ebe" id=role_d9ced153 tooltip="Configure HAProxy"]
		role_d9ced153 -> role_426b2800 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_c040a38f labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_ed7dbc69 [label="[role] Create systemd service for podman container" color="#340ebe" id=role_ed7dbc69 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_de7a6fff [label="[role] Configure Nexus" color="#340ebe" id=role_de7a6fff tooltip="Configure Nexus"]
		role_de7a6fff -> role_ed7dbc69 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_a45aa3de labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_a60746dc [label="[role] Create systemd service for podman container" color="#340ebe" id=role_a60746dc tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_66fa3d70 [label="[role] Configure Apache" color="#340ebe" id=role_66fa3d70 tooltip="Configure Apache"]
		role_66fa3d70 -> role_a60746dc [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_592767d8 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_ccf8883c [label="[role] Create systemd service for podman container" color="#340ebe" id=role_ccf8883c tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_850c30ad [label="[role] Configure a local container image registry" color="#340ebe" id=role_850c30ad tooltip="Configure a local container image registry"]
		role_850c30ad -> role_ccf8883c [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_21874639 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_570b7db9 [label="[role] task-create-services" color="#340ebe" id=role_570b7db9 tooltip="task-create-services"]
		role_570b7db9 -> role_800c2bc0 [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_2c1dd080 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_570b7db9 -> role_f5db9240 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_11e1ac92 labeltooltip="2 " tooltip="2 "]
		role_570b7db9 -> role_881e69f8 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_ac622062 labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_570b7db9 -> role_777dee5b [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_e11fab84 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_570b7db9 -> role_d9ced153 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_a57d46c7 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_570b7db9 -> role_de7a6fff [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_451e09fb labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_570b7db9 -> role_66fa3d70 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_8b937e0e labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_570b7db9 -> role_850c30ad [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#340ebe" fontcolor="#340ebe" id=edge_f953dec3 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_3288e577 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_3288e577 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_fdbaa60e [label="[role] Prepare environment if needed" color="#340ebe" id=role_fdbaa60e tooltip="Prepare environment if needed"]
		role_fdbaa60e -> role_3288e577 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_51e21b8f labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_371c7a40 [label="[role] Gather network and host facts for guest" color="#340ebe" id=role_371c7a40 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_d8de20b3 [label="[role] Prepare services if needed" color="#340ebe" id=role_d8de20b3 tooltip="Prepare services if needed"]
		role_d8de20b3 -> role_fdbaa60e [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_eaf607c4 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_d8de20b3 -> role_371c7a40 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_f9d4574a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_aa105e22 [label="[role] Create systemd service for podman container" color="#340ebe" id=role_aa105e22 tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_8e56a843 [label="[role] Gather network and host facts for provision service" color="#340ebe" id=role_8e56a843 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_0850b084 [label="[role] Setup the cluster provision container" color="#340ebe" id=role_0850b084 tooltip="Setup the cluster provision container"]
		role_0850b084 -> role_aa105e22 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_cc181c8f labeltooltip="1 " tooltip="1 "]
		role_0850b084 -> role_8e56a843 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_cbc0555a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_6bf4dd1b [label="[role] Delegate to the distro role to prepare the cluster" color="#340ebe" id=role_6bf4dd1b tooltip="Delegate to the distro role to prepare the cluster"]
		role_6bf4dd1b -> role_0850b084 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_273885fc labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_880ec0dd [label="[role] task-prepare-cluster" color="#340ebe" id=role_880ec0dd tooltip="task-prepare-cluster"]
		role_880ec0dd -> role_d8de20b3 [label="1 [when: not services_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_788bdb18 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_880ec0dd -> role_6bf4dd1b [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_188d204d labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_2d703790 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_2d703790 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_fecc582e [label="[role] Prepare environment if not prepared" color="#340ebe" id=role_fecc582e tooltip="Prepare environment if not prepared"]
		role_fecc582e -> role_2d703790 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_73712f99 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_b144a613 [label="[role] task-download-images" color="#340ebe" id=role_b144a613 tooltip="task-download-images"]
		role_b144a613 -> role_fecc582e [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_8f26fe60 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_a23b7f13 [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_a23b7f13 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_1d177fd5 [label="[role] Prepare environment if needed" color="#340ebe" id=role_1d177fd5 tooltip="Prepare environment if needed"]
		role_1d177fd5 -> role_a23b7f13 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_c1eedcf4 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_6ab697e9 [label="[role] Gather network and host facts for guest" color="#340ebe" id=role_6ab697e9 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_b94b7e4f [label="[role] Prepare services if needed" color="#340ebe" id=role_b94b7e4f tooltip="Prepare services if needed"]
		role_b94b7e4f -> role_1d177fd5 [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_3f4bc793 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_b94b7e4f -> role_6ab697e9 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_1f844fa3 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_48672aa3 [label="[role] Deploy the cluster nodes" color="#340ebe" id=role_48672aa3 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_d5221a2d [label="[role] Delegate to the distro role to deploy the cluster" color="#340ebe" id=role_d5221a2d tooltip="Delegate to the distro role to deploy the cluster"]
		role_d5221a2d -> role_48672aa3 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#340ebe" fontcolor="#340ebe" id=edge_1d98639f labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_1a762bce [label="kubeinit.kubeinit.kubeinit_kid : Install controller requirements" color="#340ebe" id=task_1a762bce shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install controller requirements"]
		role_d5221a2d -> task_1a762bce [label="2 [when: kubeinit_kid_controller_dependencies is defined]" color="#340ebe" fontcolor="#340ebe" id=edge_abaaaf03 labeltooltip="2 [when: kubeinit_kid_controller_dependencies is defined]" tooltip="2 [when: kubeinit_kid_controller_dependencies is defined]"]
		task_caf40d91 [label="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements" color="#340ebe" id=task_caf40d91 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements"]
		role_d5221a2d -> task_caf40d91 [label="3 [when: kubeinit_kid_compute_dependencies is defined]" color="#340ebe" fontcolor="#340ebe" id=edge_992b7a0c labeltooltip="3 [when: kubeinit_kid_compute_dependencies is defined]" tooltip="3 [when: kubeinit_kid_compute_dependencies is defined]"]
		task_139b155c [label="kubeinit.kubeinit.kubeinit_kid : Create kube directory" color="#340ebe" id=task_139b155c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Create kube directory"]
		role_d5221a2d -> task_139b155c [label="4 " color="#340ebe" fontcolor="#340ebe" id=edge_56910f05 labeltooltip="4 " tooltip="4 "]
		task_9b54f8ee [label="kubeinit.kubeinit.kubeinit_kid : Touch a file" color="#340ebe" id=task_9b54f8ee shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Touch a file"]
		role_d5221a2d -> task_9b54f8ee [label="5 " color="#340ebe" fontcolor="#340ebe" id=edge_7b3d3935 labeltooltip="5 " tooltip="5 "]
	}
	subgraph "task-deploy-cluster" {
		role_fccbb36e [label="[role] task-deploy-cluster" color="#340ebe" id=role_fccbb36e tooltip="task-deploy-cluster"]
		role_fccbb36e -> role_b94b7e4f [label="1 [when: not services_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_a6a5c874 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_fccbb36e -> role_d5221a2d [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_41881d98 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e045318b [label="[role] Read podman secrets if running from the container" color="#340ebe" id=role_e045318b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_dbd0e137 [label="[role] Prepare environment if needed" color="#340ebe" id=role_dbd0e137 tooltip="Prepare environment if needed"]
		role_dbd0e137 -> role_e045318b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#340ebe" fontcolor="#340ebe" id=edge_be54249a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_7017c426 [label="[role] Gather network and host facts for guest" color="#340ebe" id=role_7017c426 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_08941685 [label="[role] Prepare services if needed" color="#340ebe" id=role_08941685 tooltip="Prepare services if needed"]
		role_08941685 -> role_dbd0e137 [label="1 [when: not environment_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_1f822ec0 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_08941685 -> role_7017c426 [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_6b1d370c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_da133a3d [label="[role] Configure NFS" color="#340ebe" id=role_da133a3d tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_9848f29d [label="[role] Delegate to distro role to run post-deployment tasks" color="#340ebe" id=role_9848f29d tooltip="Delegate to distro role to run post-deployment tasks"]
		role_9848f29d -> role_da133a3d [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#340ebe" fontcolor="#340ebe" id=edge_94b7c84c labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_08610b39 [label="[role] task-post-deployment" color="#340ebe" id=role_08610b39 tooltip="task-post-deployment"]
		role_08610b39 -> role_08941685 [label="1 [when: not services_prepared]" color="#340ebe" fontcolor="#340ebe" id=edge_2a816775 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_08610b39 -> role_9848f29d [label="2 " color="#340ebe" fontcolor="#340ebe" id=edge_166a5521 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_4a353a2f -> block_d0cfdc30 [label=1 color="#340ebe" fontcolor="#340ebe" id=edge_489d4985 labeltooltip=1 tooltip=1]
		subgraph cluster_block_d0cfdc30 {
			block_d0cfdc30 [label="[block] Prepare the environment" color="#340ebe" id=block_d0cfdc30 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_d0cfdc30 -> role_c1036d60 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_f3316d06 labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_df34dce0 [label=2 color="#340ebe" fontcolor="#340ebe" id=edge_a16cfb8c labeltooltip=2 tooltip=2]
		subgraph cluster_block_df34dce0 {
			block_df34dce0 [label="[block] Cleanup hypervisors" color="#340ebe" id=block_df34dce0 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_df34dce0 -> role_649d1fe4 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_2249a627 labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_be9917e4 [label=3 color="#340ebe" fontcolor="#340ebe" id=edge_82856648 labeltooltip=3 tooltip=3]
		subgraph cluster_block_be9917e4 {
			block_be9917e4 [label="[block] Run validations on cluster resources" color="#340ebe" id=block_be9917e4 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_be9917e4 -> role_594cd1fb [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_7e006dd5 labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_981ceab1 [label=4 color="#340ebe" fontcolor="#340ebe" id=edge_4ef7e4a1 labeltooltip=4 tooltip=4]
		subgraph cluster_block_981ceab1 {
			block_981ceab1 [label="[block] Create the cluster network resources" color="#340ebe" id=block_981ceab1 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_981ceab1 -> role_7fc4fb8a [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_caf1eb4a labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_8bcbd2d8 [label=5 color="#340ebe" fontcolor="#340ebe" id=edge_b47b877d labeltooltip=5 tooltip=5]
		subgraph cluster_block_8bcbd2d8 {
			block_8bcbd2d8 [label="[block] Create services the cluster will need" color="#340ebe" id=block_8bcbd2d8 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_8bcbd2d8 -> role_570b7db9 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_9dec936e labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_faddd227 [label=6 color="#340ebe" fontcolor="#340ebe" id=edge_8e772d0f labeltooltip=6 tooltip=6]
		subgraph cluster_block_faddd227 {
			block_faddd227 [label="[block] Prepare to deploy the cluster" color="#340ebe" id=block_faddd227 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_faddd227 -> role_880ec0dd [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_24b74417 labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_88e9029b [label=7 color="#340ebe" fontcolor="#340ebe" id=edge_9b320bc8 labeltooltip=7 tooltip=7]
		subgraph cluster_block_88e9029b {
			block_88e9029b [label="[block] Download cloud images" color="#340ebe" id=block_88e9029b labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_88e9029b -> role_b144a613 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_aca63088 labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_a7108f0c [label=8 color="#340ebe" fontcolor="#340ebe" id=edge_872008c2 labeltooltip=8 tooltip=8]
		subgraph cluster_block_a7108f0c {
			block_a7108f0c [label="[block] Deploy the cluster" color="#340ebe" id=block_a7108f0c labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_a7108f0c -> role_fccbb36e [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_94ffeb3a labeltooltip="1 " tooltip="1 "]
		}
		play_4a353a2f -> block_19c2d5b5 [label=9 color="#340ebe" fontcolor="#340ebe" id=edge_a1113b56 labeltooltip=9 tooltip=9]
		subgraph cluster_block_19c2d5b5 {
			block_19c2d5b5 [label="[block] Run any post-deployment tasks" color="#340ebe" id=block_19c2d5b5 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_19c2d5b5 -> role_08610b39 [label="1 " color="#340ebe" fontcolor="#340ebe" id=edge_8a3e1e28 labeltooltip="1 " tooltip="1 "]
		}
	}
}
