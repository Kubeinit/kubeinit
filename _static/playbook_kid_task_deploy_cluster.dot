digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_38da0ac8 [label="Play: Initial setup (1)" color="#06adc6" fontcolor="#ffffff" id=play_38da0ac8 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_38da0ac8 [label="1 " color="#06adc6" fontcolor="#06adc6" id=edge_d3bcf2ad labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_d69f02e5 [label="[role] Read podman secrets if running from the container" color="#06adc6" id=role_d69f02e5 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_1680d5ca [label="[role] task-gather-facts" color="#06adc6" id=role_1680d5ca tooltip="task-gather-facts"]
		role_1680d5ca -> role_d69f02e5 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#06adc6" fontcolor="#06adc6" id=edge_4e6c729a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_c0c21d7f [label="[role] Read podman secrets if running from the container" color="#06adc6" id=role_c0c21d7f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_ab066cc4 [label="[role] task-prepare-hypervisors" color="#06adc6" id=role_ab066cc4 tooltip="task-prepare-hypervisors"]
		role_ab066cc4 -> role_c0c21d7f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#06adc6" fontcolor="#06adc6" id=edge_5b6e3bff labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_38da0ac8 -> block_6802cfd9 [label=1 color="#06adc6" fontcolor="#06adc6" id=edge_c05d95a5 labeltooltip=1 tooltip=1]
		subgraph cluster_block_6802cfd9 {
			block_6802cfd9 [label="[block] Gather facts about the deployment environment" color="#06adc6" id=block_6802cfd9 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_6802cfd9 -> role_1680d5ca [label="1 " color="#06adc6" fontcolor="#06adc6" id=edge_a3e49d7d labeltooltip="1 " tooltip="1 "]
		}
		play_38da0ac8 -> block_2845b004 [label=2 color="#06adc6" fontcolor="#06adc6" id=edge_55b19e09 labeltooltip=2 tooltip=2]
		subgraph cluster_block_2845b004 {
			block_2845b004 [label="[block] Prepare the hypervisors" color="#06adc6" id=block_2845b004 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_2845b004 -> role_ab066cc4 [label="1 " color="#06adc6" fontcolor="#06adc6" id=edge_c622f7eb labeltooltip="1 " tooltip="1 "]
		}
	}
	play_c1529b5d [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#208eac" fontcolor="#ffffff" id=play_c1529b5d shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_c1529b5d [label="2 " color="#208eac" fontcolor="#208eac" id=edge_20f3ef29 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_a04ad143 [label="[role] Provision the libvirt services on the hypervisor" color="#208eac" id=role_a04ad143 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_9ffb5b01 [label="[role] Prepare each hypervisor in the deployment" color="#208eac" id=role_9ffb5b01 tooltip="Prepare each hypervisor in the deployment"]
		role_9ffb5b01 -> role_a04ad143 [label="1 " color="#208eac" fontcolor="#208eac" id=edge_b813423d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_c1529b5d -> block_f052a4a2 [label=1 color="#208eac" fontcolor="#208eac" id=edge_9b1b3cda labeltooltip=1 tooltip=1]
		subgraph cluster_block_f052a4a2 {
			block_f052a4a2 [label="[block] Prepare individual hypervisors" color="#208eac" id=block_f052a4a2 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_f052a4a2 -> role_9ffb5b01 [label="1 [when: inventory_hostname in hostvars[kubeinit_cluster_name].hypervisors]" color="#208eac" fontcolor="#208eac" id=edge_87a1a1a1 labeltooltip="1 [when: inventory_hostname in hostvars[kubeinit_cluster_name].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars[kubeinit_cluster_name].hypervisors]"]
		}
	}
	play_fa87da18 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#1b36b1" fontcolor="#ffffff" id=play_fa87da18 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_fa87da18 [label="3 " color="#1b36b1" fontcolor="#1b36b1" id=edge_7b8edac7 labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_cfedd4bd [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_cfedd4bd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_a876a8c5 [label="[role] task-prepare-environment" color="#1b36b1" id=role_a876a8c5 tooltip="task-prepare-environment"]
		role_a876a8c5 -> role_cfedd4bd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_844ae22f labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_b5db81f2 [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_b5db81f2 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_252c05e1 [label="[role] Prepare environment if not prepared" color="#1b36b1" id=role_252c05e1 tooltip="Prepare environment if not prepared"]
		role_252c05e1 -> role_b5db81f2 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_2780e944 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_8bd3a931 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#1b36b1" id=role_8bd3a931 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_dacb2b18 [label="[role] task-cleanup-hypervisors" color="#1b36b1" id=role_dacb2b18 tooltip="task-cleanup-hypervisors"]
		role_dacb2b18 -> role_252c05e1 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_dbeb73b8 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_dacb2b18 -> role_8bd3a931 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_6d744376 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_fd0476f0 [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_fd0476f0 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_0aecf279 [label="[role] Prepare environment if not prepared" color="#1b36b1" id=role_0aecf279 tooltip="Prepare environment if not prepared"]
		role_0aecf279 -> role_fd0476f0 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_5326329f labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_2933edf7 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#1b36b1" id=role_2933edf7 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_398ba2d6 [label="[role] Cleanup hypervisors if needed" color="#1b36b1" id=role_398ba2d6 tooltip="Cleanup hypervisors if needed"]
		role_398ba2d6 -> role_0aecf279 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_43bf1445 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_398ba2d6 -> role_2933edf7 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_c24ec470 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_53ab5b0c [label="[role] task-run-validations" color="#1b36b1" id=role_53ab5b0c tooltip="task-run-validations"]
		role_53ab5b0c -> role_398ba2d6 [label="1 [when: not hypervisors_cleaned]" color="#1b36b1" fontcolor="#1b36b1" id=edge_e28be760 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_0e2f3405 [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_0e2f3405 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_b060b4ab [label="[role] Prepare environment if not prepared" color="#1b36b1" id=role_b060b4ab tooltip="Prepare environment if not prepared"]
		role_b060b4ab -> role_0e2f3405 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_f6032d29 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_94ddd542 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#1b36b1" id=role_94ddd542 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_fb304faf [label="[role] Cleanup hypervisors if needed" color="#1b36b1" id=role_fb304faf tooltip="Cleanup hypervisors if needed"]
		role_fb304faf -> role_b060b4ab [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_e1cf21b8 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_fb304faf -> role_94ddd542 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_e74ab5e4 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_ce40ccdf [label="[role] task-create-network" color="#1b36b1" id=role_ce40ccdf tooltip="task-create-network"]
		role_ce40ccdf -> role_fb304faf [label="1 [when: not hypervisors_cleaned]" color="#1b36b1" fontcolor="#1b36b1" id=edge_06dacce2 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_95a1efad [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_95a1efad tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_9be78abc [label="[role] Prepare environment if not prepared" color="#1b36b1" id=role_9be78abc tooltip="Prepare environment if not prepared"]
		role_9be78abc -> role_95a1efad [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_7fd85953 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_334baafb [label="[role] Prepare podman" color="#1b36b1" id=role_334baafb tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_cc7bf847 [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_cc7bf847 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_acc8cd48 [label="[role] Configure Bind" color="#1b36b1" id=role_acc8cd48 tooltip="Configure Bind"]
		role_acc8cd48 -> role_cc7bf847 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_e9017664 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_6dba2cad [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_6dba2cad tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_c2277ba5 [label="[role] Configure Dnsmasq" color="#1b36b1" id=role_c2277ba5 tooltip="Configure Dnsmasq"]
		role_c2277ba5 -> role_6dba2cad [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_dd608829 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_9ff36497 [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_9ff36497 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_60033323 [label="[role] Configure HAProxy" color="#1b36b1" id=role_60033323 tooltip="Configure HAProxy"]
		role_60033323 -> role_9ff36497 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_adb40b09 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_41dc6f2f [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_41dc6f2f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_18bbfa38 [label="[role] Configure Nexus" color="#1b36b1" id=role_18bbfa38 tooltip="Configure Nexus"]
		role_18bbfa38 -> role_41dc6f2f [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_a581b2ec labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_022e37e1 [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_022e37e1 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_6711038b [label="[role] Configure Apache" color="#1b36b1" id=role_6711038b tooltip="Configure Apache"]
		role_6711038b -> role_022e37e1 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_932f768d labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_c19bec56 [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_c19bec56 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_7cecd932 [label="[role] Configure a local container image registry" color="#1b36b1" id=role_7cecd932 tooltip="Configure a local container image registry"]
		role_7cecd932 -> role_c19bec56 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_086da744 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_51628178 [label="[role] task-create-services" color="#1b36b1" id=role_51628178 tooltip="task-create-services"]
		role_51628178 -> role_9be78abc [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_ec6387ad labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_51628178 -> role_334baafb [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_747a2d91 labeltooltip="2 " tooltip="2 "]
		role_51628178 -> role_acc8cd48 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_06347024 labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_51628178 -> role_c2277ba5 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_3f7f76e6 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_51628178 -> role_60033323 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_aeb28e31 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_51628178 -> role_18bbfa38 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_756ffab8 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_51628178 -> role_6711038b [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_255df9f8 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_51628178 -> role_7cecd932 [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_2c5101e1 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_feb8695b [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_feb8695b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_2be4d509 [label="[role] Prepare environment if needed" color="#1b36b1" id=role_2be4d509 tooltip="Prepare environment if needed"]
		role_2be4d509 -> role_feb8695b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_5a473a5d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_8d9f4b5b [label="[role] Gather network and host facts for guest" color="#1b36b1" id=role_8d9f4b5b tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_8e3e764f [label="[role] Prepare services if needed" color="#1b36b1" id=role_8e3e764f tooltip="Prepare services if needed"]
		role_8e3e764f -> role_2be4d509 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_c3dc2f82 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_8e3e764f -> role_8d9f4b5b [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_147c3d85 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_f97e9b62 [label="[role] Create systemd service for podman container" color="#1b36b1" id=role_f97e9b62 tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_dfe607bf [label="[role] Gather network and host facts for provision service" color="#1b36b1" id=role_dfe607bf tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_70891004 [label="[role] Setup the cluster provision container" color="#1b36b1" id=role_70891004 tooltip="Setup the cluster provision container"]
		role_70891004 -> role_f97e9b62 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_bf2ba3df labeltooltip="1 " tooltip="1 "]
		role_70891004 -> role_dfe607bf [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_656a5ce3 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_c023975e [label="[role] Delegate to the distro role to prepare the cluster" color="#1b36b1" id=role_c023975e tooltip="Delegate to the distro role to prepare the cluster"]
		role_c023975e -> role_70891004 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_4247ceaa labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_e923fc25 [label="[role] task-prepare-cluster" color="#1b36b1" id=role_e923fc25 tooltip="task-prepare-cluster"]
		role_e923fc25 -> role_8e3e764f [label="1 [when: not services_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_1af9bf81 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_e923fc25 -> role_c023975e [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_3546e4de labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_6e19c679 [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_6e19c679 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_77957841 [label="[role] Prepare environment if not prepared" color="#1b36b1" id=role_77957841 tooltip="Prepare environment if not prepared"]
		role_77957841 -> role_6e19c679 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_1bfd6805 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_702a5aa7 [label="[role] task-download-images" color="#1b36b1" id=role_702a5aa7 tooltip="task-download-images"]
		role_702a5aa7 -> role_77957841 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_f89ba912 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_558ec75e [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_558ec75e tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_bab16080 [label="[role] Prepare environment if needed" color="#1b36b1" id=role_bab16080 tooltip="Prepare environment if needed"]
		role_bab16080 -> role_558ec75e [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_f0ec03dc labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_fb843945 [label="[role] Gather network and host facts for guest" color="#1b36b1" id=role_fb843945 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_f85b6121 [label="[role] Prepare services if needed" color="#1b36b1" id=role_f85b6121 tooltip="Prepare services if needed"]
		role_f85b6121 -> role_bab16080 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_7c7b1431 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_f85b6121 -> role_fb843945 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_6deacf80 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_f5225475 [label="[role] Deploy the cluster nodes" color="#1b36b1" id=role_f5225475 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_7b399fc0 [label="[role] Delegate to the distro role to deploy the cluster" color="#1b36b1" id=role_7b399fc0 tooltip="Delegate to the distro role to deploy the cluster"]
		role_7b399fc0 -> role_f5225475 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#1b36b1" fontcolor="#1b36b1" id=edge_26ba5aba labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_d5d90389 [label="kubeinit.kubeinit.kubeinit_kid : Install controller requirements" color="#1b36b1" id=task_d5d90389 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install controller requirements"]
		role_7b399fc0 -> task_d5d90389 [label="2 [when: kubeinit_kid_controller_dependencies is defined]" color="#1b36b1" fontcolor="#1b36b1" id=edge_4d438206 labeltooltip="2 [when: kubeinit_kid_controller_dependencies is defined]" tooltip="2 [when: kubeinit_kid_controller_dependencies is defined]"]
		task_46552e18 [label="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements" color="#1b36b1" id=task_46552e18 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Install compute nodes requirements"]
		role_7b399fc0 -> task_46552e18 [label="3 [when: kubeinit_kid_compute_dependencies is defined]" color="#1b36b1" fontcolor="#1b36b1" id=edge_a23d7c25 labeltooltip="3 [when: kubeinit_kid_compute_dependencies is defined]" tooltip="3 [when: kubeinit_kid_compute_dependencies is defined]"]
		task_8687c4d8 [label="kubeinit.kubeinit.kubeinit_kid : Create kube directory" color="#1b36b1" id=task_8687c4d8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Create kube directory"]
		role_7b399fc0 -> task_8687c4d8 [label="4 " color="#1b36b1" fontcolor="#1b36b1" id=edge_e5e4234d labeltooltip="4 " tooltip="4 "]
		task_e0ab5656 [label="kubeinit.kubeinit.kubeinit_kid : Touch a file" color="#1b36b1" id=task_e0ab5656 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_kid : Touch a file"]
		role_7b399fc0 -> task_e0ab5656 [label="5 " color="#1b36b1" fontcolor="#1b36b1" id=edge_2fb0960b labeltooltip="5 " tooltip="5 "]
	}
	subgraph "task-deploy-cluster" {
		role_698efd08 [label="[role] task-deploy-cluster" color="#1b36b1" id=role_698efd08 tooltip="task-deploy-cluster"]
		role_698efd08 -> role_f85b6121 [label="1 [when: not services_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_f1d0a42e labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_698efd08 -> role_7b399fc0 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_10960294 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_da1e7d23 [label="[role] Read podman secrets if running from the container" color="#1b36b1" id=role_da1e7d23 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_cffd9e43 [label="[role] Prepare environment if needed" color="#1b36b1" id=role_cffd9e43 tooltip="Prepare environment if needed"]
		role_cffd9e43 -> role_da1e7d23 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#1b36b1" fontcolor="#1b36b1" id=edge_c999e1b8 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_e68b7125 [label="[role] Gather network and host facts for guest" color="#1b36b1" id=role_e68b7125 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_78e3d721 [label="[role] Prepare services if needed" color="#1b36b1" id=role_78e3d721 tooltip="Prepare services if needed"]
		role_78e3d721 -> role_cffd9e43 [label="1 [when: not environment_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_18c5fff2 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_78e3d721 -> role_e68b7125 [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_e665201e labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_4a774f0e [label="[role] Configure NFS" color="#1b36b1" id=role_4a774f0e tooltip="Configure NFS"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_23862c5e [label="[role] Delegate to distro role to run post-deployment tasks" color="#1b36b1" id=role_23862c5e tooltip="Delegate to distro role to run post-deployment tasks"]
		role_23862c5e -> role_4a774f0e [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#1b36b1" fontcolor="#1b36b1" id=edge_47bdecee labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
	}
	subgraph "task-post-deployment" {
		role_5ba49b40 [label="[role] task-post-deployment" color="#1b36b1" id=role_5ba49b40 tooltip="task-post-deployment"]
		role_5ba49b40 -> role_78e3d721 [label="1 [when: not services_prepared]" color="#1b36b1" fontcolor="#1b36b1" id=edge_4e675037 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_5ba49b40 -> role_23862c5e [label="2 " color="#1b36b1" fontcolor="#1b36b1" id=edge_a370b069 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_fa87da18 -> block_d8c71b6e [label=1 color="#1b36b1" fontcolor="#1b36b1" id=edge_cfc2e03a labeltooltip=1 tooltip=1]
		subgraph cluster_block_d8c71b6e {
			block_d8c71b6e [label="[block] Prepare the environment" color="#1b36b1" id=block_d8c71b6e labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_d8c71b6e -> role_a876a8c5 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_704b6dc2 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_69a79d8b [label=2 color="#1b36b1" fontcolor="#1b36b1" id=edge_4ac41603 labeltooltip=2 tooltip=2]
		subgraph cluster_block_69a79d8b {
			block_69a79d8b [label="[block] Cleanup hypervisors" color="#1b36b1" id=block_69a79d8b labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_69a79d8b -> role_dacb2b18 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_d105bc2a labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_ccdae065 [label=3 color="#1b36b1" fontcolor="#1b36b1" id=edge_72dc7d11 labeltooltip=3 tooltip=3]
		subgraph cluster_block_ccdae065 {
			block_ccdae065 [label="[block] Run validations on cluster resources" color="#1b36b1" id=block_ccdae065 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_ccdae065 -> role_53ab5b0c [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_fb51995e labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_f1e87ab9 [label=4 color="#1b36b1" fontcolor="#1b36b1" id=edge_b4e0309e labeltooltip=4 tooltip=4]
		subgraph cluster_block_f1e87ab9 {
			block_f1e87ab9 [label="[block] Create the cluster network resources" color="#1b36b1" id=block_f1e87ab9 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_f1e87ab9 -> role_ce40ccdf [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_d4c3c3f5 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_2804b040 [label=5 color="#1b36b1" fontcolor="#1b36b1" id=edge_66b45dd1 labeltooltip=5 tooltip=5]
		subgraph cluster_block_2804b040 {
			block_2804b040 [label="[block] Create services the cluster will need" color="#1b36b1" id=block_2804b040 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_2804b040 -> role_51628178 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_a87f0e08 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_9c46011b [label=6 color="#1b36b1" fontcolor="#1b36b1" id=edge_c8ce926d labeltooltip=6 tooltip=6]
		subgraph cluster_block_9c46011b {
			block_9c46011b [label="[block] Prepare to deploy the cluster" color="#1b36b1" id=block_9c46011b labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_9c46011b -> role_e923fc25 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_0397a584 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_f38b7207 [label=7 color="#1b36b1" fontcolor="#1b36b1" id=edge_59124d8a labeltooltip=7 tooltip=7]
		subgraph cluster_block_f38b7207 {
			block_f38b7207 [label="[block] Download cloud images" color="#1b36b1" id=block_f38b7207 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_f38b7207 -> role_702a5aa7 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_bf6f1270 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_f0c80498 [label=8 color="#1b36b1" fontcolor="#1b36b1" id=edge_0e9b7324 labeltooltip=8 tooltip=8]
		subgraph cluster_block_f0c80498 {
			block_f0c80498 [label="[block] Deploy the cluster" color="#1b36b1" id=block_f0c80498 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_f0c80498 -> role_698efd08 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_3cf4a406 labeltooltip="1 " tooltip="1 "]
		}
		play_fa87da18 -> block_4c592102 [label=9 color="#1b36b1" fontcolor="#1b36b1" id=edge_77d92ba3 labeltooltip=9 tooltip=9]
		subgraph cluster_block_4c592102 {
			block_4c592102 [label="[block] Run any post-deployment tasks" color="#1b36b1" id=block_4c592102 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_4c592102 -> role_5ba49b40 [label="1 " color="#1b36b1" fontcolor="#1b36b1" id=edge_7f229ff8 labeltooltip="1 " tooltip="1 "]
		}
	}
}
