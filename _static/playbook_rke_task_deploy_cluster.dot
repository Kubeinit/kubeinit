digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_7e8fa377 [label="Play: Initial setup (1)" color="#0e1abe" fontcolor="#ffffff" id=play_7e8fa377 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_7e8fa377 [label="1 " color="#0e1abe" fontcolor="#0e1abe" id=edge_41fcd7d0 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_8bde42fb [label="[role] Read podman secrets if running from the container" color="#0e1abe" id=role_8bde42fb tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_c70e1e03 [label="[role] task-gather-facts" color="#0e1abe" id=role_c70e1e03 tooltip="task-gather-facts"]
		role_c70e1e03 -> role_8bde42fb [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#0e1abe" fontcolor="#0e1abe" id=edge_b076bdc5 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e780d1f7 [label="[role] Read podman secrets if running from the container" color="#0e1abe" id=role_e780d1f7 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_d069f11f [label="[role] task-prepare-hypervisors" color="#0e1abe" id=role_d069f11f tooltip="task-prepare-hypervisors"]
		role_d069f11f -> role_e780d1f7 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#0e1abe" fontcolor="#0e1abe" id=edge_5cfc3232 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_7e8fa377 -> block_e3b39f8d [label=1 color="#0e1abe" fontcolor="#0e1abe" id=edge_f14c59be labeltooltip=1 tooltip=1]
		subgraph cluster_block_e3b39f8d {
			block_e3b39f8d [label="[block] Gather facts about the deployment environment" color="#0e1abe" id=block_e3b39f8d labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_e3b39f8d -> role_c70e1e03 [label="1 " color="#0e1abe" fontcolor="#0e1abe" id=edge_c1232242 labeltooltip="1 " tooltip="1 "]
		}
		play_7e8fa377 -> block_c271619f [label=2 color="#0e1abe" fontcolor="#0e1abe" id=edge_601b0af8 labeltooltip=2 tooltip=2]
		subgraph cluster_block_c271619f {
			block_c271619f [label="[block] Prepare the hypervisors" color="#0e1abe" id=block_c271619f labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_c271619f -> role_d069f11f [label="1 " color="#0e1abe" fontcolor="#0e1abe" id=edge_908e5466 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_199c866f [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#0701ca" fontcolor="#ffffff" id=play_199c866f shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_199c866f [label="2 " color="#0701ca" fontcolor="#0701ca" id=edge_9346e552 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_6d75e3d1 [label="[role] Provision the libvirt services on the hypervisor" color="#0701ca" id=role_6d75e3d1 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_11d55faf [label="[role] Prepare each hypervisor in the deployment" color="#0701ca" id=role_11d55faf tooltip="Prepare each hypervisor in the deployment"]
		role_11d55faf -> role_6d75e3d1 [label="1 " color="#0701ca" fontcolor="#0701ca" id=edge_50328d64 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_199c866f -> block_93e1af75 [label=1 color="#0701ca" fontcolor="#0701ca" id=edge_319e49e4 labeltooltip=1 tooltip=1]
		subgraph cluster_block_93e1af75 {
			block_93e1af75 [label="[block] Prepare individual hypervisors" color="#0701ca" id=block_93e1af75 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_93e1af75 -> role_11d55faf [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#0701ca" fontcolor="#0701ca" id=edge_c56a067f labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_472f7306 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#b21aaa" fontcolor="#ffffff" id=play_472f7306 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_472f7306 [label="3 " color="#b21aaa" fontcolor="#b21aaa" id=edge_ea0e3afb labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_ad7d2e4c [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_ad7d2e4c tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_cb9299c7 [label="[role] task-prepare-environment" color="#b21aaa" id=role_cb9299c7 tooltip="task-prepare-environment"]
		role_cb9299c7 -> role_ad7d2e4c [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_d811af58 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_1ee923c4 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_1ee923c4 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_c1a2375b [label="[role] Prepare environment if not prepared" color="#b21aaa" id=role_c1a2375b tooltip="Prepare environment if not prepared"]
		role_c1a2375b -> role_1ee923c4 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_999ea137 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_5c2cd13c [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b21aaa" id=role_5c2cd13c tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_9f977bb3 [label="[role] task-cleanup-hypervisors" color="#b21aaa" id=role_9f977bb3 tooltip="task-cleanup-hypervisors"]
		role_9f977bb3 -> role_c1a2375b [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_8c6bacf9 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_9f977bb3 -> role_5c2cd13c [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_f6484a1f labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_d216ec97 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_d216ec97 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_0a5ab568 [label="[role] Prepare environment if not prepared" color="#b21aaa" id=role_0a5ab568 tooltip="Prepare environment if not prepared"]
		role_0a5ab568 -> role_d216ec97 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_9268b1e1 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_417c18e7 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b21aaa" id=role_417c18e7 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_207e823d [label="[role] Cleanup hypervisors if needed" color="#b21aaa" id=role_207e823d tooltip="Cleanup hypervisors if needed"]
		role_207e823d -> role_0a5ab568 [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_751a4daf labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_207e823d -> role_417c18e7 [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_3c75e53b labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_08e4acd8 [label="[role] task-run-validations" color="#b21aaa" id=role_08e4acd8 tooltip="task-run-validations"]
		role_08e4acd8 -> role_207e823d [label="1 [when: not hypervisors_cleaned]" color="#b21aaa" fontcolor="#b21aaa" id=edge_c77222c9 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_f946f7a8 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_f946f7a8 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_d03626b7 [label="[role] Prepare environment if not prepared" color="#b21aaa" id=role_d03626b7 tooltip="Prepare environment if not prepared"]
		role_d03626b7 -> role_f946f7a8 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_8eb9bd9b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_d8d72cc0 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#b21aaa" id=role_d8d72cc0 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_7744e6cf [label="[role] Cleanup hypervisors if needed" color="#b21aaa" id=role_7744e6cf tooltip="Cleanup hypervisors if needed"]
		role_7744e6cf -> role_d03626b7 [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_479094d7 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_7744e6cf -> role_d8d72cc0 [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_3595b0b9 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_8a148b44 [label="[role] task-create-network" color="#b21aaa" id=role_8a148b44 tooltip="task-create-network"]
		role_8a148b44 -> role_7744e6cf [label="1 [when: not hypervisors_cleaned]" color="#b21aaa" fontcolor="#b21aaa" id=edge_be81195d labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_781dae6d [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_781dae6d tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_243eb091 [label="[role] Prepare environment if not prepared" color="#b21aaa" id=role_243eb091 tooltip="Prepare environment if not prepared"]
		role_243eb091 -> role_781dae6d [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_81ce265e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_025115fc [label="[role] Prepare podman" color="#b21aaa" id=role_025115fc tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_681a1cd7 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_681a1cd7 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_634f45a6 [label="[role] Configure Bind" color="#b21aaa" id=role_634f45a6 tooltip="Configure Bind"]
		role_634f45a6 -> role_681a1cd7 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_c380e537 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_43023228 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_43023228 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_70c8a44d [label="[role] Configure Dnsmasq" color="#b21aaa" id=role_70c8a44d tooltip="Configure Dnsmasq"]
		role_70c8a44d -> role_43023228 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_ef0ef341 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_ab75b7c9 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_ab75b7c9 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_416eb150 [label="[role] Configure HAProxy" color="#b21aaa" id=role_416eb150 tooltip="Configure HAProxy"]
		role_416eb150 -> role_ab75b7c9 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_4e659361 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_237cfe0e [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_237cfe0e tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_5384e781 [label="[role] Configure Nexus" color="#b21aaa" id=role_5384e781 tooltip="Configure Nexus"]
		role_5384e781 -> role_237cfe0e [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_3daec2a4 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_c4b720d5 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_c4b720d5 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_b4cd297d [label="[role] Configure Apache" color="#b21aaa" id=role_b4cd297d tooltip="Configure Apache"]
		role_b4cd297d -> role_c4b720d5 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_8e38aa9c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_16213cb5 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_16213cb5 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_9686127c [label="[role] Configure a local container image registry" color="#b21aaa" id=role_9686127c tooltip="Configure a local container image registry"]
		role_9686127c -> role_16213cb5 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_6bf4fbec labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_8b546455 [label="[role] task-create-services" color="#b21aaa" id=role_8b546455 tooltip="task-create-services"]
		role_8b546455 -> role_243eb091 [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_3342adaa labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_8b546455 -> role_025115fc [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_dcabfbef labeltooltip="2 " tooltip="2 "]
		role_8b546455 -> role_634f45a6 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_b08e346c labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_8b546455 -> role_70c8a44d [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_d0037386 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_8b546455 -> role_416eb150 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_e9a282f8 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_8b546455 -> role_5384e781 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_1acbe110 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_8b546455 -> role_b4cd297d [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_1d549f91 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_8b546455 -> role_9686127c [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_b3f35410 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_76c5b1d3 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_76c5b1d3 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_4f4ff91d [label="[role] Prepare environment if needed" color="#b21aaa" id=role_4f4ff91d tooltip="Prepare environment if needed"]
		role_4f4ff91d -> role_76c5b1d3 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_78638f38 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_7c4f1deb [label="[role] Gather network and host facts for guest" color="#b21aaa" id=role_7c4f1deb tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_1f0bd416 [label="[role] Prepare services if needed" color="#b21aaa" id=role_1f0bd416 tooltip="Prepare services if needed"]
		role_1f0bd416 -> role_4f4ff91d [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_456f6037 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_1f0bd416 -> role_7c4f1deb [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_e600b551 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_5215b2a8 [label="[role] Create systemd service for podman container" color="#b21aaa" id=role_5215b2a8 tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_9c668a27 [label="[role] Gather network and host facts for provision service" color="#b21aaa" id=role_9c668a27 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_2d2d6fe9 [label="[role] Setup the cluster provision container" color="#b21aaa" id=role_2d2d6fe9 tooltip="Setup the cluster provision container"]
		role_2d2d6fe9 -> role_5215b2a8 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_ee1261a0 labeltooltip="1 " tooltip="1 "]
		role_2d2d6fe9 -> role_9c668a27 [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_043484ab labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_ed03a369 [label="[role] Delegate to the distro role to prepare the cluster" color="#b21aaa" id=role_ed03a369 tooltip="Delegate to the distro role to prepare the cluster"]
		role_ed03a369 -> role_2d2d6fe9 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_20e6267c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_ed4209ef [label="[role] task-prepare-cluster" color="#b21aaa" id=role_ed4209ef tooltip="task-prepare-cluster"]
		role_ed4209ef -> role_1f0bd416 [label="1 [when: not services_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_bad33812 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_ed4209ef -> role_ed03a369 [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_54c2cd6c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_5e26a42d [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_5e26a42d tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_365dca0d [label="[role] Prepare environment if not prepared" color="#b21aaa" id=role_365dca0d tooltip="Prepare environment if not prepared"]
		role_365dca0d -> role_5e26a42d [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_2a034143 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_5a1e3b85 [label="[role] task-download-images" color="#b21aaa" id=role_5a1e3b85 tooltip="task-download-images"]
		role_5a1e3b85 -> role_365dca0d [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_9140544e labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e421c1f5 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_e421c1f5 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_f43e9c0e [label="[role] Prepare environment if needed" color="#b21aaa" id=role_f43e9c0e tooltip="Prepare environment if needed"]
		role_f43e9c0e -> role_e421c1f5 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_2cc8a895 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_a831b7ab [label="[role] Gather network and host facts for guest" color="#b21aaa" id=role_a831b7ab tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_ca3d7e40 [label="[role] Prepare services if needed" color="#b21aaa" id=role_ca3d7e40 tooltip="Prepare services if needed"]
		role_ca3d7e40 -> role_f43e9c0e [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_83817d17 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_ca3d7e40 -> role_a831b7ab [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_8dc36724 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_bd61a0b0 [label="[role] Deploy the cluster nodes" color="#b21aaa" id=role_bd61a0b0 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_42d6b83b [label="[role] Delegate to the distro role to deploy the cluster" color="#b21aaa" id=role_42d6b83b tooltip="Delegate to the distro role to deploy the cluster"]
		role_42d6b83b -> role_bd61a0b0 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#b21aaa" fontcolor="#b21aaa" id=edge_d4333733 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_d2f6e8a3 [label="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker" color="#b21aaa" id=task_d2f6e8a3 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker"]
		role_42d6b83b -> task_d2f6e8a3 [label="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_eeef92cd labeltooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]"]
		task_8433831c [label="kubeinit.kubeinit.kubeinit_rke : Install RKE" color="#b21aaa" id=task_8433831c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Install RKE"]
		role_42d6b83b -> task_8433831c [label="3 " color="#b21aaa" fontcolor="#b21aaa" id=edge_f833ce92 labeltooltip="3 " tooltip="3 "]
		task_e4299a6e [label="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig" color="#b21aaa" id=task_e4299a6e shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig"]
		role_42d6b83b -> task_e4299a6e [label="4 " color="#b21aaa" fontcolor="#b21aaa" id=edge_d4862500 labeltooltip="4 " tooltip="4 "]
		task_2867264d [label="kubeinit.kubeinit.kubeinit_rke : Create kube directory" color="#b21aaa" id=task_2867264d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Create kube directory"]
		role_42d6b83b -> task_2867264d [label="5 " color="#b21aaa" fontcolor="#b21aaa" id=edge_e54fb894 labeltooltip="5 " tooltip="5 "]
		task_47765053 [label="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig" color="#b21aaa" id=task_47765053 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig"]
		role_42d6b83b -> task_47765053 [label="6 " color="#b21aaa" fontcolor="#b21aaa" id=edge_e2a393fa labeltooltip="6 " tooltip="6 "]
		task_a2e27a88 [label="kubeinit.kubeinit.kubeinit_rke : Touch a file" color="#b21aaa" id=task_a2e27a88 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Touch a file"]
		role_42d6b83b -> task_a2e27a88 [label="7 " color="#b21aaa" fontcolor="#b21aaa" id=edge_d48c313b labeltooltip="7 " tooltip="7 "]
		task_b1014a5f [label="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes" color="#b21aaa" id=task_b1014a5f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes"]
		role_42d6b83b -> task_b1014a5f [label="8 [when: not kubeinit_compute_count|int > 0]" color="#b21aaa" fontcolor="#b21aaa" id=edge_a27eb1f6 labeltooltip="8 [when: not kubeinit_compute_count|int > 0]" tooltip="8 [when: not kubeinit_compute_count|int > 0]"]
	}
	subgraph "task-deploy-cluster" {
		role_7857a1e0 [label="[role] task-deploy-cluster" color="#b21aaa" id=role_7857a1e0 tooltip="task-deploy-cluster"]
		role_7857a1e0 -> role_ca3d7e40 [label="1 [when: not services_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_00a1b9ce labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_7857a1e0 -> role_42d6b83b [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_41fa6409 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_de135b10 [label="[role] Read podman secrets if running from the container" color="#b21aaa" id=role_de135b10 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_3a6742a3 [label="[role] Prepare environment if needed" color="#b21aaa" id=role_3a6742a3 tooltip="Prepare environment if needed"]
		role_3a6742a3 -> role_de135b10 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#b21aaa" fontcolor="#b21aaa" id=edge_1b6ec261 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_9bf34dc0 [label="[role] Gather network and host facts for guest" color="#b21aaa" id=role_9bf34dc0 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_b21cfa1c [label="[role] Prepare services if needed" color="#b21aaa" id=role_b21cfa1c tooltip="Prepare services if needed"]
		role_b21cfa1c -> role_3a6742a3 [label="1 [when: not environment_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_313ec598 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_b21cfa1c -> role_9bf34dc0 [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_3bc722ca labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_ccc17615 [label="[role] Deploy the apps" color="#b21aaa" id=role_ccc17615 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_ca38475a [label="[role] Configure NFS" color="#b21aaa" id=role_ca38475a tooltip="Configure NFS"]
	}
	subgraph "Deploy Submariner" {
		role_274a5bfa [label="[role] Deploy Submariner" color="#b21aaa" id=role_274a5bfa tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_6841a7ec [label="[role] Delegate to distro role to run post-deployment tasks" color="#b21aaa" id=role_6841a7ec tooltip="Delegate to distro role to run post-deployment tasks"]
		role_6841a7ec -> role_ccc17615 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_ab62763d labeltooltip="1 " tooltip="1 "]
		role_6841a7ec -> role_ca38475a [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#b21aaa" fontcolor="#b21aaa" id=edge_32744888 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_6841a7ec -> role_274a5bfa [label="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" color="#b21aaa" fontcolor="#b21aaa" id=edge_4f9effbb labeltooltip="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" tooltip="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_a0e3a3d7 [label="[role] task-post-deployment" color="#b21aaa" id=role_a0e3a3d7 tooltip="task-post-deployment"]
		role_a0e3a3d7 -> role_b21cfa1c [label="1 [when: not services_prepared]" color="#b21aaa" fontcolor="#b21aaa" id=edge_331dec96 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_a0e3a3d7 -> role_6841a7ec [label="2 " color="#b21aaa" fontcolor="#b21aaa" id=edge_6d2a1e9c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_472f7306 -> block_1d90e6de [label=1 color="#b21aaa" fontcolor="#b21aaa" id=edge_a08029e4 labeltooltip=1 tooltip=1]
		subgraph cluster_block_1d90e6de {
			block_1d90e6de [label="[block] Prepare the environment" color="#b21aaa" id=block_1d90e6de labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_1d90e6de -> role_cb9299c7 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_2dc1ca7a labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_3dd90c32 [label=2 color="#b21aaa" fontcolor="#b21aaa" id=edge_f60e5f7e labeltooltip=2 tooltip=2]
		subgraph cluster_block_3dd90c32 {
			block_3dd90c32 [label="[block] Cleanup hypervisors" color="#b21aaa" id=block_3dd90c32 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_3dd90c32 -> role_9f977bb3 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_e2d5f50b labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_b51bd8ce [label=3 color="#b21aaa" fontcolor="#b21aaa" id=edge_f248ae81 labeltooltip=3 tooltip=3]
		subgraph cluster_block_b51bd8ce {
			block_b51bd8ce [label="[block] Run validations on cluster resources" color="#b21aaa" id=block_b51bd8ce labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_b51bd8ce -> role_08e4acd8 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_748e3cab labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_d48ed0c8 [label=4 color="#b21aaa" fontcolor="#b21aaa" id=edge_0abb2529 labeltooltip=4 tooltip=4]
		subgraph cluster_block_d48ed0c8 {
			block_d48ed0c8 [label="[block] Create the cluster network resources" color="#b21aaa" id=block_d48ed0c8 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_d48ed0c8 -> role_8a148b44 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_da77aac7 labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_3111924b [label=5 color="#b21aaa" fontcolor="#b21aaa" id=edge_318d2f28 labeltooltip=5 tooltip=5]
		subgraph cluster_block_3111924b {
			block_3111924b [label="[block] Create services the cluster will need" color="#b21aaa" id=block_3111924b labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_3111924b -> role_8b546455 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_a2f0c54b labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_d7b0d7cc [label=6 color="#b21aaa" fontcolor="#b21aaa" id=edge_e3615006 labeltooltip=6 tooltip=6]
		subgraph cluster_block_d7b0d7cc {
			block_d7b0d7cc [label="[block] Prepare to deploy the cluster" color="#b21aaa" id=block_d7b0d7cc labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_d7b0d7cc -> role_ed4209ef [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_54231b02 labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_e095e870 [label=7 color="#b21aaa" fontcolor="#b21aaa" id=edge_7b4f5b88 labeltooltip=7 tooltip=7]
		subgraph cluster_block_e095e870 {
			block_e095e870 [label="[block] Download cloud images" color="#b21aaa" id=block_e095e870 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_e095e870 -> role_5a1e3b85 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_cee1b573 labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_6a3195d8 [label=8 color="#b21aaa" fontcolor="#b21aaa" id=edge_8b877f28 labeltooltip=8 tooltip=8]
		subgraph cluster_block_6a3195d8 {
			block_6a3195d8 [label="[block] Deploy the cluster" color="#b21aaa" id=block_6a3195d8 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_6a3195d8 -> role_7857a1e0 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_15c23376 labeltooltip="1 " tooltip="1 "]
		}
		play_472f7306 -> block_cdeda7d0 [label=9 color="#b21aaa" fontcolor="#b21aaa" id=edge_03dcf597 labeltooltip=9 tooltip=9]
		subgraph cluster_block_cdeda7d0 {
			block_cdeda7d0 [label="[block] Run any post-deployment tasks" color="#b21aaa" id=block_cdeda7d0 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_cdeda7d0 -> role_a0e3a3d7 [label="1 " color="#b21aaa" fontcolor="#b21aaa" id=edge_ab9536d8 labeltooltip="1 " tooltip="1 "]
		}
	}
}
