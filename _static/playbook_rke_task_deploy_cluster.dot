digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_9b3dad17 [label="Play: Perform initial setup on ansible-controller host (localhost) (1)" color="#076bc5" fontcolor="#ffffff" id=play_9b3dad17 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_9b3dad17 [label="1 " color="#076bc5" fontcolor="#076bc5" id=edge_4a1c4dc8 labeltooltip="1 " tooltip="1 "]
	subgraph "Gather kubeinit secrets" {
		role_dff62587 [label="[role] Gather kubeinit secrets" color="#076bc5" id=role_dff62587 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_aa6c252a [label="[role] Gather additional facts from localhost for kubeinit" color="#076bc5" id=role_aa6c252a tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_f5f279b3 [label="[role] Create ssh config file from template" color="#076bc5" id=role_f5f279b3 tooltip="Create ssh config file from template"]
	}
	subgraph "task-gather-facts" {
		role_74cbb72a [label="[role] task-gather-facts" color="#076bc5" id=role_74cbb72a tooltip="task-gather-facts"]
		role_74cbb72a -> role_dff62587 [label="1 " color="#076bc5" fontcolor="#076bc5" id=edge_87137257 labeltooltip="1 " tooltip="1 "]
		role_74cbb72a -> role_aa6c252a [label="2 " color="#076bc5" fontcolor="#076bc5" id=edge_93b197cd labeltooltip="2 " tooltip="2 "]
		role_74cbb72a -> role_f5f279b3 [label="3 " color="#076bc5" fontcolor="#076bc5" id=edge_1d495848 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Gather kubeinit secrets" {
		role_1343cf9b [label="[role] Gather kubeinit secrets" color="#076bc5" id=role_1343cf9b tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_3ecde361 [label="[role] Gather additional facts from localhost for kubeinit" color="#076bc5" id=role_3ecde361 tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_9a1c7a7e [label="[role] Create ssh config file from template" color="#076bc5" id=role_9a1c7a7e tooltip="Create ssh config file from template"]
	}
	subgraph "task-prepare-hypervisors" {
		role_6427a60b [label="[role] task-prepare-hypervisors" color="#076bc5" id=role_6427a60b tooltip="task-prepare-hypervisors"]
		role_6427a60b -> role_1343cf9b [label="1 " color="#076bc5" fontcolor="#076bc5" id=edge_ad298121 labeltooltip="1 " tooltip="1 "]
		role_6427a60b -> role_3ecde361 [label="2 " color="#076bc5" fontcolor="#076bc5" id=edge_7ce00b4e labeltooltip="2 " tooltip="2 "]
		role_6427a60b -> role_9a1c7a7e [label="3 " color="#076bc5" fontcolor="#076bc5" id=edge_cfcd1586 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Play: Perform initial setup on ansible-controller host (localhost) (1)" {
		play_9b3dad17 -> block_ff67938b [label=1 color="#076bc5" fontcolor="#076bc5" id=edge_eeaaba03 labeltooltip=1 tooltip=1]
		subgraph cluster_block_ff67938b {
			block_ff67938b [label="[block] Gather facts about the deployment environment" color="#076bc5" id=block_ff67938b labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_ff67938b -> role_74cbb72a [label="1 " color="#076bc5" fontcolor="#076bc5" id=edge_32cfad4f labeltooltip="1 " tooltip="1 "]
		}
		play_9b3dad17 -> block_4499d2c3 [label=2 color="#076bc5" fontcolor="#076bc5" id=edge_a1eb277f labeltooltip=2 tooltip=2]
		subgraph cluster_block_4499d2c3 {
			block_4499d2c3 [label="[block] Prepare the hypervisors" color="#076bc5" id=block_4499d2c3 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_4499d2c3 -> role_6427a60b [label="1 " color="#076bc5" fontcolor="#076bc5" id=edge_d035e9eb labeltooltip="1 " tooltip="1 "]
		}
	}
	play_97d8af7d [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#2c08c4" fontcolor="#ffffff" id=play_97d8af7d shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_97d8af7d [label="2 " color="#2c08c4" fontcolor="#2c08c4" id=edge_d97afcbe labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_52442a77 [label="[role] Provision the libvirt services on the hypervisor" color="#2c08c4" id=role_52442a77 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_ff80903b [label="[role] Prepare each hypervisor in the deployment" color="#2c08c4" id=role_ff80903b tooltip="Prepare each hypervisor in the deployment"]
		role_ff80903b -> role_52442a77 [label="1 " color="#2c08c4" fontcolor="#2c08c4" id=edge_70e30f1f labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_97d8af7d -> block_a56399f7 [label=1 color="#2c08c4" fontcolor="#2c08c4" id=edge_ce742dd6 labeltooltip=1 tooltip=1]
		subgraph cluster_block_a56399f7 {
			block_a56399f7 [label="[block] Prepare individual hypervisors" color="#2c08c4" id=block_a56399f7 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_a56399f7 -> role_ff80903b [label="1 " color="#2c08c4" fontcolor="#2c08c4" id=edge_90c0ffcc labeltooltip="1 " tooltip="1 "]
		}
	}
	play_8bc7952a [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#3dcb01" fontcolor="#ffffff" id=play_8bc7952a shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_8bc7952a [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3e5cb4b0 labeltooltip="3 " tooltip="3 "]
	subgraph "Gather kubeinit secrets" {
		role_5780666b [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_5780666b tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_a4cde286 [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_a4cde286 tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_79c03552 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_79c03552 tooltip="Create ssh config file from template"]
	}
	subgraph "task-prepare-environment" {
		role_a41d35e7 [label="[role] task-prepare-environment" color="#3dcb01" id=role_a41d35e7 tooltip="task-prepare-environment"]
		role_a41d35e7 -> role_5780666b [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_deb627d9 labeltooltip="1 " tooltip="1 "]
		role_a41d35e7 -> role_a4cde286 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_dc05e663 labeltooltip="2 " tooltip="2 "]
		role_a41d35e7 -> role_79c03552 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_76869b0b labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Gather kubeinit secrets" {
		role_31b67cb0 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_31b67cb0 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_2b3acdeb [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_2b3acdeb tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_c9993f41 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_c9993f41 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if not prepared" {
		role_92e90ce8 [label="[role] Prepare environment if not prepared" color="#3dcb01" id=role_92e90ce8 tooltip="Prepare environment if not prepared"]
		role_92e90ce8 -> role_31b67cb0 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_1727a998 labeltooltip="1 " tooltip="1 "]
		role_92e90ce8 -> role_2b3acdeb [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_8978aa9d labeltooltip="2 " tooltip="2 "]
		role_92e90ce8 -> role_c9993f41 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_296c39bf labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_1099a545 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#3dcb01" id=role_1099a545 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_d49b3fd5 [label="[role] task-cleanup-hypervisors" color="#3dcb01" id=role_d49b3fd5 tooltip="task-cleanup-hypervisors"]
		role_d49b3fd5 -> role_92e90ce8 [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_34a97a2f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_d49b3fd5 -> role_1099a545 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_242141ab labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Gather kubeinit secrets" {
		role_31d17689 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_31d17689 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_dcfd0dce [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_dcfd0dce tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_96289eec [label="[role] Create ssh config file from template" color="#3dcb01" id=role_96289eec tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if not prepared" {
		role_c2935c6c [label="[role] Prepare environment if not prepared" color="#3dcb01" id=role_c2935c6c tooltip="Prepare environment if not prepared"]
		role_c2935c6c -> role_31d17689 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_003f5820 labeltooltip="1 " tooltip="1 "]
		role_c2935c6c -> role_dcfd0dce [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_800e4db4 labeltooltip="2 " tooltip="2 "]
		role_c2935c6c -> role_96289eec [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_d780cc1c labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_6c0827da [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#3dcb01" id=role_6c0827da tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_55d10027 [label="[role] Cleanup hypervisors if needed" color="#3dcb01" id=role_55d10027 tooltip="Cleanup hypervisors if needed"]
		role_55d10027 -> role_c2935c6c [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_048b1ee9 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_55d10027 -> role_6c0827da [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_6ac2465f labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_3e94ff58 [label="[role] task-run-validations" color="#3dcb01" id=role_3e94ff58 tooltip="task-run-validations"]
		role_3e94ff58 -> role_55d10027 [label="1 [when: not hypervisors_cleaned]" color="#3dcb01" fontcolor="#3dcb01" id=edge_7cef56e5 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Gather kubeinit secrets" {
		role_92c6e7a5 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_92c6e7a5 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_168c2e37 [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_168c2e37 tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_e04fb829 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_e04fb829 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if not prepared" {
		role_0199302c [label="[role] Prepare environment if not prepared" color="#3dcb01" id=role_0199302c tooltip="Prepare environment if not prepared"]
		role_0199302c -> role_92c6e7a5 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_20a6b8e1 labeltooltip="1 " tooltip="1 "]
		role_0199302c -> role_168c2e37 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_02a56b20 labeltooltip="2 " tooltip="2 "]
		role_0199302c -> role_e04fb829 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_19ec6d3a labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_1e36be66 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#3dcb01" id=role_1e36be66 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_3221aacf [label="[role] Cleanup hypervisors if needed" color="#3dcb01" id=role_3221aacf tooltip="Cleanup hypervisors if needed"]
		role_3221aacf -> role_0199302c [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_1b408b00 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_3221aacf -> role_1e36be66 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_078ca56a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_71c4fc7d [label="[role] task-create-network" color="#3dcb01" id=role_71c4fc7d tooltip="task-create-network"]
		role_71c4fc7d -> role_3221aacf [label="1 [when: not hypervisors_cleaned]" color="#3dcb01" fontcolor="#3dcb01" id=edge_038bf12d labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Gather kubeinit secrets" {
		role_68fe7a52 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_68fe7a52 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_18bee2bb [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_18bee2bb tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_1ee79466 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_1ee79466 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if not prepared" {
		role_f94bf42c [label="[role] Prepare environment if not prepared" color="#3dcb01" id=role_f94bf42c tooltip="Prepare environment if not prepared"]
		role_f94bf42c -> role_68fe7a52 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_08d90eda labeltooltip="1 " tooltip="1 "]
		role_f94bf42c -> role_18bee2bb [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_a5bf30e0 labeltooltip="2 " tooltip="2 "]
		role_f94bf42c -> role_1ee79466 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_27533a3d labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Prepare podman" {
		role_51722049 [label="[role] Prepare podman" color="#3dcb01" id=role_51722049 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_fbd5d7b2 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_fbd5d7b2 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_eb1ee8bf [label="[role] Configure Bind" color="#3dcb01" id=role_eb1ee8bf tooltip="Configure Bind"]
		role_eb1ee8bf -> role_fbd5d7b2 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3690cb98 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_11e7999f [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_11e7999f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_d72f8108 [label="[role] Configure Dnsmasq" color="#3dcb01" id=role_d72f8108 tooltip="Configure Dnsmasq"]
		role_d72f8108 -> role_11e7999f [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_710532db labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_4ad3a261 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_4ad3a261 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_5df00164 [label="[role] Configure HAProxy" color="#3dcb01" id=role_5df00164 tooltip="Configure HAProxy"]
		role_5df00164 -> role_4ad3a261 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_f2168b86 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_63886f13 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_63886f13 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_9d24d86e [label="[role] Configure Nexus" color="#3dcb01" id=role_9d24d86e tooltip="Configure Nexus"]
		role_9d24d86e -> role_63886f13 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_ca0a88d8 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_465a8fe5 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_465a8fe5 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_e3c0218e [label="[role] Configure Apache" color="#3dcb01" id=role_e3c0218e tooltip="Configure Apache"]
		role_e3c0218e -> role_465a8fe5 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_8d5817ef labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_36093416 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_36093416 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_49a2a1b1 [label="[role] Configure a local container image registry" color="#3dcb01" id=role_49a2a1b1 tooltip="Configure a local container image registry"]
		role_49a2a1b1 -> role_36093416 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_15cf2dec labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_439305c7 [label="[role] task-create-services" color="#3dcb01" id=role_439305c7 tooltip="task-create-services"]
		role_439305c7 -> role_f94bf42c [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_c5109b08 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_439305c7 -> role_51722049 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_61521fd5 labeltooltip="2 " tooltip="2 "]
		role_439305c7 -> role_eb1ee8bf [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_67ce7a4b labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_439305c7 -> role_d72f8108 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_2576d1e8 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_439305c7 -> role_5df00164 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_7b8728f5 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_439305c7 -> role_9d24d86e [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_a5455c9d labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_439305c7 -> role_e3c0218e [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_e4d748c7 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_439305c7 -> role_49a2a1b1 [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_58767a22 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Gather kubeinit secrets" {
		role_14af4b4e [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_14af4b4e tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_9e1c3aa5 [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_9e1c3aa5 tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_f16b8294 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_f16b8294 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if needed" {
		role_748f6777 [label="[role] Prepare environment if needed" color="#3dcb01" id=role_748f6777 tooltip="Prepare environment if needed"]
		role_748f6777 -> role_14af4b4e [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_a462d2fa labeltooltip="1 " tooltip="1 "]
		role_748f6777 -> role_9e1c3aa5 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_77df57cd labeltooltip="2 " tooltip="2 "]
		role_748f6777 -> role_f16b8294 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_63c9b190 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Gather network and host facts for guest" {
		role_00d5bf47 [label="[role] Gather network and host facts for guest" color="#3dcb01" id=role_00d5bf47 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_d4602c6e [label="[role] Prepare services if needed" color="#3dcb01" id=role_d4602c6e tooltip="Prepare services if needed"]
		role_d4602c6e -> role_748f6777 [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_1ac5dc5f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_d4602c6e -> role_00d5bf47 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_befab7d9 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_d78f1720 [label="[role] Create systemd service for podman container" color="#3dcb01" id=role_d78f1720 tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_64dea401 [label="[role] Gather network and host facts for provision service" color="#3dcb01" id=role_64dea401 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_22c782eb [label="[role] Setup the cluster provision container" color="#3dcb01" id=role_22c782eb tooltip="Setup the cluster provision container"]
		role_22c782eb -> role_d78f1720 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3bd29d40 labeltooltip="1 " tooltip="1 "]
		role_22c782eb -> role_64dea401 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3d320882 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_b0d65e90 [label="[role] Delegate to the distro role to prepare the cluster" color="#3dcb01" id=role_b0d65e90 tooltip="Delegate to the distro role to prepare the cluster"]
		role_b0d65e90 -> role_22c782eb [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_acf45c1a labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_00d13aac [label="[role] task-prepare-cluster" color="#3dcb01" id=role_00d13aac tooltip="task-prepare-cluster"]
		role_00d13aac -> role_d4602c6e [label="1 [when: not services_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_8666aa96 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_00d13aac -> role_b0d65e90 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_045354c1 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Gather kubeinit secrets" {
		role_60034511 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_60034511 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_c3eec575 [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_c3eec575 tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_41b9fda4 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_41b9fda4 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if not prepared" {
		role_9070edc4 [label="[role] Prepare environment if not prepared" color="#3dcb01" id=role_9070edc4 tooltip="Prepare environment if not prepared"]
		role_9070edc4 -> role_60034511 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3243c5c3 labeltooltip="1 " tooltip="1 "]
		role_9070edc4 -> role_c3eec575 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_499761b6 labeltooltip="2 " tooltip="2 "]
		role_9070edc4 -> role_41b9fda4 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_69b5e195 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "task-download-images" {
		role_ba0930e1 [label="[role] task-download-images" color="#3dcb01" id=role_ba0930e1 tooltip="task-download-images"]
		role_ba0930e1 -> role_9070edc4 [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_5da7f151 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Gather kubeinit secrets" {
		role_92b491fa [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_92b491fa tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_a30fc2bf [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_a30fc2bf tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_f4d45fd4 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_f4d45fd4 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if needed" {
		role_974e10a0 [label="[role] Prepare environment if needed" color="#3dcb01" id=role_974e10a0 tooltip="Prepare environment if needed"]
		role_974e10a0 -> role_92b491fa [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_aa91d6f2 labeltooltip="1 " tooltip="1 "]
		role_974e10a0 -> role_a30fc2bf [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_84024b8f labeltooltip="2 " tooltip="2 "]
		role_974e10a0 -> role_f4d45fd4 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_edb87000 labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Gather network and host facts for guest" {
		role_8f1ae302 [label="[role] Gather network and host facts for guest" color="#3dcb01" id=role_8f1ae302 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_0ade986b [label="[role] Prepare services if needed" color="#3dcb01" id=role_0ade986b tooltip="Prepare services if needed"]
		role_0ade986b -> role_974e10a0 [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_44d2e396 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0ade986b -> role_8f1ae302 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_dcb7e923 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_37cde8a0 [label="[role] Deploy the cluster nodes" color="#3dcb01" id=role_37cde8a0 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_d3c4cb2c [label="[role] Delegate to the distro role to deploy the cluster" color="#3dcb01" id=role_d3c4cb2c tooltip="Delegate to the distro role to deploy the cluster"]
		role_d3c4cb2c -> role_37cde8a0 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#3dcb01" fontcolor="#3dcb01" id=edge_48a83729 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_831bb531 [label="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker" color="#3dcb01" id=task_831bb531 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker"]
		role_d3c4cb2c -> task_831bb531 [label="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_8134fb01 labeltooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]"]
		task_e9326ac7 [label="kubeinit.kubeinit.kubeinit_rke : Install RKE" color="#3dcb01" id=task_e9326ac7 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Install RKE"]
		role_d3c4cb2c -> task_e9326ac7 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_b68ac8a7 labeltooltip="3 " tooltip="3 "]
		task_76f81805 [label="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig" color="#3dcb01" id=task_76f81805 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig"]
		role_d3c4cb2c -> task_76f81805 [label="4 " color="#3dcb01" fontcolor="#3dcb01" id=edge_db6e6abd labeltooltip="4 " tooltip="4 "]
		task_8dc112b0 [label="kubeinit.kubeinit.kubeinit_rke : Create kube directory" color="#3dcb01" id=task_8dc112b0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Create kube directory"]
		role_d3c4cb2c -> task_8dc112b0 [label="5 " color="#3dcb01" fontcolor="#3dcb01" id=edge_251dd4ad labeltooltip="5 " tooltip="5 "]
		task_d57f43ee [label="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig" color="#3dcb01" id=task_d57f43ee shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig"]
		role_d3c4cb2c -> task_d57f43ee [label="6 " color="#3dcb01" fontcolor="#3dcb01" id=edge_a57ec4c5 labeltooltip="6 " tooltip="6 "]
		task_229bbc24 [label="kubeinit.kubeinit.kubeinit_rke : Touch a file" color="#3dcb01" id=task_229bbc24 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Touch a file"]
		role_d3c4cb2c -> task_229bbc24 [label="7 " color="#3dcb01" fontcolor="#3dcb01" id=edge_76829b34 labeltooltip="7 " tooltip="7 "]
		task_b0285842 [label="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes" color="#3dcb01" id=task_b0285842 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes"]
		role_d3c4cb2c -> task_b0285842 [label="8 [when: not kubeinit_compute_count|int > 0]" color="#3dcb01" fontcolor="#3dcb01" id=edge_121bc571 labeltooltip="8 [when: not kubeinit_compute_count|int > 0]" tooltip="8 [when: not kubeinit_compute_count|int > 0]"]
	}
	subgraph "task-deploy-cluster" {
		role_4f43f1b4 [label="[role] task-deploy-cluster" color="#3dcb01" id=role_4f43f1b4 tooltip="task-deploy-cluster"]
		role_4f43f1b4 -> role_0ade986b [label="1 [when: not services_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_bdcde5f1 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_4f43f1b4 -> role_d3c4cb2c [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_2135b277 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Gather kubeinit secrets" {
		role_91e8eae6 [label="[role] Gather kubeinit secrets" color="#3dcb01" id=role_91e8eae6 tooltip="Gather kubeinit secrets"]
	}
	subgraph "Gather additional facts from localhost for kubeinit" {
		role_64e17b4b [label="[role] Gather additional facts from localhost for kubeinit" color="#3dcb01" id=role_64e17b4b tooltip="Gather additional facts from localhost for kubeinit"]
	}
	subgraph "Create ssh config file from template" {
		role_175d8d31 [label="[role] Create ssh config file from template" color="#3dcb01" id=role_175d8d31 tooltip="Create ssh config file from template"]
	}
	subgraph "Prepare environment if needed" {
		role_6f1bafa2 [label="[role] Prepare environment if needed" color="#3dcb01" id=role_6f1bafa2 tooltip="Prepare environment if needed"]
		role_6f1bafa2 -> role_91e8eae6 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_a381b37a labeltooltip="1 " tooltip="1 "]
		role_6f1bafa2 -> role_64e17b4b [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_ec874e0f labeltooltip="2 " tooltip="2 "]
		role_6f1bafa2 -> role_175d8d31 [label="3 " color="#3dcb01" fontcolor="#3dcb01" id=edge_91a9aaae labeltooltip="3 " tooltip="3 "]
	}
	subgraph "Gather network and host facts for guest" {
		role_dade9f32 [label="[role] Gather network and host facts for guest" color="#3dcb01" id=role_dade9f32 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_bb41fc65 [label="[role] Prepare services if needed" color="#3dcb01" id=role_bb41fc65 tooltip="Prepare services if needed"]
		role_bb41fc65 -> role_6f1bafa2 [label="1 [when: not environment_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_41aa38bd labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_bb41fc65 -> role_dade9f32 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_bcfd4fbb labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_d9e40ff6 [label="[role] Deploy the apps" color="#3dcb01" id=role_d9e40ff6 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_8696bec7 [label="[role] Configure NFS" color="#3dcb01" id=role_8696bec7 tooltip="Configure NFS"]
	}
	subgraph "Deploy Submariner" {
		role_c7d4f547 [label="[role] Deploy Submariner" color="#3dcb01" id=role_c7d4f547 tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_0588e7a4 [label="[role] Delegate to distro role to run post-deployment tasks" color="#3dcb01" id=role_0588e7a4 tooltip="Delegate to distro role to run post-deployment tasks"]
		role_0588e7a4 -> role_d9e40ff6 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_aeb2eb23 labeltooltip="1 " tooltip="1 "]
		role_0588e7a4 -> role_8696bec7 [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#3dcb01" fontcolor="#3dcb01" id=edge_344d3ab7 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_0588e7a4 -> role_c7d4f547 [label="3 [when: 'submariner' in kubeinit_cluster_hostvars.post_deployment_services | default(False)]" color="#3dcb01" fontcolor="#3dcb01" id=edge_303c0faf labeltooltip="3 [when: 'submariner' in kubeinit_cluster_hostvars.post_deployment_services | default(False)]" tooltip="3 [when: 'submariner' in kubeinit_cluster_hostvars.post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_d060096d [label="[role] task-post-deployment" color="#3dcb01" id=role_d060096d tooltip="task-post-deployment"]
		role_d060096d -> role_bb41fc65 [label="1 [when: not services_prepared]" color="#3dcb01" fontcolor="#3dcb01" id=edge_551d0da6 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_d060096d -> role_0588e7a4 [label="2 " color="#3dcb01" fontcolor="#3dcb01" id=edge_9160c709 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_8bc7952a -> block_f6ea72bf [label=1 color="#3dcb01" fontcolor="#3dcb01" id=edge_251eea53 labeltooltip=1 tooltip=1]
		subgraph cluster_block_f6ea72bf {
			block_f6ea72bf [label="[block] Prepare the environment" color="#3dcb01" id=block_f6ea72bf labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_f6ea72bf -> role_a41d35e7 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_3b0b63b4 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_b060f7bc [label=2 color="#3dcb01" fontcolor="#3dcb01" id=edge_6530be7d labeltooltip=2 tooltip=2]
		subgraph cluster_block_b060f7bc {
			block_b060f7bc [label="[block] Cleanup hypervisors" color="#3dcb01" id=block_b060f7bc labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_b060f7bc -> role_d49b3fd5 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_aa5cdb97 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_88780954 [label=3 color="#3dcb01" fontcolor="#3dcb01" id=edge_5edf5b52 labeltooltip=3 tooltip=3]
		subgraph cluster_block_88780954 {
			block_88780954 [label="[block] Run validations on cluster resources" color="#3dcb01" id=block_88780954 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_88780954 -> role_3e94ff58 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_65b6b893 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_d040cb28 [label=4 color="#3dcb01" fontcolor="#3dcb01" id=edge_b7acf027 labeltooltip=4 tooltip=4]
		subgraph cluster_block_d040cb28 {
			block_d040cb28 [label="[block] Create the cluster network resources" color="#3dcb01" id=block_d040cb28 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_d040cb28 -> role_71c4fc7d [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_e3e01827 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_a45bf0c2 [label=5 color="#3dcb01" fontcolor="#3dcb01" id=edge_fae4176d labeltooltip=5 tooltip=5]
		subgraph cluster_block_a45bf0c2 {
			block_a45bf0c2 [label="[block] Create services the cluster will need" color="#3dcb01" id=block_a45bf0c2 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_a45bf0c2 -> role_439305c7 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_b1c1d44c labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_6d34aabb [label=6 color="#3dcb01" fontcolor="#3dcb01" id=edge_7587d681 labeltooltip=6 tooltip=6]
		subgraph cluster_block_6d34aabb {
			block_6d34aabb [label="[block] Prepare to deploy the cluster" color="#3dcb01" id=block_6d34aabb labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_6d34aabb -> role_00d13aac [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_bdaf3086 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_cd4e6d9f [label=7 color="#3dcb01" fontcolor="#3dcb01" id=edge_dd2e5896 labeltooltip=7 tooltip=7]
		subgraph cluster_block_cd4e6d9f {
			block_cd4e6d9f [label="[block] Download cloud images" color="#3dcb01" id=block_cd4e6d9f labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_cd4e6d9f -> role_ba0930e1 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_c20b58b5 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_1b27483b [label=8 color="#3dcb01" fontcolor="#3dcb01" id=edge_d52bcc30 labeltooltip=8 tooltip=8]
		subgraph cluster_block_1b27483b {
			block_1b27483b [label="[block] Deploy the cluster" color="#3dcb01" id=block_1b27483b labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_1b27483b -> role_4f43f1b4 [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_8850bb37 labeltooltip="1 " tooltip="1 "]
		}
		play_8bc7952a -> block_aa33dbf1 [label=9 color="#3dcb01" fontcolor="#3dcb01" id=edge_eaf5c39c labeltooltip=9 tooltip=9]
		subgraph cluster_block_aa33dbf1 {
			block_aa33dbf1 [label="[block] Run any post-deployment tasks" color="#3dcb01" id=block_aa33dbf1 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_aa33dbf1 -> role_d060096d [label="1 " color="#3dcb01" fontcolor="#3dcb01" id=edge_463055e5 labeltooltip="1 " tooltip="1 "]
		}
	}
}
