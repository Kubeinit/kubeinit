digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_d811cf33 [label="Play: Initial setup (1)" color="#197db3" fontcolor="#ffffff" id=play_d811cf33 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_d811cf33 [label="1 " color="#197db3" fontcolor="#197db3" id=edge_d48a13bf labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_e86fc19b [label="[role] Read podman secrets if running from the container" color="#197db3" id=role_e86fc19b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_a4a51bd7 [label="[role] task-gather-facts" color="#197db3" id=role_a4a51bd7 tooltip="task-gather-facts"]
		role_a4a51bd7 -> role_e86fc19b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#197db3" fontcolor="#197db3" id=edge_56287e15 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_ddeece57 [label="[role] Read podman secrets if running from the container" color="#197db3" id=role_ddeece57 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_477cd2f4 [label="[role] task-prepare-hypervisors" color="#197db3" id=role_477cd2f4 tooltip="task-prepare-hypervisors"]
		role_477cd2f4 -> role_ddeece57 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#197db3" fontcolor="#197db3" id=edge_d4c9062e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_d811cf33 -> block_48ab616f [label=1 color="#197db3" fontcolor="#197db3" id=edge_b437e59e labeltooltip=1 tooltip=1]
		subgraph cluster_block_48ab616f {
			block_48ab616f [label="[block] Gather facts about the deployment environment" color="#197db3" id=block_48ab616f labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_48ab616f -> role_a4a51bd7 [label="1 " color="#197db3" fontcolor="#197db3" id=edge_bda8ddef labeltooltip="1 " tooltip="1 "]
		}
		play_d811cf33 -> block_00fea68e [label=2 color="#197db3" fontcolor="#197db3" id=edge_35391e68 labeltooltip=2 tooltip=2]
		subgraph cluster_block_00fea68e {
			block_00fea68e [label="[block] Prepare the hypervisors" color="#197db3" id=block_00fea68e labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_00fea68e -> role_477cd2f4 [label="1 " color="#197db3" fontcolor="#197db3" id=edge_935e4828 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_174435b1 [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#9b3158" fontcolor="#ffffff" id=play_174435b1 shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_174435b1 [label="2 " color="#9b3158" fontcolor="#9b3158" id=edge_c262d14a labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_24c735b8 [label="[role] Provision the libvirt services on the hypervisor" color="#9b3158" id=role_24c735b8 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_21f102b1 [label="[role] Prepare each hypervisor in the deployment" color="#9b3158" id=role_21f102b1 tooltip="Prepare each hypervisor in the deployment"]
		role_21f102b1 -> role_24c735b8 [label="1 " color="#9b3158" fontcolor="#9b3158" id=edge_b7f4d6e8 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_174435b1 -> block_04d8b0b9 [label=1 color="#9b3158" fontcolor="#9b3158" id=edge_19b1a17e labeltooltip=1 tooltip=1]
		subgraph cluster_block_04d8b0b9 {
			block_04d8b0b9 [label="[block] Prepare individual hypervisors" color="#9b3158" id=block_04d8b0b9 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_04d8b0b9 -> role_21f102b1 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#9b3158" fontcolor="#9b3158" id=edge_b88f568e labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_a48690a6 [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#953792" fontcolor="#ffffff" id=play_a48690a6 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_a48690a6 [label="3 " color="#953792" fontcolor="#953792" id=edge_ad4b7603 labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_ef4739c3 [label="[role] Read podman secrets if running from the container" color="#953792" id=role_ef4739c3 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_b061d492 [label="[role] task-prepare-environment" color="#953792" id=role_b061d492 tooltip="task-prepare-environment"]
		role_b061d492 -> role_ef4739c3 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_47b304c0 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_7ddbdf49 [label="[role] Read podman secrets if running from the container" color="#953792" id=role_7ddbdf49 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_dfa3b805 [label="[role] Prepare environment if not prepared" color="#953792" id=role_dfa3b805 tooltip="Prepare environment if not prepared"]
		role_dfa3b805 -> role_7ddbdf49 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_c91f6e4d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_677924aa [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#953792" id=role_677924aa tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_ae3c28cd [label="[role] task-cleanup-hypervisors" color="#953792" id=role_ae3c28cd tooltip="task-cleanup-hypervisors"]
		role_ae3c28cd -> role_dfa3b805 [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_2adee18f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_ae3c28cd -> role_677924aa [label="2 " color="#953792" fontcolor="#953792" id=edge_27a23c8c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_990dd21c [label="[role] Read podman secrets if running from the container" color="#953792" id=role_990dd21c tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_a4350a5f [label="[role] Prepare environment if not prepared" color="#953792" id=role_a4350a5f tooltip="Prepare environment if not prepared"]
		role_a4350a5f -> role_990dd21c [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_519f21d3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_f271aa16 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#953792" id=role_f271aa16 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_4151fbd6 [label="[role] Cleanup hypervisors if needed" color="#953792" id=role_4151fbd6 tooltip="Cleanup hypervisors if needed"]
		role_4151fbd6 -> role_a4350a5f [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_630907f3 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_4151fbd6 -> role_f271aa16 [label="2 " color="#953792" fontcolor="#953792" id=edge_e2edc693 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_60dc0849 [label="[role] task-run-validations" color="#953792" id=role_60dc0849 tooltip="task-run-validations"]
		role_60dc0849 -> role_4151fbd6 [label="1 [when: not hypervisors_cleaned]" color="#953792" fontcolor="#953792" id=edge_7d9acb1d labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_99e3189f [label="[role] Read podman secrets if running from the container" color="#953792" id=role_99e3189f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_2c41a20b [label="[role] Prepare environment if not prepared" color="#953792" id=role_2c41a20b tooltip="Prepare environment if not prepared"]
		role_2c41a20b -> role_99e3189f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_3bfe7792 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_f9fc873d [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#953792" id=role_f9fc873d tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_e4329bb0 [label="[role] Cleanup hypervisors if needed" color="#953792" id=role_e4329bb0 tooltip="Cleanup hypervisors if needed"]
		role_e4329bb0 -> role_2c41a20b [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_3de406be labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_e4329bb0 -> role_f9fc873d [label="2 " color="#953792" fontcolor="#953792" id=edge_e17f84c2 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_dd7d31ca [label="[role] task-create-network" color="#953792" id=role_dd7d31ca tooltip="task-create-network"]
		role_dd7d31ca -> role_e4329bb0 [label="1 [when: not hypervisors_cleaned]" color="#953792" fontcolor="#953792" id=edge_42de8d85 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_ff92ec92 [label="[role] Read podman secrets if running from the container" color="#953792" id=role_ff92ec92 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_381bbd14 [label="[role] Prepare environment if not prepared" color="#953792" id=role_381bbd14 tooltip="Prepare environment if not prepared"]
		role_381bbd14 -> role_ff92ec92 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_48b4964b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_3be700a1 [label="[role] Prepare podman" color="#953792" id=role_3be700a1 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_6e7f5eae [label="[role] Create systemd service for podman container" color="#953792" id=role_6e7f5eae tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_b8bcfdb2 [label="[role] Configure Bind" color="#953792" id=role_b8bcfdb2 tooltip="Configure Bind"]
		role_b8bcfdb2 -> role_6e7f5eae [label="1 " color="#953792" fontcolor="#953792" id=edge_8e91251c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_a06c3ddc [label="[role] Create systemd service for podman container" color="#953792" id=role_a06c3ddc tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_f0bc8002 [label="[role] Configure Dnsmasq" color="#953792" id=role_f0bc8002 tooltip="Configure Dnsmasq"]
		role_f0bc8002 -> role_a06c3ddc [label="1 " color="#953792" fontcolor="#953792" id=edge_3b508690 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_589aa3cc [label="[role] Create systemd service for podman container" color="#953792" id=role_589aa3cc tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_6c796ecc [label="[role] Configure HAProxy" color="#953792" id=role_6c796ecc tooltip="Configure HAProxy"]
		role_6c796ecc -> role_589aa3cc [label="1 " color="#953792" fontcolor="#953792" id=edge_17bb7f8e labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_771a78b2 [label="[role] Create systemd service for podman container" color="#953792" id=role_771a78b2 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_a1a90eaf [label="[role] Configure Nexus" color="#953792" id=role_a1a90eaf tooltip="Configure Nexus"]
		role_a1a90eaf -> role_771a78b2 [label="1 " color="#953792" fontcolor="#953792" id=edge_70c1b27b labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_10cab20b [label="[role] Create systemd service for podman container" color="#953792" id=role_10cab20b tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_4168cbc1 [label="[role] Configure Apache" color="#953792" id=role_4168cbc1 tooltip="Configure Apache"]
		role_4168cbc1 -> role_10cab20b [label="1 " color="#953792" fontcolor="#953792" id=edge_82a279b5 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_912d9497 [label="[role] Create systemd service for podman container" color="#953792" id=role_912d9497 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_ef8963eb [label="[role] Configure a local container image registry" color="#953792" id=role_ef8963eb tooltip="Configure a local container image registry"]
		role_ef8963eb -> role_912d9497 [label="1 " color="#953792" fontcolor="#953792" id=edge_0f7ec4e6 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_350e1493 [label="[role] task-create-services" color="#953792" id=role_350e1493 tooltip="task-create-services"]
		role_350e1493 -> role_381bbd14 [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_6e05910e labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_350e1493 -> role_3be700a1 [label="2 " color="#953792" fontcolor="#953792" id=edge_4b25734f labeltooltip="2 " tooltip="2 "]
		role_350e1493 -> role_b8bcfdb2 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_e453cf11 labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_350e1493 -> role_f0bc8002 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_1e59fc4d labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_350e1493 -> role_6c796ecc [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_34f5c7f1 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_350e1493 -> role_a1a90eaf [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_b542859e labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_350e1493 -> role_4168cbc1 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_db64fc69 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_350e1493 -> role_ef8963eb [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#953792" fontcolor="#953792" id=edge_544a3518 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_3d559d3c [label="[role] Read podman secrets if running from the container" color="#953792" id=role_3d559d3c tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_a41d7197 [label="[role] Prepare environment if needed" color="#953792" id=role_a41d7197 tooltip="Prepare environment if needed"]
		role_a41d7197 -> role_3d559d3c [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_66aba6f3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_698d3f09 [label="[role] Gather network and host facts for guest" color="#953792" id=role_698d3f09 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_a02034aa [label="[role] Prepare services if needed" color="#953792" id=role_a02034aa tooltip="Prepare services if needed"]
		role_a02034aa -> role_a41d7197 [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_a2e22ea5 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_a02034aa -> role_698d3f09 [label="2 " color="#953792" fontcolor="#953792" id=edge_1d6caaff labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_29e04483 [label="[role] Create systemd service for podman container" color="#953792" id=role_29e04483 tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_ae3b3790 [label="[role] Gather network and host facts for provision service" color="#953792" id=role_ae3b3790 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_2f189836 [label="[role] Setup the cluster provision container" color="#953792" id=role_2f189836 tooltip="Setup the cluster provision container"]
		role_2f189836 -> role_29e04483 [label="1 " color="#953792" fontcolor="#953792" id=edge_4d25d4aa labeltooltip="1 " tooltip="1 "]
		role_2f189836 -> role_ae3b3790 [label="2 " color="#953792" fontcolor="#953792" id=edge_621744c8 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_5149e8cf [label="[role] Delegate to the distro role to prepare the cluster" color="#953792" id=role_5149e8cf tooltip="Delegate to the distro role to prepare the cluster"]
		role_5149e8cf -> role_2f189836 [label="1 " color="#953792" fontcolor="#953792" id=edge_39f46e82 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_0c562969 [label="[role] task-prepare-cluster" color="#953792" id=role_0c562969 tooltip="task-prepare-cluster"]
		role_0c562969 -> role_a02034aa [label="1 [when: not services_prepared]" color="#953792" fontcolor="#953792" id=edge_8b6eb872 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_0c562969 -> role_5149e8cf [label="2 " color="#953792" fontcolor="#953792" id=edge_912eb6bd labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_f8009d92 [label="[role] Read podman secrets if running from the container" color="#953792" id=role_f8009d92 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_16bf6a4a [label="[role] Prepare environment if not prepared" color="#953792" id=role_16bf6a4a tooltip="Prepare environment if not prepared"]
		role_16bf6a4a -> role_f8009d92 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_b7681bf2 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_611d33e3 [label="[role] task-download-images" color="#953792" id=role_611d33e3 tooltip="task-download-images"]
		role_611d33e3 -> role_16bf6a4a [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_79c9494e labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_310dc8a8 [label="[role] Read podman secrets if running from the container" color="#953792" id=role_310dc8a8 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_21af96aa [label="[role] Prepare environment if needed" color="#953792" id=role_21af96aa tooltip="Prepare environment if needed"]
		role_21af96aa -> role_310dc8a8 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_1e92f8d1 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_ab0ef5e0 [label="[role] Gather network and host facts for guest" color="#953792" id=role_ab0ef5e0 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_0f94bc0e [label="[role] Prepare services if needed" color="#953792" id=role_0f94bc0e tooltip="Prepare services if needed"]
		role_0f94bc0e -> role_21af96aa [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_798194c0 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_0f94bc0e -> role_ab0ef5e0 [label="2 " color="#953792" fontcolor="#953792" id=edge_0ef044b6 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster nodes" {
		role_bc1bc844 [label="[role] Deploy the cluster nodes" color="#953792" id=role_bc1bc844 tooltip="Deploy the cluster nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_c5d439d0 [label="[role] Delegate to the distro role to deploy the cluster" color="#953792" id=role_c5d439d0 tooltip="Delegate to the distro role to deploy the cluster"]
		role_c5d439d0 -> role_bc1bc844 [label="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" color="#953792" fontcolor="#953792" id=edge_6f4e0a88 labeltooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]" tooltip="1 [when: kubeinit_cluster_nodes_deployed is not defined or not kubeinit_cluster_nodes_deployed]"]
		task_8a226e0b [label="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker" color="#953792" id=task_8a226e0b shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Enable insecure registry in Docker"]
		role_c5d439d0 -> task_8a226e0b [label="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" color="#953792" fontcolor="#953792" id=edge_63d9ee09 labeltooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'registry' in kubeinit_cluster_hostvars.services]"]
		task_0daa7d62 [label="kubeinit.kubeinit.kubeinit_rke : Install RKE" color="#953792" id=task_0daa7d62 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Install RKE"]
		role_c5d439d0 -> task_0daa7d62 [label="3 " color="#953792" fontcolor="#953792" id=edge_e301cda3 labeltooltip="3 " tooltip="3 "]
		task_4736c4d2 [label="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig" color="#953792" id=task_4736c4d2 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Autoload kubeconfig"]
		role_c5d439d0 -> task_4736c4d2 [label="4 " color="#953792" fontcolor="#953792" id=edge_8e337a4c labeltooltip="4 " tooltip="4 "]
		task_cc8556e7 [label="kubeinit.kubeinit.kubeinit_rke : Create kube directory" color="#953792" id=task_cc8556e7 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Create kube directory"]
		role_c5d439d0 -> task_cc8556e7 [label="5 " color="#953792" fontcolor="#953792" id=edge_671a80c6 labeltooltip="5 " tooltip="5 "]
		task_65d702ad [label="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig" color="#953792" id=task_65d702ad shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Copy the kubeconfig"]
		role_c5d439d0 -> task_65d702ad [label="6 " color="#953792" fontcolor="#953792" id=edge_cf6cde6d labeltooltip="6 " tooltip="6 "]
		task_8200f4ad [label="kubeinit.kubeinit.kubeinit_rke : Touch a file" color="#953792" id=task_8200f4ad shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Touch a file"]
		role_c5d439d0 -> task_8200f4ad [label="7 " color="#953792" fontcolor="#953792" id=edge_51fb5fc5 labeltooltip="7 " tooltip="7 "]
		task_a95f8d13 [label="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes" color="#953792" id=task_a95f8d13 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_rke : Allow schedule workloads in controller nodes if there are no compute nodes"]
		role_c5d439d0 -> task_a95f8d13 [label="8 [when: not kubeinit_compute_count|int > 0]" color="#953792" fontcolor="#953792" id=edge_121acfcf labeltooltip="8 [when: not kubeinit_compute_count|int > 0]" tooltip="8 [when: not kubeinit_compute_count|int > 0]"]
	}
	subgraph "task-deploy-cluster" {
		role_43ecf591 [label="[role] task-deploy-cluster" color="#953792" id=role_43ecf591 tooltip="task-deploy-cluster"]
		role_43ecf591 -> role_0f94bc0e [label="1 [when: not services_prepared]" color="#953792" fontcolor="#953792" id=edge_2174e305 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_43ecf591 -> role_c5d439d0 [label="2 " color="#953792" fontcolor="#953792" id=edge_141b293e labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_4675b33d [label="[role] Read podman secrets if running from the container" color="#953792" id=role_4675b33d tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_ecabf71a [label="[role] Prepare environment if needed" color="#953792" id=role_ecabf71a tooltip="Prepare environment if needed"]
		role_ecabf71a -> role_4675b33d [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#953792" fontcolor="#953792" id=edge_d78bf662 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_271c8db8 [label="[role] Gather network and host facts for guest" color="#953792" id=role_271c8db8 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_f85bf8b7 [label="[role] Prepare services if needed" color="#953792" id=role_f85bf8b7 tooltip="Prepare services if needed"]
		role_f85bf8b7 -> role_ecabf71a [label="1 [when: not environment_prepared]" color="#953792" fontcolor="#953792" id=edge_85f6c192 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_f85bf8b7 -> role_271c8db8 [label="2 " color="#953792" fontcolor="#953792" id=edge_4d3e0a2c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the apps" {
		role_18709365 [label="[role] Deploy the apps" color="#953792" id=role_18709365 tooltip="Deploy the apps"]
	}
	subgraph "Configure NFS" {
		role_d6c53e2b [label="[role] Configure NFS" color="#953792" id=role_d6c53e2b tooltip="Configure NFS"]
	}
	subgraph "Deploy Submariner" {
		role_86859c49 [label="[role] Deploy Submariner" color="#953792" id=role_86859c49 tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_f95411d1 [label="[role] Delegate to distro role to run post-deployment tasks" color="#953792" id=role_f95411d1 tooltip="Delegate to distro role to run post-deployment tasks"]
		role_f95411d1 -> role_18709365 [label="1 " color="#953792" fontcolor="#953792" id=edge_637735a7 labeltooltip="1 " tooltip="1 "]
		role_f95411d1 -> role_d6c53e2b [label="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#953792" fontcolor="#953792" id=edge_44279199 labeltooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="2 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_f95411d1 -> role_86859c49 [label="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" color="#953792" fontcolor="#953792" id=edge_e77f8081 labeltooltip="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" tooltip="3 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_940d0e0b [label="[role] task-post-deployment" color="#953792" id=role_940d0e0b tooltip="task-post-deployment"]
		role_940d0e0b -> role_f85bf8b7 [label="1 [when: not services_prepared]" color="#953792" fontcolor="#953792" id=edge_d041d425 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_940d0e0b -> role_f95411d1 [label="2 " color="#953792" fontcolor="#953792" id=edge_ebd5cc8c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_a48690a6 -> block_4f3a6083 [label=1 color="#953792" fontcolor="#953792" id=edge_972ffeba labeltooltip=1 tooltip=1]
		subgraph cluster_block_4f3a6083 {
			block_4f3a6083 [label="[block] Prepare the environment" color="#953792" id=block_4f3a6083 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_4f3a6083 -> role_b061d492 [label="1 " color="#953792" fontcolor="#953792" id=edge_1ebde1ce labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_4dcaf275 [label=2 color="#953792" fontcolor="#953792" id=edge_e6c24674 labeltooltip=2 tooltip=2]
		subgraph cluster_block_4dcaf275 {
			block_4dcaf275 [label="[block] Cleanup hypervisors" color="#953792" id=block_4dcaf275 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_4dcaf275 -> role_ae3c28cd [label="1 " color="#953792" fontcolor="#953792" id=edge_199bd079 labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_d860bd03 [label=3 color="#953792" fontcolor="#953792" id=edge_e5b4c8c9 labeltooltip=3 tooltip=3]
		subgraph cluster_block_d860bd03 {
			block_d860bd03 [label="[block] Run validations on cluster resources" color="#953792" id=block_d860bd03 labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_d860bd03 -> role_60dc0849 [label="1 " color="#953792" fontcolor="#953792" id=edge_ce9b4c8a labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_9a13f055 [label=4 color="#953792" fontcolor="#953792" id=edge_bf3cd261 labeltooltip=4 tooltip=4]
		subgraph cluster_block_9a13f055 {
			block_9a13f055 [label="[block] Create the cluster network resources" color="#953792" id=block_9a13f055 labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_9a13f055 -> role_dd7d31ca [label="1 " color="#953792" fontcolor="#953792" id=edge_3f21d90a labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_46b1cb48 [label=5 color="#953792" fontcolor="#953792" id=edge_bed28e49 labeltooltip=5 tooltip=5]
		subgraph cluster_block_46b1cb48 {
			block_46b1cb48 [label="[block] Create services the cluster will need" color="#953792" id=block_46b1cb48 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_46b1cb48 -> role_350e1493 [label="1 " color="#953792" fontcolor="#953792" id=edge_e841856f labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_378430b3 [label=6 color="#953792" fontcolor="#953792" id=edge_5ac90f94 labeltooltip=6 tooltip=6]
		subgraph cluster_block_378430b3 {
			block_378430b3 [label="[block] Prepare to deploy the cluster" color="#953792" id=block_378430b3 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_378430b3 -> role_0c562969 [label="1 " color="#953792" fontcolor="#953792" id=edge_a678a132 labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_10ef08a9 [label=7 color="#953792" fontcolor="#953792" id=edge_bb47c46e labeltooltip=7 tooltip=7]
		subgraph cluster_block_10ef08a9 {
			block_10ef08a9 [label="[block] Download cloud images" color="#953792" id=block_10ef08a9 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_10ef08a9 -> role_611d33e3 [label="1 " color="#953792" fontcolor="#953792" id=edge_d0b47139 labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_50e5078d [label=8 color="#953792" fontcolor="#953792" id=edge_16209591 labeltooltip=8 tooltip=8]
		subgraph cluster_block_50e5078d {
			block_50e5078d [label="[block] Deploy the cluster" color="#953792" id=block_50e5078d labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_50e5078d -> role_43ecf591 [label="1 " color="#953792" fontcolor="#953792" id=edge_f78ae759 labeltooltip="1 " tooltip="1 "]
		}
		play_a48690a6 -> block_41854af3 [label=9 color="#953792" fontcolor="#953792" id=edge_608d274f labeltooltip=9 tooltip=9]
		subgraph cluster_block_41854af3 {
			block_41854af3 [label="[block] Run any post-deployment tasks" color="#953792" id=block_41854af3 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_41854af3 -> role_940d0e0b [label="1 " color="#953792" fontcolor="#953792" id=edge_51a978be labeltooltip="1 " tooltip="1 "]
		}
	}
}
