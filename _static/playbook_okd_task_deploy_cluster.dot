digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_0cf16f52 [label="Play: Initial setup (1)" color="#379d2f" fontcolor="#ffffff" id=play_0cf16f52 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_0cf16f52 [label="1 " color="#379d2f" fontcolor="#379d2f" id=edge_4db3b473 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_9ada415b [label="[role] Read podman secrets if running from the container" color="#379d2f" id=role_9ada415b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_174f8f5f [label="[role] task-gather-facts" color="#379d2f" id=role_174f8f5f tooltip="task-gather-facts"]
		role_174f8f5f -> role_9ada415b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#379d2f" fontcolor="#379d2f" id=edge_5c0d1fc2 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_99cf7bf7 [label="[role] Read podman secrets if running from the container" color="#379d2f" id=role_99cf7bf7 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_f20a3989 [label="[role] task-prepare-hypervisors" color="#379d2f" id=role_f20a3989 tooltip="task-prepare-hypervisors"]
		role_f20a3989 -> role_99cf7bf7 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#379d2f" fontcolor="#379d2f" id=edge_40cce79c labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_0cf16f52 -> block_3837cee3 [label=1 color="#379d2f" fontcolor="#379d2f" id=edge_bf9b5657 labeltooltip=1 tooltip=1]
		subgraph cluster_block_3837cee3 {
			block_3837cee3 [label="[block] Gather facts about the deployment environment" color="#379d2f" id=block_3837cee3 labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_3837cee3 -> role_174f8f5f [label="1 " color="#379d2f" fontcolor="#379d2f" id=edge_e7496a13 labeltooltip="1 " tooltip="1 "]
		}
		play_0cf16f52 -> block_63c30586 [label=2 color="#379d2f" fontcolor="#379d2f" id=edge_78b100e3 labeltooltip=2 tooltip=2]
		subgraph cluster_block_63c30586 {
			block_63c30586 [label="[block] Prepare the hypervisors" color="#379d2f" id=block_63c30586 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_63c30586 -> role_f20a3989 [label="1 " color="#379d2f" fontcolor="#379d2f" id=edge_1198d796 labeltooltip="1 " tooltip="1 "]
		}
	}
	play_a7406331 [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#b21aaf" fontcolor="#ffffff" id=play_a7406331 shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_a7406331 [label="2 " color="#b21aaf" fontcolor="#b21aaf" id=edge_adc1bab1 labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_2e9bf9d6 [label="[role] Provision the libvirt services on the hypervisor" color="#b21aaf" id=role_2e9bf9d6 tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_e6769096 [label="[role] Prepare each hypervisor in the deployment" color="#b21aaf" id=role_e6769096 tooltip="Prepare each hypervisor in the deployment"]
		role_e6769096 -> role_2e9bf9d6 [label="1 " color="#b21aaf" fontcolor="#b21aaf" id=edge_8491c4f5 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_a7406331 -> block_741bad60 [label=1 color="#b21aaf" fontcolor="#b21aaf" id=edge_be2dce95 labeltooltip=1 tooltip=1]
		subgraph cluster_block_741bad60 {
			block_741bad60 [label="[block] Prepare individual hypervisors" color="#b21aaf" id=block_741bad60 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_741bad60 -> role_e6769096 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#b21aaf" fontcolor="#b21aaf" id=edge_7bad17fe labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_c870873f [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#5d1daf" fontcolor="#ffffff" id=play_c870873f shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_c870873f [label="3 " color="#5d1daf" fontcolor="#5d1daf" id=edge_81157aee labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_c09681f0 [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_c09681f0 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_0522ad50 [label="[role] task-prepare-environment" color="#5d1daf" id=role_0522ad50 tooltip="task-prepare-environment"]
		role_0522ad50 -> role_c09681f0 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_476902eb labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_9100de2f [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_9100de2f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_8c800159 [label="[role] Prepare environment if not prepared" color="#5d1daf" id=role_8c800159 tooltip="Prepare environment if not prepared"]
		role_8c800159 -> role_9100de2f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_cf3c3d75 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_b7241749 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#5d1daf" id=role_b7241749 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_142c7764 [label="[role] task-cleanup-hypervisors" color="#5d1daf" id=role_142c7764 tooltip="task-cleanup-hypervisors"]
		role_142c7764 -> role_8c800159 [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_7913e27f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_142c7764 -> role_b7241749 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_3fa35ebe labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_27cdf235 [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_27cdf235 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_e623436d [label="[role] Prepare environment if not prepared" color="#5d1daf" id=role_e623436d tooltip="Prepare environment if not prepared"]
		role_e623436d -> role_27cdf235 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_ffff2bed labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_8983b9ee [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#5d1daf" id=role_8983b9ee tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_7acccfe5 [label="[role] Cleanup hypervisors if needed" color="#5d1daf" id=role_7acccfe5 tooltip="Cleanup hypervisors if needed"]
		role_7acccfe5 -> role_e623436d [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_87a51ca3 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_7acccfe5 -> role_8983b9ee [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_d480e9dc labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_8a39894e [label="[role] task-run-validations" color="#5d1daf" id=role_8a39894e tooltip="task-run-validations"]
		role_8a39894e -> role_7acccfe5 [label="1 [when: not hypervisors_cleaned]" color="#5d1daf" fontcolor="#5d1daf" id=edge_3febc58a labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_80fcad7d [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_80fcad7d tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_88ce7cdc [label="[role] Prepare environment if not prepared" color="#5d1daf" id=role_88ce7cdc tooltip="Prepare environment if not prepared"]
		role_88ce7cdc -> role_80fcad7d [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_65958b1a labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_264b39a8 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#5d1daf" id=role_264b39a8 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_14f0af6a [label="[role] Cleanup hypervisors if needed" color="#5d1daf" id=role_14f0af6a tooltip="Cleanup hypervisors if needed"]
		role_14f0af6a -> role_88ce7cdc [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_412db5c7 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_14f0af6a -> role_264b39a8 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_53d9e08d labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_34264e5d [label="[role] task-create-network" color="#5d1daf" id=role_34264e5d tooltip="task-create-network"]
		role_34264e5d -> role_14f0af6a [label="1 [when: not hypervisors_cleaned]" color="#5d1daf" fontcolor="#5d1daf" id=edge_1ef619b4 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_b49870bd [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_b49870bd tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_ae228c99 [label="[role] Prepare environment if not prepared" color="#5d1daf" id=role_ae228c99 tooltip="Prepare environment if not prepared"]
		role_ae228c99 -> role_b49870bd [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_88aa3db3 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_799834fb [label="[role] Prepare podman" color="#5d1daf" id=role_799834fb tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_25e1e1f5 [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_25e1e1f5 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_6a4a43a4 [label="[role] Configure Bind" color="#5d1daf" id=role_6a4a43a4 tooltip="Configure Bind"]
		role_6a4a43a4 -> role_25e1e1f5 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_28aa2761 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_849ccc86 [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_849ccc86 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_8db969d1 [label="[role] Configure Dnsmasq" color="#5d1daf" id=role_8db969d1 tooltip="Configure Dnsmasq"]
		role_8db969d1 -> role_849ccc86 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_147aeb14 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_be1128ed [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_be1128ed tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_3952cba4 [label="[role] Configure HAProxy" color="#5d1daf" id=role_3952cba4 tooltip="Configure HAProxy"]
		role_3952cba4 -> role_be1128ed [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_9edec018 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_f9cc11b2 [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_f9cc11b2 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_b1a706f1 [label="[role] Configure Nexus" color="#5d1daf" id=role_b1a706f1 tooltip="Configure Nexus"]
		role_b1a706f1 -> role_f9cc11b2 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_7d85c18c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_e01e15c5 [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_e01e15c5 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_c409ef5a [label="[role] Configure Apache" color="#5d1daf" id=role_c409ef5a tooltip="Configure Apache"]
		role_c409ef5a -> role_e01e15c5 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_c2cac360 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_f0c04838 [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_f0c04838 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_f9cb785f [label="[role] Configure a local container image registry" color="#5d1daf" id=role_f9cb785f tooltip="Configure a local container image registry"]
		role_f9cb785f -> role_f0c04838 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_d9438062 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_1fd34187 [label="[role] task-create-services" color="#5d1daf" id=role_1fd34187 tooltip="task-create-services"]
		role_1fd34187 -> role_ae228c99 [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_b0ff4d23 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_1fd34187 -> role_799834fb [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_b4013350 labeltooltip="2 " tooltip="2 "]
		role_1fd34187 -> role_6a4a43a4 [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_42bfb8ec labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_1fd34187 -> role_8db969d1 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_7113f553 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_1fd34187 -> role_3952cba4 [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_6123a52b labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_1fd34187 -> role_b1a706f1 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_e21df4d8 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_1fd34187 -> role_c409ef5a [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_66e930d2 labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_1fd34187 -> role_f9cb785f [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_47242a09 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e4aa9b37 [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_e4aa9b37 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_c57199f3 [label="[role] Prepare environment if needed" color="#5d1daf" id=role_c57199f3 tooltip="Prepare environment if needed"]
		role_c57199f3 -> role_e4aa9b37 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_caf9d28e labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_c7be64fd [label="[role] Gather network and host facts for guest" color="#5d1daf" id=role_c7be64fd tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_740cf0a1 [label="[role] Prepare services if needed" color="#5d1daf" id=role_740cf0a1 tooltip="Prepare services if needed"]
		role_740cf0a1 -> role_c57199f3 [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_cf5e8a16 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_740cf0a1 -> role_c7be64fd [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_5a4aee7c labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_3d36454b [label="[role] Create systemd service for podman container" color="#5d1daf" id=role_3d36454b tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_ad089ec0 [label="[role] Gather network and host facts for provision service" color="#5d1daf" id=role_ad089ec0 tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_51282fdb [label="[role] Setup the cluster provision container" color="#5d1daf" id=role_51282fdb tooltip="Setup the cluster provision container"]
		role_51282fdb -> role_3d36454b [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_840b7204 labeltooltip="1 " tooltip="1 "]
		role_51282fdb -> role_ad089ec0 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_988a9023 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_54322123 [label="[role] Delegate to the distro role to prepare the cluster" color="#5d1daf" id=role_54322123 tooltip="Delegate to the distro role to prepare the cluster"]
		role_54322123 -> role_51282fdb [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_551dd446 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_7913ba99 [label="[role] task-prepare-cluster" color="#5d1daf" id=role_7913ba99 tooltip="task-prepare-cluster"]
		role_7913ba99 -> role_740cf0a1 [label="1 [when: not services_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_876be36f labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_7913ba99 -> role_54322123 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_a034479a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_0c85a52b [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_0c85a52b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_5412d387 [label="[role] Prepare environment if not prepared" color="#5d1daf" id=role_5412d387 tooltip="Prepare environment if not prepared"]
		role_5412d387 -> role_0c85a52b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_c6496aea labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_c43e7b69 [label="[role] task-download-images" color="#5d1daf" id=role_c43e7b69 tooltip="task-download-images"]
		role_c43e7b69 -> role_5412d387 [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_43159f4f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_53ada2d1 [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_53ada2d1 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_64d0fc61 [label="[role] Prepare environment if needed" color="#5d1daf" id=role_64d0fc61 tooltip="Prepare environment if needed"]
		role_64d0fc61 -> role_53ada2d1 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_f8361193 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_896cff4f [label="[role] Gather network and host facts for guest" color="#5d1daf" id=role_896cff4f tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_960c78ec [label="[role] Prepare services if needed" color="#5d1daf" id=role_960c78ec tooltip="Prepare services if needed"]
		role_960c78ec -> role_64d0fc61 [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_acdc90a6 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_960c78ec -> role_896cff4f [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_160b498a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster bootstrap node" {
		role_5874cf75 [label="[role] Deploy the cluster bootstrap node" color="#5d1daf" id=role_5874cf75 tooltip="Deploy the cluster bootstrap node"]
	}
	subgraph "Deploy the cluster controller nodes" {
		role_393e01e1 [label="[role] Deploy the cluster controller nodes" color="#5d1daf" id=role_393e01e1 tooltip="Deploy the cluster controller nodes"]
	}
	subgraph "Deploy the cluster compute nodes" {
		role_f36ea172 [label="[role] Deploy the cluster compute nodes" color="#5d1daf" id=role_f36ea172 tooltip="Deploy the cluster compute nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_72e45beb [label="[role] Delegate to the distro role to deploy the cluster" color="#5d1daf" id=role_72e45beb tooltip="Delegate to the distro role to deploy the cluster"]
		role_72e45beb -> role_5874cf75 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_d9e0d8ad labeltooltip="1 " tooltip="1 "]
		role_72e45beb -> role_393e01e1 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_4c91cedb labeltooltip="2 " tooltip="2 "]
		task_03d2bb00 [label="kubeinit.kubeinit.kubeinit_okd : Verify that controller nodes are ok" color="#5d1daf" id=task_03d2bb00 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Verify that controller nodes are ok"]
		role_72e45beb -> task_03d2bb00 [label="3 " color="#5d1daf" fontcolor="#5d1daf" id=edge_10b69ec2 labeltooltip="3 " tooltip="3 "]
		task_009a3c8c [label="kubeinit.kubeinit.kubeinit_okd : Use single node cluster" color="#5d1daf" id=task_009a3c8c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Use single node cluster"]
		role_72e45beb -> task_009a3c8c [label="4 [when: kubeinit_controller_count|int == 1]" color="#5d1daf" fontcolor="#5d1daf" id=edge_d2e143b9 labeltooltip="4 [when: kubeinit_controller_count|int == 1]" tooltip="4 [when: kubeinit_controller_count|int == 1]"]
		task_c3b9df8c [label="kubeinit.kubeinit.kubeinit_okd : Wait for bootstrap to complete" color="#5d1daf" id=task_c3b9df8c shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Wait for bootstrap to complete"]
		role_72e45beb -> task_c3b9df8c [label="5 " color="#5d1daf" fontcolor="#5d1daf" id=edge_ca435ef3 labeltooltip="5 " tooltip="5 "]
		task_325ff902 [label="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node from haproxy config" color="#5d1daf" id=task_325ff902 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node from haproxy config"]
		role_72e45beb -> task_325ff902 [label="6 " color="#5d1daf" fontcolor="#5d1daf" id=edge_3454f124 labeltooltip="6 " tooltip="6 "]
		task_19b495a2 [label="kubeinit.kubeinit.kubeinit_okd : Restart haproxy container" color="#5d1daf" id=task_19b495a2 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Restart haproxy container"]
		role_72e45beb -> task_19b495a2 [label="7 " color="#5d1daf" fontcolor="#5d1daf" id=edge_559f1964 labeltooltip="7 " tooltip="7 "]
		task_705cd01f [label="kubeinit.kubeinit.kubeinit_okd : Destroy bootstrap node VM" color="#5d1daf" id=task_705cd01f shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Destroy bootstrap node VM"]
		role_72e45beb -> task_705cd01f [label="8 " color="#5d1daf" fontcolor="#5d1daf" id=edge_9662466e labeltooltip="8 " tooltip="8 "]
		task_6a959375 [label="kubeinit.kubeinit.kubeinit_okd : Undefine bootstrap node VM" color="#5d1daf" id=task_6a959375 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Undefine bootstrap node VM"]
		role_72e45beb -> task_6a959375 [label="9 " color="#5d1daf" fontcolor="#5d1daf" id=edge_863235b9 labeltooltip="9 " tooltip="9 "]
		task_fe7cd1d9 [label="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node VM storage" color="#5d1daf" id=task_fe7cd1d9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node VM storage"]
		role_72e45beb -> task_fe7cd1d9 [label="10 " color="#5d1daf" fontcolor="#5d1daf" id=edge_7147ade1 labeltooltip="10 " tooltip="10 "]
		role_72e45beb -> role_f36ea172 [label="11 " color="#5d1daf" fontcolor="#5d1daf" id=edge_367da816 labeltooltip="11 " tooltip="11 "]
		task_c8b581a8 [label="kubeinit.kubeinit.kubeinit_okd : wait until all nodes are ready" color="#5d1daf" id=task_c8b581a8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : wait until all nodes are ready"]
		role_72e45beb -> task_c8b581a8 [label="12 " color="#5d1daf" fontcolor="#5d1daf" id=edge_3e62b0ab labeltooltip="12 " tooltip="12 "]
		task_b39261d0 [label="kubeinit.kubeinit.kubeinit_okd : Copy the kubeconfig" color="#5d1daf" id=task_b39261d0 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Copy the kubeconfig"]
		role_72e45beb -> task_b39261d0 [label="13 " color="#5d1daf" fontcolor="#5d1daf" id=edge_fd437d34 labeltooltip="13 " tooltip="13 "]
		task_a290eaf3 [label="kubeinit.kubeinit.kubeinit_okd : Get some final cluster information" color="#5d1daf" id=task_a290eaf3 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Get some final cluster information"]
		role_72e45beb -> task_a290eaf3 [label="14 " color="#5d1daf" fontcolor="#5d1daf" id=edge_d5a14e3b labeltooltip="14 " tooltip="14 "]
		task_03137652 [label="kubeinit.kubeinit.kubeinit_okd : Display final debug info" color="#5d1daf" id=task_03137652 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Display final debug info"]
		role_72e45beb -> task_03137652 [label="15 " color="#5d1daf" fontcolor="#5d1daf" id=edge_85651b02 labeltooltip="15 " tooltip="15 "]
		task_3b7993f9 [label="kubeinit.kubeinit.kubeinit_okd : Print some final data" color="#5d1daf" id=task_3b7993f9 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Print some final data"]
		role_72e45beb -> task_3b7993f9 [label="16 " color="#5d1daf" fontcolor="#5d1daf" id=edge_48da2b5d labeltooltip="16 " tooltip="16 "]
	}
	subgraph "task-deploy-cluster" {
		role_f6b6dc8d [label="[role] task-deploy-cluster" color="#5d1daf" id=role_f6b6dc8d tooltip="task-deploy-cluster"]
		role_f6b6dc8d -> role_960c78ec [label="1 [when: not services_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_9aa7d460 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_f6b6dc8d -> role_72e45beb [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_af4417fb labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_0326cc85 [label="[role] Read podman secrets if running from the container" color="#5d1daf" id=role_0326cc85 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_69a9b3fd [label="[role] Prepare environment if needed" color="#5d1daf" id=role_69a9b3fd tooltip="Prepare environment if needed"]
		role_69a9b3fd -> role_0326cc85 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#5d1daf" fontcolor="#5d1daf" id=edge_3fd5df2d labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_f65d5cf8 [label="[role] Gather network and host facts for guest" color="#5d1daf" id=role_f65d5cf8 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_20dd9bd7 [label="[role] Prepare services if needed" color="#5d1daf" id=role_20dd9bd7 tooltip="Prepare services if needed"]
		role_20dd9bd7 -> role_69a9b3fd [label="1 [when: not environment_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_fd7f8d85 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_20dd9bd7 -> role_f65d5cf8 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_aad0bf91 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_a946bef3 [label="[role] Configure NFS" color="#5d1daf" id=role_a946bef3 tooltip="Configure NFS"]
	}
	subgraph "Deploy the apps" {
		role_eafedd18 [label="[role] Deploy the apps" color="#5d1daf" id=role_eafedd18 tooltip="Deploy the apps"]
	}
	subgraph "Deploy KubeVirt" {
		role_1d9e366c [label="[role] Deploy KubeVirt" color="#5d1daf" id=role_1d9e366c tooltip="Deploy KubeVirt"]
	}
	subgraph "Deploy Submariner" {
		role_34007c8c [label="[role] Deploy Submariner" color="#5d1daf" id=role_34007c8c tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_e2accc94 [label="[role] Delegate to distro role to run post-deployment tasks" color="#5d1daf" id=role_e2accc94 tooltip="Delegate to distro role to run post-deployment tasks"]
		role_e2accc94 -> role_a946bef3 [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#5d1daf" fontcolor="#5d1daf" id=edge_bccc6ea5 labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_e2accc94 -> role_eafedd18 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_a8a52431 labeltooltip="2 " tooltip="2 "]
		role_e2accc94 -> role_1d9e366c [label="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" color="#5d1daf" fontcolor="#5d1daf" id=edge_586fbc14 labeltooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" tooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]"]
		role_e2accc94 -> role_34007c8c [label="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" color="#5d1daf" fontcolor="#5d1daf" id=edge_27a755b0 labeltooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" tooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_76b1710a [label="[role] task-post-deployment" color="#5d1daf" id=role_76b1710a tooltip="task-post-deployment"]
		role_76b1710a -> role_20dd9bd7 [label="1 [when: not services_prepared]" color="#5d1daf" fontcolor="#5d1daf" id=edge_2b45c506 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_76b1710a -> role_e2accc94 [label="2 " color="#5d1daf" fontcolor="#5d1daf" id=edge_ea3fced4 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_c870873f -> block_7170354a [label=1 color="#5d1daf" fontcolor="#5d1daf" id=edge_a0eba9c6 labeltooltip=1 tooltip=1]
		subgraph cluster_block_7170354a {
			block_7170354a [label="[block] Prepare the environment" color="#5d1daf" id=block_7170354a labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_7170354a -> role_0522ad50 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_55c398c3 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_2379af29 [label=2 color="#5d1daf" fontcolor="#5d1daf" id=edge_d27bc2cd labeltooltip=2 tooltip=2]
		subgraph cluster_block_2379af29 {
			block_2379af29 [label="[block] Cleanup hypervisors" color="#5d1daf" id=block_2379af29 labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_2379af29 -> role_142c7764 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_40511f04 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_adee108b [label=3 color="#5d1daf" fontcolor="#5d1daf" id=edge_b8d9f7d8 labeltooltip=3 tooltip=3]
		subgraph cluster_block_adee108b {
			block_adee108b [label="[block] Run validations on cluster resources" color="#5d1daf" id=block_adee108b labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_adee108b -> role_8a39894e [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_cd38bd41 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_ef2cbbfe [label=4 color="#5d1daf" fontcolor="#5d1daf" id=edge_76ba1304 labeltooltip=4 tooltip=4]
		subgraph cluster_block_ef2cbbfe {
			block_ef2cbbfe [label="[block] Create the cluster network resources" color="#5d1daf" id=block_ef2cbbfe labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_ef2cbbfe -> role_34264e5d [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_fd7d437c labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_945e0671 [label=5 color="#5d1daf" fontcolor="#5d1daf" id=edge_16db1c4c labeltooltip=5 tooltip=5]
		subgraph cluster_block_945e0671 {
			block_945e0671 [label="[block] Create services the cluster will need" color="#5d1daf" id=block_945e0671 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_945e0671 -> role_1fd34187 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_fdf4c1bb labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_63592c20 [label=6 color="#5d1daf" fontcolor="#5d1daf" id=edge_a92e651c labeltooltip=6 tooltip=6]
		subgraph cluster_block_63592c20 {
			block_63592c20 [label="[block] Prepare to deploy the cluster" color="#5d1daf" id=block_63592c20 labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_63592c20 -> role_7913ba99 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_319e9401 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_01434498 [label=7 color="#5d1daf" fontcolor="#5d1daf" id=edge_363ceb07 labeltooltip=7 tooltip=7]
		subgraph cluster_block_01434498 {
			block_01434498 [label="[block] Download cloud images" color="#5d1daf" id=block_01434498 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_01434498 -> role_c43e7b69 [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_9cee06a5 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_88e716f9 [label=8 color="#5d1daf" fontcolor="#5d1daf" id=edge_fa014d77 labeltooltip=8 tooltip=8]
		subgraph cluster_block_88e716f9 {
			block_88e716f9 [label="[block] Deploy the cluster" color="#5d1daf" id=block_88e716f9 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_88e716f9 -> role_f6b6dc8d [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_7355ce49 labeltooltip="1 " tooltip="1 "]
		}
		play_c870873f -> block_301fdf63 [label=9 color="#5d1daf" fontcolor="#5d1daf" id=edge_36534773 labeltooltip=9 tooltip=9]
		subgraph cluster_block_301fdf63 {
			block_301fdf63 [label="[block] Run any post-deployment tasks" color="#5d1daf" id=block_301fdf63 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_301fdf63 -> role_76b1710a [label="1 " color="#5d1daf" fontcolor="#5d1daf" id=edge_c1750b66 labeltooltip="1 " tooltip="1 "]
		}
	}
}
