digraph {
	graph [concentrate=true ordering=in rankdir=LR ratio=fill]
	edge [esep=5 sep=10]
	"kubeinit/playbook.yml" [id=root_node style=dotted]
	play_5c8b39b3 [label="Play: Initial setup (1)" color="#0899c3" fontcolor="#ffffff" id=play_5c8b39b3 shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_5c8b39b3 [label="1 " color="#0899c3" fontcolor="#0899c3" id=edge_3cf2b2e4 labeltooltip="1 " tooltip="1 "]
	subgraph "Read podman secrets if running from the container" {
		role_56e243b1 [label="[role] Read podman secrets if running from the container" color="#0899c3" id=role_56e243b1 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-gather-facts" {
		role_77c908e4 [label="[role] task-gather-facts" color="#0899c3" id=role_77c908e4 tooltip="task-gather-facts"]
		role_77c908e4 -> role_56e243b1 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#0899c3" fontcolor="#0899c3" id=edge_cc170bc8 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_e848a65b [label="[role] Read podman secrets if running from the container" color="#0899c3" id=role_e848a65b tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-hypervisors" {
		role_7d803bbf [label="[role] task-prepare-hypervisors" color="#0899c3" id=role_7d803bbf tooltip="task-prepare-hypervisors"]
		role_7d803bbf -> role_e848a65b [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#0899c3" fontcolor="#0899c3" id=edge_942353c7 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Play: Initial setup (1)" {
		play_5c8b39b3 -> block_45b90d3b [label=1 color="#0899c3" fontcolor="#0899c3" id=edge_5575650a labeltooltip=1 tooltip=1]
		subgraph cluster_block_45b90d3b {
			block_45b90d3b [label="[block] Gather facts about the deployment environment" color="#0899c3" id=block_45b90d3b labeltooltip="Gather facts about the deployment environment" shape=box tooltip="Gather facts about the deployment environment"]
			block_45b90d3b -> role_77c908e4 [label="1 " color="#0899c3" fontcolor="#0899c3" id=edge_36234e87 labeltooltip="1 " tooltip="1 "]
		}
		play_5c8b39b3 -> block_cf8c08b4 [label=2 color="#0899c3" fontcolor="#0899c3" id=edge_239248d1 labeltooltip=2 tooltip=2]
		subgraph cluster_block_cf8c08b4 {
			block_cf8c08b4 [label="[block] Prepare the hypervisors" color="#0899c3" id=block_cf8c08b4 labeltooltip="Prepare the hypervisors" shape=box tooltip="Prepare the hypervisors"]
			block_cf8c08b4 -> role_7d803bbf [label="1 " color="#0899c3" fontcolor="#0899c3" id=edge_ebdf710e labeltooltip="1 " tooltip="1 "]
		}
	}
	play_27b8f38e [label="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" color="#16b651" fontcolor="#ffffff" id=play_27b8f38e shape=box style=filled tooltip="Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)"]
	"kubeinit/playbook.yml" -> play_27b8f38e [label="2 " color="#16b651" fontcolor="#16b651" id=edge_976c170d labeltooltip="2 " tooltip="2 "]
	subgraph "Provision the libvirt services on the hypervisor" {
		role_478a178c [label="[role] Provision the libvirt services on the hypervisor" color="#16b651" id=role_478a178c tooltip="Provision the libvirt services on the hypervisor"]
	}
	subgraph "Prepare each hypervisor in the deployment" {
		role_c5516521 [label="[role] Prepare each hypervisor in the deployment" color="#16b651" id=role_c5516521 tooltip="Prepare each hypervisor in the deployment"]
		role_c5516521 -> role_478a178c [label="1 " color="#16b651" fontcolor="#16b651" id=edge_352641c7 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Play: Prepare all hypervisor hosts to deploy service and cluster nodes (0)" {
		play_27b8f38e -> block_ace20be4 [label=1 color="#16b651" fontcolor="#16b651" id=edge_1e7a8203 labeltooltip=1 tooltip=1]
		subgraph cluster_block_ace20be4 {
			block_ace20be4 [label="[block] Prepare individual hypervisors" color="#16b651" id=block_ace20be4 labeltooltip="Prepare individual hypervisors" shape=box tooltip="Prepare individual hypervisors"]
			block_ace20be4 -> role_c5516521 [label="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" color="#16b651" fontcolor="#16b651" id=edge_17c6a5fe labeltooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]" tooltip="1 [when: inventory_hostname in hostvars['kubeinit-cluster-facts'].hypervisors]"]
		}
	}
	play_cc1cceab [label="Play: Run cluster deployment on prepared hypervisors (1)" color="#76408c" fontcolor="#ffffff" id=play_cc1cceab shape=box style=filled tooltip=localhost]
	"kubeinit/playbook.yml" -> play_cc1cceab [label="3 " color="#76408c" fontcolor="#76408c" id=edge_486e7a94 labeltooltip="3 " tooltip="3 "]
	subgraph "Read podman secrets if running from the container" {
		role_3e9e37f0 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_3e9e37f0 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "task-prepare-environment" {
		role_5947cb0c [label="[role] task-prepare-environment" color="#76408c" id=role_5947cb0c tooltip="task-prepare-environment"]
		role_5947cb0c -> role_3e9e37f0 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_ea14557b labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_1e8b2df4 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_1e8b2df4 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_1b00283d [label="[role] Prepare environment if not prepared" color="#76408c" id=role_1b00283d tooltip="Prepare environment if not prepared"]
		role_1b00283d -> role_1e8b2df4 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_5eaaa2e0 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_b22c5843 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#76408c" id=role_b22c5843 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "task-cleanup-hypervisors" {
		role_f761898d [label="[role] task-cleanup-hypervisors" color="#76408c" id=role_f761898d tooltip="task-cleanup-hypervisors"]
		role_f761898d -> role_1b00283d [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_bd1f5664 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_f761898d -> role_b22c5843 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_335a00fa labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_64d0111f [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_64d0111f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_07f49090 [label="[role] Prepare environment if not prepared" color="#76408c" id=role_07f49090 tooltip="Prepare environment if not prepared"]
		role_07f49090 -> role_64d0111f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_cc9abcf9 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_fa7df91b [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#76408c" id=role_fa7df91b tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_908fa3a5 [label="[role] Cleanup hypervisors if needed" color="#76408c" id=role_908fa3a5 tooltip="Cleanup hypervisors if needed"]
		role_908fa3a5 -> role_07f49090 [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_5aa4e76d labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_908fa3a5 -> role_fa7df91b [label="2 " color="#76408c" fontcolor="#76408c" id=edge_4ed39898 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-run-validations" {
		role_d70e5cc6 [label="[role] task-run-validations" color="#76408c" id=role_d70e5cc6 tooltip="task-run-validations"]
		role_d70e5cc6 -> role_908fa3a5 [label="1 [when: not hypervisors_cleaned]" color="#76408c" fontcolor="#76408c" id=edge_81d097ec labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_7f759aa7 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_7f759aa7 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_4472a25c [label="[role] Prepare environment if not prepared" color="#76408c" id=role_4472a25c tooltip="Prepare environment if not prepared"]
		role_4472a25c -> role_7f759aa7 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_69f39185 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" {
		role_30b2fc60 [label="[role] Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage" color="#76408c" id=role_30b2fc60 tooltip="Cleanup the OVN network and other libvirt resources -- hosts, networks, vms, storage"]
	}
	subgraph "Cleanup hypervisors if needed" {
		role_cf626d87 [label="[role] Cleanup hypervisors if needed" color="#76408c" id=role_cf626d87 tooltip="Cleanup hypervisors if needed"]
		role_cf626d87 -> role_4472a25c [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_ac335efc labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_cf626d87 -> role_30b2fc60 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_6ffcf123 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "task-create-network" {
		role_4bf5e5a7 [label="[role] task-create-network" color="#76408c" id=role_4bf5e5a7 tooltip="task-create-network"]
		role_4bf5e5a7 -> role_cf626d87 [label="1 [when: not hypervisors_cleaned]" color="#76408c" fontcolor="#76408c" id=edge_ef9ba8d8 labeltooltip="1 [when: not hypervisors_cleaned]" tooltip="1 [when: not hypervisors_cleaned]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_dd12ca3f [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_dd12ca3f tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_53341904 [label="[role] Prepare environment if not prepared" color="#76408c" id=role_53341904 tooltip="Prepare environment if not prepared"]
		role_53341904 -> role_dd12ca3f [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_3a1be000 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Prepare podman" {
		role_fd9b2231 [label="[role] Prepare podman" color="#76408c" id=role_fd9b2231 tooltip="Prepare podman"]
	}
	subgraph "Create systemd service for podman container" {
		role_ceea5f85 [label="[role] Create systemd service for podman container" color="#76408c" id=role_ceea5f85 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Bind" {
		role_045fecdd [label="[role] Configure Bind" color="#76408c" id=role_045fecdd tooltip="Configure Bind"]
		role_045fecdd -> role_ceea5f85 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_5590214a labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_70a8ae37 [label="[role] Create systemd service for podman container" color="#76408c" id=role_70a8ae37 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Dnsmasq" {
		role_00b91b61 [label="[role] Configure Dnsmasq" color="#76408c" id=role_00b91b61 tooltip="Configure Dnsmasq"]
		role_00b91b61 -> role_70a8ae37 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_c1c0582c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_3f99ca8f [label="[role] Create systemd service for podman container" color="#76408c" id=role_3f99ca8f tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure HAProxy" {
		role_0a2e642f [label="[role] Configure HAProxy" color="#76408c" id=role_0a2e642f tooltip="Configure HAProxy"]
		role_0a2e642f -> role_3f99ca8f [label="1 " color="#76408c" fontcolor="#76408c" id=edge_9a2b0be3 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_081c6477 [label="[role] Create systemd service for podman container" color="#76408c" id=role_081c6477 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Nexus" {
		role_38cb79f9 [label="[role] Configure Nexus" color="#76408c" id=role_38cb79f9 tooltip="Configure Nexus"]
		role_38cb79f9 -> role_081c6477 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_bf8b7bd1 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_f6731ca7 [label="[role] Create systemd service for podman container" color="#76408c" id=role_f6731ca7 tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure Apache" {
		role_d2f11036 [label="[role] Configure Apache" color="#76408c" id=role_d2f11036 tooltip="Configure Apache"]
		role_d2f11036 -> role_f6731ca7 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_2527691c labeltooltip="1 " tooltip="1 "]
	}
	subgraph "Create systemd service for podman container" {
		role_b7c48f0a [label="[role] Create systemd service for podman container" color="#76408c" id=role_b7c48f0a tooltip="Create systemd service for podman container"]
	}
	subgraph "Configure a local container image registry" {
		role_4ec1e5ce [label="[role] Configure a local container image registry" color="#76408c" id=role_4ec1e5ce tooltip="Configure a local container image registry"]
		role_4ec1e5ce -> role_b7c48f0a [label="1 " color="#76408c" fontcolor="#76408c" id=edge_25c0f155 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-create-services" {
		role_6d9b3871 [label="[role] task-create-services" color="#76408c" id=role_6d9b3871 tooltip="task-create-services"]
		role_6d9b3871 -> role_53341904 [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_97aa5d2f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_6d9b3871 -> role_fd9b2231 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_8b3851aa labeltooltip="2 " tooltip="2 "]
		role_6d9b3871 -> role_045fecdd [label="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_29aab0de labeltooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]" tooltip="3 [when: 'bind' in hostvars[kubeinit_deployment_node_name].services]"]
		role_6d9b3871 -> role_00b91b61 [label="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_a18be772 labeltooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]" tooltip="4 [when: 'dnsmasq' in hostvars[kubeinit_deployment_node_name].services]"]
		role_6d9b3871 -> role_0a2e642f [label="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_db0bae96 labeltooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]" tooltip="5 [when: 'haproxy' in hostvars[kubeinit_deployment_node_name].services]"]
		role_6d9b3871 -> role_38cb79f9 [label="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_a1433728 labeltooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]" tooltip="6 [when: 'nexus' in hostvars[kubeinit_deployment_node_name].services]"]
		role_6d9b3871 -> role_d2f11036 [label="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_74beb2cf labeltooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]" tooltip="7 [when: 'apache' in hostvars[kubeinit_deployment_node_name].services]"]
		role_6d9b3871 -> role_4ec1e5ce [label="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" color="#76408c" fontcolor="#76408c" id=edge_09e63507 labeltooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]" tooltip="8 [when: 'registry' in hostvars[kubeinit_deployment_node_name].services]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_d647ae66 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_d647ae66 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_d816f705 [label="[role] Prepare environment if needed" color="#76408c" id=role_d816f705 tooltip="Prepare environment if needed"]
		role_d816f705 -> role_d647ae66 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_ac96ef23 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_28f10ef3 [label="[role] Gather network and host facts for guest" color="#76408c" id=role_28f10ef3 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_a2cde900 [label="[role] Prepare services if needed" color="#76408c" id=role_a2cde900 tooltip="Prepare services if needed"]
		role_a2cde900 -> role_d816f705 [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_02a4807d labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_a2cde900 -> role_28f10ef3 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_9d326a5d labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Create systemd service for podman container" {
		role_7b07259c [label="[role] Create systemd service for podman container" color="#76408c" id=role_7b07259c tooltip="Create systemd service for podman container"]
	}
	subgraph "Gather network and host facts for provision service" {
		role_33ede92d [label="[role] Gather network and host facts for provision service" color="#76408c" id=role_33ede92d tooltip="Gather network and host facts for provision service"]
	}
	subgraph "Setup the cluster provision container" {
		role_f0b3d6ef [label="[role] Setup the cluster provision container" color="#76408c" id=role_f0b3d6ef tooltip="Setup the cluster provision container"]
		role_f0b3d6ef -> role_7b07259c [label="1 " color="#76408c" fontcolor="#76408c" id=edge_35909991 labeltooltip="1 " tooltip="1 "]
		role_f0b3d6ef -> role_33ede92d [label="2 " color="#76408c" fontcolor="#76408c" id=edge_e163a561 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Delegate to the distro role to prepare the cluster" {
		role_84459b71 [label="[role] Delegate to the distro role to prepare the cluster" color="#76408c" id=role_84459b71 tooltip="Delegate to the distro role to prepare the cluster"]
		role_84459b71 -> role_f0b3d6ef [label="1 " color="#76408c" fontcolor="#76408c" id=edge_081cfa04 labeltooltip="1 " tooltip="1 "]
	}
	subgraph "task-prepare-cluster" {
		role_57e79482 [label="[role] task-prepare-cluster" color="#76408c" id=role_57e79482 tooltip="task-prepare-cluster"]
		role_57e79482 -> role_a2cde900 [label="1 [when: not services_prepared]" color="#76408c" fontcolor="#76408c" id=edge_e75d1b7a labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_57e79482 -> role_84459b71 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_a235fe1d labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_080f7055 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_080f7055 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if not prepared" {
		role_a7f3d33d [label="[role] Prepare environment if not prepared" color="#76408c" id=role_a7f3d33d tooltip="Prepare environment if not prepared"]
		role_a7f3d33d -> role_080f7055 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_538ac226 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "task-download-images" {
		role_cc18c6f3 [label="[role] task-download-images" color="#76408c" id=role_cc18c6f3 tooltip="task-download-images"]
		role_cc18c6f3 -> role_a7f3d33d [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_bd00e2aa labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
	}
	subgraph "Read podman secrets if running from the container" {
		role_bb16b7cf [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_bb16b7cf tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_83fbd22f [label="[role] Prepare environment if needed" color="#76408c" id=role_83fbd22f tooltip="Prepare environment if needed"]
		role_83fbd22f -> role_bb16b7cf [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_966dcc37 labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_12dc7004 [label="[role] Gather network and host facts for guest" color="#76408c" id=role_12dc7004 tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_714403ba [label="[role] Prepare services if needed" color="#76408c" id=role_714403ba tooltip="Prepare services if needed"]
		role_714403ba -> role_83fbd22f [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_ceb47864 labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_714403ba -> role_12dc7004 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_882fa38a labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Deploy the cluster bootstrap node" {
		role_f75fa2b1 [label="[role] Deploy the cluster bootstrap node" color="#76408c" id=role_f75fa2b1 tooltip="Deploy the cluster bootstrap node"]
	}
	subgraph "Deploy the cluster controller nodes" {
		role_17495219 [label="[role] Deploy the cluster controller nodes" color="#76408c" id=role_17495219 tooltip="Deploy the cluster controller nodes"]
	}
	subgraph "Deploy the cluster compute nodes" {
		role_2a3c63fe [label="[role] Deploy the cluster compute nodes" color="#76408c" id=role_2a3c63fe tooltip="Deploy the cluster compute nodes"]
	}
	subgraph "Delegate to the distro role to deploy the cluster" {
		role_34488365 [label="[role] Delegate to the distro role to deploy the cluster" color="#76408c" id=role_34488365 tooltip="Delegate to the distro role to deploy the cluster"]
		role_34488365 -> role_f75fa2b1 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_a5c63eb8 labeltooltip="1 " tooltip="1 "]
		role_34488365 -> role_17495219 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_f761c056 labeltooltip="2 " tooltip="2 "]
		task_185461ae [label="kubeinit.kubeinit.kubeinit_okd : Verify that controller nodes are ok" color="#76408c" id=task_185461ae shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Verify that controller nodes are ok"]
		role_34488365 -> task_185461ae [label="3 " color="#76408c" fontcolor="#76408c" id=edge_56ced351 labeltooltip="3 " tooltip="3 "]
		task_82f857aa [label="kubeinit.kubeinit.kubeinit_okd : Use single node cluster" color="#76408c" id=task_82f857aa shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Use single node cluster"]
		role_34488365 -> task_82f857aa [label="4 [when: kubeinit_controller_count|int == 1]" color="#76408c" fontcolor="#76408c" id=edge_163cf9b8 labeltooltip="4 [when: kubeinit_controller_count|int == 1]" tooltip="4 [when: kubeinit_controller_count|int == 1]"]
		task_46ba4ae8 [label="kubeinit.kubeinit.kubeinit_okd : Wait for bootstrap to complete" color="#76408c" id=task_46ba4ae8 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Wait for bootstrap to complete"]
		role_34488365 -> task_46ba4ae8 [label="5 " color="#76408c" fontcolor="#76408c" id=edge_8b79edcb labeltooltip="5 " tooltip="5 "]
		task_20405387 [label="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node from haproxy config" color="#76408c" id=task_20405387 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node from haproxy config"]
		role_34488365 -> task_20405387 [label="6 " color="#76408c" fontcolor="#76408c" id=edge_b72e8a09 labeltooltip="6 " tooltip="6 "]
		task_5ad40298 [label="kubeinit.kubeinit.kubeinit_okd : Restart haproxy container" color="#76408c" id=task_5ad40298 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Restart haproxy container"]
		role_34488365 -> task_5ad40298 [label="7 " color="#76408c" fontcolor="#76408c" id=edge_743d08a0 labeltooltip="7 " tooltip="7 "]
		task_6c239d8a [label="kubeinit.kubeinit.kubeinit_okd : Destroy bootstrap node VM" color="#76408c" id=task_6c239d8a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Destroy bootstrap node VM"]
		role_34488365 -> task_6c239d8a [label="8 " color="#76408c" fontcolor="#76408c" id=edge_75e9d9f6 labeltooltip="8 " tooltip="8 "]
		task_7eeaef6a [label="kubeinit.kubeinit.kubeinit_okd : Undefine bootstrap node VM" color="#76408c" id=task_7eeaef6a shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Undefine bootstrap node VM"]
		role_34488365 -> task_7eeaef6a [label="9 " color="#76408c" fontcolor="#76408c" id=edge_08118c15 labeltooltip="9 " tooltip="9 "]
		task_b6344be6 [label="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node VM storage" color="#76408c" id=task_b6344be6 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Remove bootstrap node VM storage"]
		role_34488365 -> task_b6344be6 [label="10 " color="#76408c" fontcolor="#76408c" id=edge_952ce501 labeltooltip="10 " tooltip="10 "]
		role_34488365 -> role_2a3c63fe [label="11 " color="#76408c" fontcolor="#76408c" id=edge_a3235985 labeltooltip="11 " tooltip="11 "]
		task_231e327d [label="kubeinit.kubeinit.kubeinit_okd : wait until all nodes are ready" color="#76408c" id=task_231e327d shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : wait until all nodes are ready"]
		role_34488365 -> task_231e327d [label="12 " color="#76408c" fontcolor="#76408c" id=edge_6fb9c6fc labeltooltip="12 " tooltip="12 "]
		task_7ec59220 [label="kubeinit.kubeinit.kubeinit_okd : Copy the kubeconfig" color="#76408c" id=task_7ec59220 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Copy the kubeconfig"]
		role_34488365 -> task_7ec59220 [label="13 " color="#76408c" fontcolor="#76408c" id=edge_31bcae7a labeltooltip="13 " tooltip="13 "]
		task_ada0dee7 [label="kubeinit.kubeinit.kubeinit_okd : Get some final cluster information" color="#76408c" id=task_ada0dee7 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Get some final cluster information"]
		role_34488365 -> task_ada0dee7 [label="14 " color="#76408c" fontcolor="#76408c" id=edge_83539f68 labeltooltip="14 " tooltip="14 "]
		task_cdd9d8bb [label="kubeinit.kubeinit.kubeinit_okd : Display final debug info" color="#76408c" id=task_cdd9d8bb shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Display final debug info"]
		role_34488365 -> task_cdd9d8bb [label="15 " color="#76408c" fontcolor="#76408c" id=edge_e114a795 labeltooltip="15 " tooltip="15 "]
		task_b4293ba5 [label="kubeinit.kubeinit.kubeinit_okd : Print some final data" color="#76408c" id=task_b4293ba5 shape=octagon tooltip="kubeinit.kubeinit.kubeinit_okd : Print some final data"]
		role_34488365 -> task_b4293ba5 [label="16 " color="#76408c" fontcolor="#76408c" id=edge_dce27444 labeltooltip="16 " tooltip="16 "]
	}
	subgraph "task-deploy-cluster" {
		role_eb007334 [label="[role] task-deploy-cluster" color="#76408c" id=role_eb007334 tooltip="task-deploy-cluster"]
		role_eb007334 -> role_714403ba [label="1 [when: not services_prepared]" color="#76408c" fontcolor="#76408c" id=edge_ad451b36 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_eb007334 -> role_34488365 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_d5e5b950 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Read podman secrets if running from the container" {
		role_067c3ba6 [label="[role] Read podman secrets if running from the container" color="#76408c" id=role_067c3ba6 tooltip="Read podman secrets if running from the container"]
	}
	subgraph "Prepare environment if needed" {
		role_885040cb [label="[role] Prepare environment if needed" color="#76408c" id=role_885040cb tooltip="Prepare environment if needed"]
		role_885040cb -> role_067c3ba6 [label="1 [when: hostvars[kubeinit_facts_name].container_run]" color="#76408c" fontcolor="#76408c" id=edge_152121eb labeltooltip="1 [when: hostvars[kubeinit_facts_name].container_run]" tooltip="1 [when: hostvars[kubeinit_facts_name].container_run]"]
	}
	subgraph "Gather network and host facts for guest" {
		role_6d0143aa [label="[role] Gather network and host facts for guest" color="#76408c" id=role_6d0143aa tooltip="Gather network and host facts for guest"]
	}
	subgraph "Prepare services if needed" {
		role_1210e4bf [label="[role] Prepare services if needed" color="#76408c" id=role_1210e4bf tooltip="Prepare services if needed"]
		role_1210e4bf -> role_885040cb [label="1 [when: not environment_prepared]" color="#76408c" fontcolor="#76408c" id=edge_04485b8f labeltooltip="1 [when: not environment_prepared]" tooltip="1 [when: not environment_prepared]"]
		role_1210e4bf -> role_6d0143aa [label="2 " color="#76408c" fontcolor="#76408c" id=edge_cded17e8 labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Configure NFS" {
		role_a6796346 [label="[role] Configure NFS" color="#76408c" id=role_a6796346 tooltip="Configure NFS"]
	}
	subgraph "Deploy the apps" {
		role_9e62a725 [label="[role] Deploy the apps" color="#76408c" id=role_9e62a725 tooltip="Deploy the apps"]
	}
	subgraph "Deploy KubeVirt" {
		role_354ad3f2 [label="[role] Deploy KubeVirt" color="#76408c" id=role_354ad3f2 tooltip="Deploy KubeVirt"]
	}
	subgraph "Deploy Submariner" {
		role_df5b1ed2 [label="[role] Deploy Submariner" color="#76408c" id=role_df5b1ed2 tooltip="Deploy Submariner"]
	}
	subgraph "Delegate to distro role to run post-deployment tasks" {
		role_de132b5c [label="[role] Delegate to distro role to run post-deployment tasks" color="#76408c" id=role_de132b5c tooltip="Delegate to distro role to run post-deployment tasks"]
		role_de132b5c -> role_a6796346 [label="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" color="#76408c" fontcolor="#76408c" id=edge_b92b1c3a labeltooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]" tooltip="1 [when: 'nfs' in kubeinit_cluster_hostvars.services]"]
		role_de132b5c -> role_9e62a725 [label="2 " color="#76408c" fontcolor="#76408c" id=edge_69edff07 labeltooltip="2 " tooltip="2 "]
		role_de132b5c -> role_354ad3f2 [label="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" color="#76408c" fontcolor="#76408c" id=edge_ff9a6ed8 labeltooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]" tooltip="3 [when: not kubeinit_okd_openshift_deploy | default(False)]"]
		role_de132b5c -> role_df5b1ed2 [label="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" color="#76408c" fontcolor="#76408c" id=edge_9a091877 labeltooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]" tooltip="4 [when: 'submariner' in kubeinit_fact_post_deployment_services | default(False)]"]
	}
	subgraph "task-post-deployment" {
		role_03eb31ad [label="[role] task-post-deployment" color="#76408c" id=role_03eb31ad tooltip="task-post-deployment"]
		role_03eb31ad -> role_1210e4bf [label="1 [when: not services_prepared]" color="#76408c" fontcolor="#76408c" id=edge_45d25652 labeltooltip="1 [when: not services_prepared]" tooltip="1 [when: not services_prepared]"]
		role_03eb31ad -> role_de132b5c [label="2 " color="#76408c" fontcolor="#76408c" id=edge_176f4ffc labeltooltip="2 " tooltip="2 "]
	}
	subgraph "Play: Run cluster deployment on prepared hypervisors (1)" {
		play_cc1cceab -> block_0a3ce7a4 [label=1 color="#76408c" fontcolor="#76408c" id=edge_76465c9b labeltooltip=1 tooltip=1]
		subgraph cluster_block_0a3ce7a4 {
			block_0a3ce7a4 [label="[block] Prepare the environment" color="#76408c" id=block_0a3ce7a4 labeltooltip="Prepare the environment" shape=box tooltip="Prepare the environment"]
			block_0a3ce7a4 -> role_5947cb0c [label="1 " color="#76408c" fontcolor="#76408c" id=edge_edd934be labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_8622334c [label=2 color="#76408c" fontcolor="#76408c" id=edge_249a5387 labeltooltip=2 tooltip=2]
		subgraph cluster_block_8622334c {
			block_8622334c [label="[block] Cleanup hypervisors" color="#76408c" id=block_8622334c labeltooltip="Cleanup hypervisors" shape=box tooltip="Cleanup hypervisors"]
			block_8622334c -> role_f761898d [label="1 " color="#76408c" fontcolor="#76408c" id=edge_5d0d9883 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_3884c24a [label=3 color="#76408c" fontcolor="#76408c" id=edge_148e6f6e labeltooltip=3 tooltip=3]
		subgraph cluster_block_3884c24a {
			block_3884c24a [label="[block] Run validations on cluster resources" color="#76408c" id=block_3884c24a labeltooltip="Run validations on cluster resources" shape=box tooltip="Run validations on cluster resources"]
			block_3884c24a -> role_d70e5cc6 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_44837f2c labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_f5d5780f [label=4 color="#76408c" fontcolor="#76408c" id=edge_d1ca5270 labeltooltip=4 tooltip=4]
		subgraph cluster_block_f5d5780f {
			block_f5d5780f [label="[block] Create the cluster network resources" color="#76408c" id=block_f5d5780f labeltooltip="Create the cluster network resources" shape=box tooltip="Create the cluster network resources"]
			block_f5d5780f -> role_4bf5e5a7 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_a353ece2 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_2b97c8d2 [label=5 color="#76408c" fontcolor="#76408c" id=edge_d8f267d0 labeltooltip=5 tooltip=5]
		subgraph cluster_block_2b97c8d2 {
			block_2b97c8d2 [label="[block] Create services the cluster will need" color="#76408c" id=block_2b97c8d2 labeltooltip="Create services the cluster will need" shape=box tooltip="Create services the cluster will need"]
			block_2b97c8d2 -> role_6d9b3871 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_89c4fd78 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_4b66b72b [label=6 color="#76408c" fontcolor="#76408c" id=edge_97208224 labeltooltip=6 tooltip=6]
		subgraph cluster_block_4b66b72b {
			block_4b66b72b [label="[block] Prepare to deploy the cluster" color="#76408c" id=block_4b66b72b labeltooltip="Prepare to deploy the cluster" shape=box tooltip="Prepare to deploy the cluster"]
			block_4b66b72b -> role_57e79482 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_ef34db89 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_bc807a37 [label=7 color="#76408c" fontcolor="#76408c" id=edge_df516ca1 labeltooltip=7 tooltip=7]
		subgraph cluster_block_bc807a37 {
			block_bc807a37 [label="[block] Download cloud images" color="#76408c" id=block_bc807a37 labeltooltip="Download cloud images" shape=box tooltip="Download cloud images"]
			block_bc807a37 -> role_cc18c6f3 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_003f4891 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_8ef93911 [label=8 color="#76408c" fontcolor="#76408c" id=edge_8d667155 labeltooltip=8 tooltip=8]
		subgraph cluster_block_8ef93911 {
			block_8ef93911 [label="[block] Deploy the cluster" color="#76408c" id=block_8ef93911 labeltooltip="Deploy the cluster" shape=box tooltip="Deploy the cluster"]
			block_8ef93911 -> role_eb007334 [label="1 " color="#76408c" fontcolor="#76408c" id=edge_5486b0e3 labeltooltip="1 " tooltip="1 "]
		}
		play_cc1cceab -> block_216fa178 [label=9 color="#76408c" fontcolor="#76408c" id=edge_b9760f7a labeltooltip=9 tooltip=9]
		subgraph cluster_block_216fa178 {
			block_216fa178 [label="[block] Run any post-deployment tasks" color="#76408c" id=block_216fa178 labeltooltip="Run any post-deployment tasks" shape=box tooltip="Run any post-deployment tasks"]
			block_216fa178 -> role_03eb31ad [label="1 " color="#76408c" fontcolor="#76408c" id=edge_5df9839c labeltooltip="1 " tooltip="1 "]
		}
	}
}
